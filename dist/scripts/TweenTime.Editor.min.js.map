{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///TweenTime.Editor.min.js","webpack:///webpack/bootstrap d79a5728f8a705847f13?d7f9","webpack:///./Editor.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./core/Utils.js?8d2f","webpack:///external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}?71f5","webpack:///./templates/timeline.tpl.html","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/hogan.js","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/compiler.js","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/template.js","webpack:///./graph/Timeline.js","webpack:///external \"d3\"","webpack:///./graph/Header.js","webpack:///./graph/TimeIndicator.js","webpack:///./graph/Items.js","webpack:///./graph/KeysPreview.js","webpack:///./graph/Properties.js","webpack:///./graph/Keys.js","webpack:///./graph/Errors.js","webpack:///./graph/Selection.js","webpack:///./editor/PropertiesEditor.js","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./editor/Property.js","webpack:///./editor/PropertyNumber.js","webpack:///./editor/PropertyBase.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}","webpack:///./templates/propertyNumber.tpl.html","webpack:///./editor/PropertyColor.js","webpack:///external \"spectrum\"","webpack:///./templates/propertyColor.tpl.html","webpack:///./editor/PropertyTween.js","webpack:///./templates/propertyTween.tpl.html","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./editor/EditorMenu.js","webpack:///./bower_components/FileSaver/FileSaver.js","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./editor/EditorControls.js","webpack:///./editor/SelectionManager.js","webpack:///./editor/Exporter.js","webpack:///./editor/UndoManager.js"],"names":["root","factory","exports","module","require","undefined","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_23__","__WEBPACK_EXTERNAL_MODULE_27__","__WEBPACK_EXTERNAL_MODULE_30__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","tpl_timeline","Timeline","PropertiesEditor","EditorMenu","EditorControls","SelectionManager","Exporter","UndoManager","Signals","Editor","tweenTime","options","_this","timer","lastTime","onKeyAdded","bind","onKeyRemoved","$timeline","$","append","addClass","selectionManager","exporter","timeline","propertiesEditor","keyAdded","add","keyRemoved","menu","onMenuCreated","find","controls","undoManager","onSelect","Signal","self","selection","addToSelection","dispatch","window","editorEnabled","dispatchEvent","Event","requestAnimationFrame","update","prototype","select","item","getSelection","addState","render","removeItem","length","triggerSelect","time","time_changed","force","_isDirty","_this2","Utils","formatMinutes","d","hours","Math","floor","minutes","seconds","output","getClosestTime","data","objectId","property_name","tolerance","timer_time","getCurrentTime","abs","i","start","end","j","properties","prop","keys","name","k","key","getPreviousKey","prevKey","sortKeys","compare","a","b","sort","guid","s4","random","toString","substring","H","T","Template","code","t","fl","partials","subs","apply","arguments","Hogan","template","cleanTripleStache","token","n","substr","trim","s","replace","tagChange","tag","text","index","charAt","l","buildTree","tokens","kind","stack","customTags","instructions","opener","tail","shift","allowedInSuper","Error","tags","isOpener","push","nodes","pop","isCloser","last","o","close","open","stringifySubstitutions","obj","items","esc","join","stringifyPartials","codeObj","rSlash","rQuot","rNewline","rCr","rLineSep","rParagraphSep","chooseMethod","indexOf","createPartial","node","context","prefix","sym","serialNo","indent","tripleStache","write","rIsWhitespace","#","^","<","/","!",">","=","_v","{","&","_t","scan","delimiters","addBuf","buf","String","lineIsWhitespace","isAllWhitespace","lineStart","match","filterLine","haveSeenTag","noNewLine","next","splice","seenTag","changeDelimiters","ctag","closeIndex","split","otag","len","IN_TEXT","IN_TAG_TYPE","IN_TAG","state","tagType","\n","stringify","wrapMain","generate","tree","walk","asString","makeTemplate","makePartials","Function","codegen","ctx","inPartial","nodelist","func","parse","sectionTags","cache","cacheKey","disableLambda","modelGet","compile","instance","findInScope","scope","doModelGet","val","get","createSpecializedPartial","stackSubs","stackPartials","stackText","PartialTemplate","Substitutions","partial","subsText","coerceToString","hoganEscape","str","hChars","test","rAmp","rLt","rGt","rApos","compiler","r","v","ri","ep","symbol","base","activeSub","rp","rs","section","isArray","inverted","pass","ms","returnFound","found","names","f","cx","mv","ls","oldTags","ct","textSource","result","sub","Array","Object","d3","Header","TimeIndicator","Items","KeysPreview","Properties","Keys","Errors","Selection","editor","currentTime","onUpdate","initialDomain","domainStart","domainEnd","totalDuration","margin","top","right","bottom","left","width","innerWidth","height","lineHeight","label_position_x","x","scale","domain","range","xAxis","svg","axis","orient","tickSize","tickFormat","attr","svgContainer","svgContainerTime","linesContainer","header","timeIndicator","keysPreview","newKey","keyContainer","selectNewKey","errors","onKeyUpdated","xAxisGrid","ticks","dy","xGrid","xAxisElement","onBrush","extent","onresize","INNER_WIDTH","selectAll","resize","domainLength","margin_ms","setDomain","bar","max","updateHeight","xDisplayed","createBrushHandle","createTimeHandle","durationChanged","onDurationChanged","adaptDomainToDuration","new_domain","min","brush","extent0","getTime","on","gBrush","timeSelection","dragTimeMove","event","sourceEvent","stopPropagation","event_x","clientX","dx","invert","timeMatch","shiftKey","seek","dragTime","behavior","drag","origin","enter","mouse","timeGrp","container","_","selectBar","datum","dragmove","diff","prop_key","dragmoveLeft","dragmoveRight","dragLeft","y","dragRight","bar_border","barEnter","barContainerRight","collapsed","numProperties","visibleProperties","filter","barWithStartAndEnd","label","exit","remove","propVal","propKey","setItemStyle","parentNode","bar_data","keyValue","keyKey","parseInt","subGrp","core","sub_height","lineObject","lineValue","def","_line","_property","defaultEase","ease","classed","_dom","propertyObject","propertyData","lineData","key_data","currentDomainStart","old_time","selection_first_time","selection_last_time","isEqual","time_offset","updateKeyItem","property","key_scale","is_first","altKey","propValue","_id","selectKey","type","dragend","key_grp","cls","grp_linear","grp_in","grp_out","grp_inout","propertiesWithError","insert","errorsValue","errorTime","onMouseUp","init","css","user-select","class","reset","empty","move","key_width","timeStart","timeEnd","containerBounding","getBoundingClientRect","each","state_data","item_data","itemBounding","Property","tpl_propertiesEditor","addProperty","$el","$container","keypress","e","forEach","removeClass","PropertyNumber","PropertyColor","PropertyTween","numberProp","tweenProp","key_val","getContainer","$tween_container","instance_prop","$grp_container","getGroupContainer","addNumberProperty","addTweenProperty","$existing","$grp","grp_class","group","group_name","toLowerCase","createGroupContainer","dispose","propClass","tween","click","preventDefault","PropertyBase","DraggableNumber","tpl_property","instance_property","onInputChange","$input","to5Runtime","getInputVal","parseFloat","getCurrentVal","view","onKeyClick","onChangeEnd","draggableOptions","changeCallback","endCallback","draggable","change","destroy","set","toFixed","$key","currentValue","addKey","prop_name","values","current_value","current_key","object","getCurrentKey","toggleClass","spectrum","allowEmpty","showAlpha","clickoutFiresChange","preferredFormat","color","_a","toHexString","toRgbString","onChange","$time","selected","tweens","charCode","blur","updateKeyTime","document","execCommand","isNaN","html","saveAs","initExport","initToggle","timelineClosed","$toggleLink","$toggleLinkSide","propertiesClosed","hasClass","getJSON","blob","Blob","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","navigator","msSaveOrOpenBlob","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","createEvent","initMouseEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","filesaver","event_types","concat","listener","FileSaver","object_url","target_view","slice","blob_changed","dispatch_all","fs_error","createObjectURL","location","href","new_tab","safari","readyState","DONE","abortable","create_if_not_found","create","exclusive","INIT","download","webkitSlice","size","TEMPORARY","fs","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","error","ABORT_ERR","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","content","webpackPolyfill","deprecate","paths","children","__webpack_amd_options__","$time_end","initControls","getDuration","playPause","$play_pause","toggle","is_playing","$bt_first","$bt_last","total","getTotalDuration","setDuration","addDataRelations","el","removeDuplicates","highlightItems","sortSelection","item2","lineIndex","line","propIndex","keyIndex","d3item","getData","domain_start","domain_end","settings","duration","json_replacer","JSON","history_max","history","current_index","keydown","keyCode","metaKey","ctrlKey","redo","undo","setState","item_key","key_key"],"mappings":"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","file":"TweenTime.Editor.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(undefined), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"signals\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"./signals\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"signals\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_30__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(undefined), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"signals\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"./signals\"), require(\"d3\"), require(\"jquery\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"signals\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_30__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar tpl_timeline = __webpack_require__(8);\n\tvar Timeline = __webpack_require__(12)[\"default\"];\n\tvar PropertiesEditor = __webpack_require__(22)[\"default\"];\n\tvar EditorMenu = __webpack_require__(35)[\"default\"];\n\tvar EditorControls = __webpack_require__(40)[\"default\"];\n\tvar SelectionManager = __webpack_require__(41)[\"default\"];\n\tvar Exporter = __webpack_require__(42)[\"default\"];\n\tvar UndoManager = __webpack_require__(43)[\"default\"];\n\tvar Signals = __webpack_require__(5);\n\t\n\tvar Editor = (function () {\n\t  var Editor = function Editor(tweenTime, options) {\n\t    var _this = this;\n\t    if (options === undefined) options = {};\n\t    this.tweenTime = tweenTime;\n\t    this.options = options;\n\t    this.timer = this.tweenTime.timer;\n\t    this.lastTime = -1;\n\t\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\t\n\t    this.$timeline = $(tpl_timeline());\n\t    $(\"body\").append(this.$timeline);\n\t    $(\"body\").addClass(\"has-editor\");\n\t\n\t    this.selectionManager = new SelectionManager(this.tweenTime);\n\t    this.exporter = new Exporter(this);\n\t    this.timeline = new Timeline(this, options);\n\t\n\t    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n\t    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n\t    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\t\n\t    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n\t    if (this.options.onMenuCreated !== undefined) {\n\t      this.options.onMenuCreated(this.$timeline.find(\".timeline__menu\"), this);\n\t    }\n\t\n\t    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n\t    this.undoManager = new UndoManager(this);\n\t\n\t    // Public events.\n\t    this.onSelect = new Signals.Signal();\n\t    var self = this;\n\t    this.selectionManager.onSelect.add(function (selection, addToSelection) {\n\t      // Propagate the event.\n\t      self.onSelect.dispatch(selection, addToSelection);\n\t    });\n\t\n\t    // Will help resize the canvas to correct size (minus sidebar and timeline)\n\t    window.editorEnabled = true;\n\t    window.dispatchEvent(new Event(\"resize\"));\n\t    window.requestAnimationFrame(function () {\n\t      return _this.update();\n\t    });\n\t  };\n\t\n\t  Editor.prototype.select = function (item, addToSelection) {\n\t    if (addToSelection === undefined) addToSelection = false;\n\t    this.selectionManager.select(item, addToSelection);\n\t  };\n\t\n\t  Editor.prototype.getSelection = function () {\n\t    return this.selectionManager.getSelection();\n\t  };\n\t\n\t  Editor.prototype.onKeyAdded = function () {\n\t    this.undoManager.addState();\n\t    this.render(false, false, true);\n\t  };\n\t\n\t  Editor.prototype.onKeyRemoved = function (item) {\n\t    this.selectionManager.removeItem(item);\n\t    this.undoManager.addState();\n\t    if (this.selectionManager.selection.length) {\n\t      this.selectionManager.triggerSelect();\n\t    }\n\t    this.render(false, false, true);\n\t  };\n\t\n\t  Editor.prototype.render = function (time, time_changed, force) {\n\t    if (time === undefined) time = false;\n\t    if (time_changed === undefined) time_changed = false;\n\t    if (force === undefined) force = false;\n\t    if (time === false) {\n\t      time = this.timer.time[0];\n\t    }\n\t    if (force) {\n\t      this.timeline._isDirty = true;\n\t    }\n\t    this.timeline.render(time, time_changed);\n\t    this.controls.render(time, time_changed);\n\t    this.propertiesEditor.render(time, time_changed);\n\t  };\n\t\n\t  Editor.prototype.update = function () {\n\t    var _this2 = this;\n\t    var time = this.timer.time[0];\n\t    var time_changed = this.lastTime === time ? false : true;\n\t\n\t    this.render(time, time_changed);\n\t    this.lastTime = this.timer.time[0];\n\t    window.requestAnimationFrame(function () {\n\t      return _this2.update();\n\t    });\n\t  };\n\t\n\t  return Editor;\n\t})();\n\t\n\tmodule.exports = Editor;\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Utils = (function () {\n\t  var Utils = function Utils() {};\n\t\n\t  Utils.formatMinutes = function (d) {\n\t    // convert milliseconds to seconds\n\t    d = d / 1000;\n\t    var hours = Math.floor(d / 3600);\n\t    var minutes = Math.floor((d - (hours * 3600)) / 60);\n\t    var seconds = d - (minutes * 60);\n\t    var output = seconds + \"s\";\n\t    if (minutes) {\n\t      output = minutes + \"m \" + output;\n\t    }\n\t    if (hours) {\n\t      output = hours + \"h \" + output;\n\t    }\n\t    return output;\n\t  };\n\t\n\t  Utils.getClosestTime = function (data, time, objectId, property_name, timer, tolerance) {\n\t    if (objectId === undefined) objectId = false;\n\t    if (property_name === undefined) property_name = false;\n\t    if (timer === undefined) timer = false;\n\t    if (tolerance === undefined) tolerance = 0.1;\n\t    if (timer) {\n\t      var timer_time = timer.getCurrentTime() / 1000;\n\t      if (Math.abs(timer_time - time) <= tolerance) {\n\t        return timer_time;\n\t      }\n\t    }\n\t\n\t    if (objectId || property_name) {\n\t      for (var i = 0; i < data.length; i++) {\n\t        var item = data[i];\n\t        // Don't match item with itself, but allow property to match item start/end.\n\t        if (item.id != objectId || property_name) {\n\t          // First check start & end.\n\t          if (Math.abs(item.start - time) <= tolerance) {\n\t            return item.start;\n\t          }\n\t\n\t          if (Math.abs(item.end - time) <= tolerance) {\n\t            return item.end;\n\t          }\n\t        }\n\t\n\t        // Test properties keys\n\t        for (var j = 0; j < item.properties.length; j++) {\n\t          var prop = item.properties[j];\n\t\n\t          // Don't match property with itself.\n\t          if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n\t            for (var k = 0; k < prop.keys.length; k++) {\n\t              var key = prop.keys[k];\n\t              if (Math.abs(key.time - time) <= tolerance) {\n\t                return key.time;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  Utils.getPreviousKey = function (keys, time) {\n\t    var prevKey = false;\n\t    for (var i = 0; i < keys.length; i++) {\n\t      var key = keys[i];\n\t      if (key.time < time) {\n\t        prevKey = key;\n\t      } else {\n\t        return prevKey;\n\t      }\n\t    }\n\t    return prevKey;\n\t  };\n\t\n\t  Utils.sortKeys = function (keys) {\n\t    var compare = function (a, b) {\n\t      if (a.time < b.time) {\n\t        return -1;\n\t      }\n\t      if (a.time > b.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    return keys.sort(compare);\n\t  };\n\t\n\t  Utils.guid = function () {\n\t    var s4 = function () {\n\t      return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);\n\t    };\n\t    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n\t  };\n\t\n\t  return Utils;\n\t})();\n\t\n\texports[\"default\"] = Utils;\n\n/***/ },\n/* 4 */,\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */,\n/* 7 */,\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(9);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t// This file is for use with Node.js. See dist/ for browser files.\n\t\n\tvar Hogan = __webpack_require__(10);\n\tHogan.Template = __webpack_require__(11).Template;\n\tHogan.template = Hogan.Template;\n\tmodule.exports = Hogan;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t(function (Hogan) {\n\t  // Setup regex  assignments\n\t  // remove whitespace according to Mustache spec\n\t  var rIsWhitespace = /\\S/,\n\t      rQuot = /\\\"/g,\n\t      rNewline =  /\\n/g,\n\t      rCr = /\\r/g,\n\t      rSlash = /\\\\/g,\n\t      rLineSep = /\\u2028/,\n\t      rParagraphSep = /\\u2029/;\n\t\n\t  Hogan.tags = {\n\t    '#': 1, '^': 2, '<': 3, '$': 4,\n\t    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n\t    '{': 10, '&': 11, '_t': 12\n\t  };\n\t\n\t  Hogan.scan = function scan(text, delimiters) {\n\t    var len = text.length,\n\t        IN_TEXT = 0,\n\t        IN_TAG_TYPE = 1,\n\t        IN_TAG = 2,\n\t        state = IN_TEXT,\n\t        tagType = null,\n\t        tag = null,\n\t        buf = '',\n\t        tokens = [],\n\t        seenTag = false,\n\t        i = 0,\n\t        lineStart = 0,\n\t        otag = '{{',\n\t        ctag = '}}';\n\t\n\t    function addBuf() {\n\t      if (buf.length > 0) {\n\t        tokens.push({tag: '_t', text: new String(buf)});\n\t        buf = '';\n\t      }\n\t    }\n\t\n\t    function lineIsWhitespace() {\n\t      var isAllWhitespace = true;\n\t      for (var j = lineStart; j < tokens.length; j++) {\n\t        isAllWhitespace =\n\t          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n\t          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n\t        if (!isAllWhitespace) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return isAllWhitespace;\n\t    }\n\t\n\t    function filterLine(haveSeenTag, noNewLine) {\n\t      addBuf();\n\t\n\t      if (haveSeenTag && lineIsWhitespace()) {\n\t        for (var j = lineStart, next; j < tokens.length; j++) {\n\t          if (tokens[j].text) {\n\t            if ((next = tokens[j+1]) && next.tag == '>') {\n\t              // set indent to token value\n\t              next.indent = tokens[j].text.toString()\n\t            }\n\t            tokens.splice(j, 1);\n\t          }\n\t        }\n\t      } else if (!noNewLine) {\n\t        tokens.push({tag:'\\n'});\n\t      }\n\t\n\t      seenTag = false;\n\t      lineStart = tokens.length;\n\t    }\n\t\n\t    function changeDelimiters(text, index) {\n\t      var close = '=' + ctag,\n\t          closeIndex = text.indexOf(close, index),\n\t          delimiters = trim(\n\t            text.substring(text.indexOf('=', index) + 1, closeIndex)\n\t          ).split(' ');\n\t\n\t      otag = delimiters[0];\n\t      ctag = delimiters[delimiters.length - 1];\n\t\n\t      return closeIndex + close.length - 1;\n\t    }\n\t\n\t    if (delimiters) {\n\t      delimiters = delimiters.split(' ');\n\t      otag = delimiters[0];\n\t      ctag = delimiters[1];\n\t    }\n\t\n\t    for (i = 0; i < len; i++) {\n\t      if (state == IN_TEXT) {\n\t        if (tagChange(otag, text, i)) {\n\t          --i;\n\t          addBuf();\n\t          state = IN_TAG_TYPE;\n\t        } else {\n\t          if (text.charAt(i) == '\\n') {\n\t            filterLine(seenTag);\n\t          } else {\n\t            buf += text.charAt(i);\n\t          }\n\t        }\n\t      } else if (state == IN_TAG_TYPE) {\n\t        i += otag.length - 1;\n\t        tag = Hogan.tags[text.charAt(i + 1)];\n\t        tagType = tag ? text.charAt(i + 1) : '_v';\n\t        if (tagType == '=') {\n\t          i = changeDelimiters(text, i);\n\t          state = IN_TEXT;\n\t        } else {\n\t          if (tag) {\n\t            i++;\n\t          }\n\t          state = IN_TAG;\n\t        }\n\t        seenTag = i;\n\t      } else {\n\t        if (tagChange(ctag, text, i)) {\n\t          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n\t                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n\t          buf = '';\n\t          i += ctag.length - 1;\n\t          state = IN_TEXT;\n\t          if (tagType == '{') {\n\t            if (ctag == '}}') {\n\t              i++;\n\t            } else {\n\t              cleanTripleStache(tokens[tokens.length - 1]);\n\t            }\n\t          }\n\t        } else {\n\t          buf += text.charAt(i);\n\t        }\n\t      }\n\t    }\n\t\n\t    filterLine(seenTag, true);\n\t\n\t    return tokens;\n\t  }\n\t\n\t  function cleanTripleStache(token) {\n\t    if (token.n.substr(token.n.length - 1) === '}') {\n\t      token.n = token.n.substring(0, token.n.length - 1);\n\t    }\n\t  }\n\t\n\t  function trim(s) {\n\t    if (s.trim) {\n\t      return s.trim();\n\t    }\n\t\n\t    return s.replace(/^\\s*|\\s*$/g, '');\n\t  }\n\t\n\t  function tagChange(tag, text, index) {\n\t    if (text.charAt(index) != tag.charAt(0)) {\n\t      return false;\n\t    }\n\t\n\t    for (var i = 1, l = tag.length; i < l; i++) {\n\t      if (text.charAt(index + i) != tag.charAt(i)) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    return true;\n\t  }\n\t\n\t  // the tags allowed inside super templates\n\t  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\t\n\t  function buildTree(tokens, kind, stack, customTags) {\n\t    var instructions = [],\n\t        opener = null,\n\t        tail = null,\n\t        token = null;\n\t\n\t    tail = stack[stack.length - 1];\n\t\n\t    while (tokens.length > 0) {\n\t      token = tokens.shift();\n\t\n\t      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n\t        throw new Error('Illegal content in < super tag.');\n\t      }\n\t\n\t      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n\t        stack.push(token);\n\t        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n\t      } else if (token.tag == '/') {\n\t        if (stack.length === 0) {\n\t          throw new Error('Closing tag without opener: /' + token.n);\n\t        }\n\t        opener = stack.pop();\n\t        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n\t          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n\t        }\n\t        opener.end = token.i;\n\t        return instructions;\n\t      } else if (token.tag == '\\n') {\n\t        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n\t      }\n\t\n\t      instructions.push(token);\n\t    }\n\t\n\t    if (stack.length > 0) {\n\t      throw new Error('missing closing tag: ' + stack.pop().n);\n\t    }\n\t\n\t    return instructions;\n\t  }\n\t\n\t  function isOpener(token, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].o == token.n) {\n\t        token.tag = '#';\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function isCloser(close, open, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].c == close && tags[i].o == open) {\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function stringifySubstitutions(obj) {\n\t    var items = [];\n\t    for (var key in obj) {\n\t      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n\t    }\n\t    return \"{ \" + items.join(\",\") + \" }\";\n\t  }\n\t\n\t  function stringifyPartials(codeObj) {\n\t    var partials = [];\n\t    for (var key in codeObj.partials) {\n\t      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n\t    }\n\t    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n\t  }\n\t\n\t  Hogan.stringify = function(codeObj, text, options) {\n\t    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n\t  }\n\t\n\t  var serialNo = 0;\n\t  Hogan.generate = function(tree, text, options) {\n\t    serialNo = 0;\n\t    var context = { code: '', subs: {}, partials: {} };\n\t    Hogan.walk(tree, context);\n\t\n\t    if (options.asString) {\n\t      return this.stringify(context, text, options);\n\t    }\n\t\n\t    return this.makeTemplate(context, text, options);\n\t  }\n\t\n\t  Hogan.wrapMain = function(code) {\n\t    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n\t  }\n\t\n\t  Hogan.template = Hogan.Template;\n\t\n\t  Hogan.makeTemplate = function(codeObj, text, options) {\n\t    var template = this.makePartials(codeObj);\n\t    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n\t    return new this.template(template, text, this, options);\n\t  }\n\t\n\t  Hogan.makePartials = function(codeObj) {\n\t    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n\t    for (key in template.partials) {\n\t      template.partials[key] = this.makePartials(template.partials[key]);\n\t    }\n\t    for (key in codeObj.subs) {\n\t      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n\t    }\n\t    return template;\n\t  }\n\t\n\t  function esc(s) {\n\t    return s.replace(rSlash, '\\\\\\\\')\n\t            .replace(rQuot, '\\\\\\\"')\n\t            .replace(rNewline, '\\\\n')\n\t            .replace(rCr, '\\\\r')\n\t            .replace(rLineSep, '\\\\u2028')\n\t            .replace(rParagraphSep, '\\\\u2029');\n\t  }\n\t\n\t  function chooseMethod(s) {\n\t    return (~s.indexOf('.')) ? 'd' : 'f';\n\t  }\n\t\n\t  function createPartial(node, context) {\n\t    var prefix = \"<\" + (context.prefix || \"\");\n\t    var sym = prefix + node.n + serialNo++;\n\t    context.partials[sym] = {name: node.n, partials: {}};\n\t    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n\t    return sym;\n\t  }\n\t\n\t  Hogan.codegen = {\n\t    '#': function(node, context) {\n\t      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n\t                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n\t                      't.rs(c,p,' + 'function(c,p,t){';\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += '});c.pop();}';\n\t    },\n\t\n\t    '^': function(node, context) {\n\t      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += '};';\n\t    },\n\t\n\t    '>': createPartial,\n\t    '<': function(node, context) {\n\t      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n\t      Hogan.walk(node.nodes, ctx);\n\t      var template = context.partials[createPartial(node, context)];\n\t      template.subs = ctx.subs;\n\t      template.partials = ctx.partials;\n\t    },\n\t\n\t    '$': function(node, context) {\n\t      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n\t      Hogan.walk(node.nodes, ctx);\n\t      context.subs[node.n] = ctx.code;\n\t      if (!context.inPartial) {\n\t        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n\t      }\n\t    },\n\t\n\t    '\\n': function(node, context) {\n\t      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n\t    },\n\t\n\t    '_v': function(node, context) {\n\t      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n\t    },\n\t\n\t    '_t': function(node, context) {\n\t      context.code += write('\"' + esc(node.text) + '\"');\n\t    },\n\t\n\t    '{': tripleStache,\n\t\n\t    '&': tripleStache\n\t  }\n\t\n\t  function tripleStache(node, context) {\n\t    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n\t  }\n\t\n\t  function write(s) {\n\t    return 't.b(' + s + ');';\n\t  }\n\t\n\t  Hogan.walk = function(nodelist, context) {\n\t    var func;\n\t    for (var i = 0, l = nodelist.length; i < l; i++) {\n\t      func = Hogan.codegen[nodelist[i].tag];\n\t      func && func(nodelist[i], context);\n\t    }\n\t    return context;\n\t  }\n\t\n\t  Hogan.parse = function(tokens, text, options) {\n\t    options = options || {};\n\t    return buildTree(tokens, '', [], options.sectionTags || []);\n\t  }\n\t\n\t  Hogan.cache = {};\n\t\n\t  Hogan.cacheKey = function(text, options) {\n\t    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n\t  }\n\t\n\t  Hogan.compile = function(text, options) {\n\t    options = options || {};\n\t    var key = Hogan.cacheKey(text, options);\n\t    var template = this.cache[key];\n\t\n\t    if (template) {\n\t      var partials = template.partials;\n\t      for (var name in partials) {\n\t        delete partials[name].instance;\n\t      }\n\t      return template;\n\t    }\n\t\n\t    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n\t    return this.cache[key] = template;\n\t  }\n\t})( true ? exports : Hogan);\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\tvar Hogan = {};\n\t\n\t(function (Hogan) {\n\t  Hogan.Template = function (codeObj, text, compiler, options) {\n\t    codeObj = codeObj || {};\n\t    this.r = codeObj.code || this.r;\n\t    this.c = compiler;\n\t    this.options = options || {};\n\t    this.text = text || '';\n\t    this.partials = codeObj.partials || {};\n\t    this.subs = codeObj.subs || {};\n\t    this.buf = '';\n\t  }\n\t\n\t  Hogan.Template.prototype = {\n\t    // render: replaced by generated code.\n\t    r: function (context, partials, indent) { return ''; },\n\t\n\t    // variable escaping\n\t    v: hoganEscape,\n\t\n\t    // triple stache\n\t    t: coerceToString,\n\t\n\t    render: function render(context, partials, indent) {\n\t      return this.ri([context], partials || {}, indent);\n\t    },\n\t\n\t    // render internal -- a hook for overrides that catches partials too\n\t    ri: function (context, partials, indent) {\n\t      return this.r(context, partials, indent);\n\t    },\n\t\n\t    // ensurePartial\n\t    ep: function(symbol, partials) {\n\t      var partial = this.partials[symbol];\n\t\n\t      // check to see that if we've instantiated this partial before\n\t      var template = partials[partial.name];\n\t      if (partial.instance && partial.base == template) {\n\t        return partial.instance;\n\t      }\n\t\n\t      if (typeof template == 'string') {\n\t        if (!this.c) {\n\t          throw new Error(\"No compiler available.\");\n\t        }\n\t        template = this.c.compile(template, this.options);\n\t      }\n\t\n\t      if (!template) {\n\t        return null;\n\t      }\n\t\n\t      // We use this to check whether the partials dictionary has changed\n\t      this.partials[symbol].base = template;\n\t\n\t      if (partial.subs) {\n\t        // Make sure we consider parent template now\n\t        if (!partials.stackText) partials.stackText = {};\n\t        for (key in partial.subs) {\n\t          if (!partials.stackText[key]) {\n\t            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n\t          }\n\t        }\n\t        template = createSpecializedPartial(template, partial.subs, partial.partials,\n\t          this.stackSubs, this.stackPartials, partials.stackText);\n\t      }\n\t      this.partials[symbol].instance = template;\n\t\n\t      return template;\n\t    },\n\t\n\t    // tries to find a partial in the current scope and render it\n\t    rp: function(symbol, context, partials, indent) {\n\t      var partial = this.ep(symbol, partials);\n\t      if (!partial) {\n\t        return '';\n\t      }\n\t\n\t      return partial.ri(context, partials, indent);\n\t    },\n\t\n\t    // render a section\n\t    rs: function(context, partials, section) {\n\t      var tail = context[context.length - 1];\n\t\n\t      if (!isArray(tail)) {\n\t        section(context, partials, this);\n\t        return;\n\t      }\n\t\n\t      for (var i = 0; i < tail.length; i++) {\n\t        context.push(tail[i]);\n\t        section(context, partials, this);\n\t        context.pop();\n\t      }\n\t    },\n\t\n\t    // maybe start a section\n\t    s: function(val, ctx, partials, inverted, start, end, tags) {\n\t      var pass;\n\t\n\t      if (isArray(val) && val.length === 0) {\n\t        return false;\n\t      }\n\t\n\t      if (typeof val == 'function') {\n\t        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n\t      }\n\t\n\t      pass = !!val;\n\t\n\t      if (!inverted && pass && ctx) {\n\t        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n\t      }\n\t\n\t      return pass;\n\t    },\n\t\n\t    // find values with dotted names\n\t    d: function(key, ctx, partials, returnFound) {\n\t      var found,\n\t          names = key.split('.'),\n\t          val = this.f(names[0], ctx, partials, returnFound),\n\t          doModelGet = this.options.modelGet,\n\t          cx = null;\n\t\n\t      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n\t        val = ctx[ctx.length - 1];\n\t      } else {\n\t        for (var i = 1; i < names.length; i++) {\n\t          found = findInScope(names[i], val, doModelGet);\n\t          if (found !== undefined) {\n\t            cx = val;\n\t            val = found;\n\t          } else {\n\t            val = '';\n\t          }\n\t        }\n\t      }\n\t\n\t      if (returnFound && !val) {\n\t        return false;\n\t      }\n\t\n\t      if (!returnFound && typeof val == 'function') {\n\t        ctx.push(cx);\n\t        val = this.mv(val, ctx, partials);\n\t        ctx.pop();\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // find values with normal names\n\t    f: function(key, ctx, partials, returnFound) {\n\t      var val = false,\n\t          v = null,\n\t          found = false,\n\t          doModelGet = this.options.modelGet;\n\t\n\t      for (var i = ctx.length - 1; i >= 0; i--) {\n\t        v = ctx[i];\n\t        val = findInScope(key, v, doModelGet);\n\t        if (val !== undefined) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t\n\t      if (!found) {\n\t        return (returnFound) ? false : \"\";\n\t      }\n\t\n\t      if (!returnFound && typeof val == 'function') {\n\t        val = this.mv(val, ctx, partials);\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // higher order templates\n\t    ls: function(func, cx, partials, text, tags) {\n\t      var oldTags = this.options.delimiters;\n\t\n\t      this.options.delimiters = tags;\n\t      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n\t      this.options.delimiters = oldTags;\n\t\n\t      return false;\n\t    },\n\t\n\t    // compile text\n\t    ct: function(text, cx, partials) {\n\t      if (this.options.disableLambda) {\n\t        throw new Error('Lambda features disabled.');\n\t      }\n\t      return this.c.compile(text, this.options).render(cx, partials);\n\t    },\n\t\n\t    // template result buffering\n\t    b: function(s) { this.buf += s; },\n\t\n\t    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\t\n\t    // method replace section\n\t    ms: function(func, ctx, partials, inverted, start, end, tags) {\n\t      var textSource,\n\t          cx = ctx[ctx.length - 1],\n\t          result = func.call(cx);\n\t\n\t      if (typeof result == 'function') {\n\t        if (inverted) {\n\t          return true;\n\t        } else {\n\t          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n\t          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n\t        }\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    // method replace variable\n\t    mv: function(func, ctx, partials) {\n\t      var cx = ctx[ctx.length - 1];\n\t      var result = func.call(cx);\n\t\n\t      if (typeof result == 'function') {\n\t        return this.ct(coerceToString(result.call(cx)), cx, partials);\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    sub: function(name, context, partials, indent) {\n\t      var f = this.subs[name];\n\t      if (f) {\n\t        this.activeSub = name;\n\t        f(context, partials, this, indent);\n\t        this.activeSub = false;\n\t      }\n\t    }\n\t\n\t  };\n\t\n\t  //Find a key in an object\n\t  function findInScope(key, scope, doModelGet) {\n\t    var val;\n\t\n\t    if (scope && typeof scope == 'object') {\n\t\n\t      if (scope[key] !== undefined) {\n\t        val = scope[key];\n\t\n\t      // try lookup with get for backbone or similar model data\n\t      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n\t        val = scope.get(key);\n\t      }\n\t    }\n\t\n\t    return val;\n\t  }\n\t\n\t  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n\t    function PartialTemplate() {};\n\t    PartialTemplate.prototype = instance;\n\t    function Substitutions() {};\n\t    Substitutions.prototype = instance.subs;\n\t    var key;\n\t    var partial = new PartialTemplate();\n\t    partial.subs = new Substitutions();\n\t    partial.subsText = {};  //hehe. substext.\n\t    partial.buf = '';\n\t\n\t    stackSubs = stackSubs || {};\n\t    partial.stackSubs = stackSubs;\n\t    partial.subsText = stackText;\n\t    for (key in subs) {\n\t      if (!stackSubs[key]) stackSubs[key] = subs[key];\n\t    }\n\t    for (key in stackSubs) {\n\t      partial.subs[key] = stackSubs[key];\n\t    }\n\t\n\t    stackPartials = stackPartials || {};\n\t    partial.stackPartials = stackPartials;\n\t    for (key in partials) {\n\t      if (!stackPartials[key]) stackPartials[key] = partials[key];\n\t    }\n\t    for (key in stackPartials) {\n\t      partial.partials[key] = stackPartials[key];\n\t    }\n\t\n\t    return partial;\n\t  }\n\t\n\t  var rAmp = /&/g,\n\t      rLt = /</g,\n\t      rGt = />/g,\n\t      rApos = /\\'/g,\n\t      rQuot = /\\\"/g,\n\t      hChars = /[&<>\\\"\\']/;\n\t\n\t  function coerceToString(val) {\n\t    return String((val === null || val === undefined) ? '' : val);\n\t  }\n\t\n\t  function hoganEscape(str) {\n\t    str = coerceToString(str);\n\t    return hChars.test(str) ?\n\t      str\n\t        .replace(rAmp, '&amp;')\n\t        .replace(rLt, '&lt;')\n\t        .replace(rGt, '&gt;')\n\t        .replace(rApos, '&#39;')\n\t        .replace(rQuot, '&quot;') :\n\t      str;\n\t  }\n\t\n\t  var isArray = Array.isArray || function(a) {\n\t    return Object.prototype.toString.call(a) === '[object Array]';\n\t  };\n\t\n\t})( true ? exports : Hogan);\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\t\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar Header = __webpack_require__(14)[\"default\"];\n\tvar TimeIndicator = __webpack_require__(15)[\"default\"];\n\tvar Items = __webpack_require__(16)[\"default\"];\n\tvar KeysPreview = __webpack_require__(17)[\"default\"];\n\tvar Properties = __webpack_require__(18)[\"default\"];\n\tvar Keys = __webpack_require__(19)[\"default\"];\n\tvar Errors = __webpack_require__(20)[\"default\"];\n\tvar Selection = __webpack_require__(21)[\"default\"];\n\tvar Timeline = (function () {\n\t  var Timeline = function Timeline(editor, options) {\n\t    var _this = this;\n\t    this.editor = editor;\n\t    this.tweenTime = this.editor.tweenTime;\n\t    this.timer = this.tweenTime.timer;\n\t    this.selectionManager = this.editor.selectionManager;\n\t\n\t    this._isDirty = true;\n\t    this.timer = this.tweenTime.timer;\n\t    this.currentTime = this.timer.time; // used in timeindicator.\n\t\n\t    this.onUpdate = this.onUpdate.bind(this);\n\t\n\t    // Make the domain cover 20% of the totalDuation by default.\n\t    this.initialDomain = [];\n\t    this.initialDomain[0] = options.domainStart || 0;\n\t    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\t\n\t    // Adapt time to be greater or equal to domainStart.\n\t    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n\t      this.timer.time[0] = this.initialDomain[0];\n\t    }\n\t\n\t    var margin = { top: 6, right: 20, bottom: 0, left: 265 };\n\t    this.margin = margin;\n\t\n\t    var width = window.innerWidth - margin.left - margin.right;\n\t    var height = 270 - margin.top - margin.bottom - 40;\n\t    this.lineHeight = 20;\n\t    this.label_position_x = -margin.left + 20;\n\t\n\t    this.x = d3.time.scale().domain(this.initialDomain).range([0, width]);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-height, 0).tickFormat(Utils.formatMinutes);\n\t\n\t    this.svg = d3.select(\".timeline__main\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", 600);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\n\t    this.svgContainerTime = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\t\n\t    this.linesContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\");\n\t\n\t    this.header = new Header(this.timer, this.initialDomain, this.tweenTime, width, margin);\n\t    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\t\n\t    this.selection = new Selection(this, this.svg, margin);\n\t\n\t    this.items = new Items(this, this.linesContainer);\n\t    this.items.onUpdate.add(this.onUpdate);\n\t    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\t\n\t    this.properties = new Properties(this);\n\t    this.properties.onKeyAdded.add(function (newKey, keyContainer) {\n\t      _this._isDirty = true;\n\t      // render the timeline directly so that we can directly select\n\t      // the new key with it's domElement.\n\t      _this.render(0, false);\n\t      _this.keys.selectNewKey(newKey, keyContainer);\n\t    });\n\t    this.errors = new Errors(this);\n\t    this.keys = new Keys(this);\n\t    this.keys.onKeyUpdated.add(function () {\n\t      _this.onUpdate();\n\t    });\n\t\n\t    this.xAxisGrid = d3.svg.axis().scale(this.x).ticks(100).tickSize(-this.items.dy, 0).tickFormat(\"\").orient(\"top\");\n\t\n\t    this.xGrid = this.svgContainer.append(\"g\").attr(\"class\", \"x axis grid\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxisGrid);\n\t\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxis);\n\t\n\t    this.header.onBrush.add(function (extent) {\n\t      _this.x.domain(extent);\n\t      _this.xGrid.call(_this.xAxisGrid);\n\t      _this.xAxisElement.call(_this.xAxis);\n\t      _this._isDirty = true;\n\t    });\n\t\n\t    // First render\n\t    window.requestAnimationFrame(function () {\n\t      _this.render();\n\t    });\n\t\n\t    window.onresize = function () {\n\t      var INNER_WIDTH = window.innerWidth;\n\t      var width = INNER_WIDTH - margin.left - margin.right;\n\t      _this.svg.attr(\"width\", width + margin.left + margin.right);\n\t      _this.svg.selectAll(\".timeline__right-mask\").attr(\"width\", INNER_WIDTH);\n\t      _this.x.range([0, width]);\n\t\n\t      _this._isDirty = true;\n\t      _this.header.resize(INNER_WIDTH);\n\t      _this.render();\n\t    };\n\t  };\n\t\n\t  Timeline.prototype.onUpdate = function () {\n\t    this.editor.render(false, false, true);\n\t  };\n\t\n\t  Timeline.prototype.render = function (time, time_changed) {\n\t    if (time_changed) {\n\t      var domainLength;\n\t      // Update current domain when playing to keep time indicator in view.\n\t      var margin_ms = 16;\n\t      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n\t        domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] += domainLength - margin_ms;\n\t        this.initialDomain[1] += domainLength - margin_ms;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n\t        domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] = this.timer.getCurrentTime();\n\t        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t    }\n\t\n\t    if (this._isDirty || time_changed) {\n\t      // Render header and time indicator everytime the time changed.\n\t      this.header.render();\n\t      this.timeIndicator.render();\n\t    }\n\t\n\t    if (this._isDirty) {\n\t      // No need to call this on each frames, but only on brush, key drag, ...\n\t      var bar = this.items.render();\n\t      this.keysPreview.render(bar);\n\t      var properties = this.properties.render(bar);\n\t      this.errors.render(properties);\n\t      this.keys.render(properties);\n\t      this._isDirty = false;\n\t\n\t      // Adapt the timeline height.\n\t      var height = Math.max(this.items.dy + 30, 230);\n\t      this.xAxis.tickSize(-height, 0);\n\t      this.xAxisGrid.tickSize(-height, 0);\n\t      this.xGrid.call(this.xAxisGrid);\n\t      this.xAxisElement.call(this.xAxis);\n\t      this.svg.attr(\"height\", height);\n\t      this.timeIndicator.updateHeight(height);\n\t    }\n\t  };\n\t\n\t  return Timeline;\n\t})();\n\t\n\texports[\"default\"] = Timeline;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\t\n\tvar Signals = __webpack_require__(5);\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar Header = (function () {\n\t  var Header = function Header(timer, initialDomain, tweenTime, width, margin) {\n\t    this.timer = timer;\n\t    this.initialDomain = initialDomain;\n\t    this.tweenTime = tweenTime;\n\t\n\t    this.onBrush = new Signals.Signal();\n\t    this.margin = { top: 10, right: 20, bottom: 0, left: margin.left };\n\t    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\t\n\t    this.currentTime = this.timer.time;\n\t    this.x = d3.time.scale().range([0, width]);\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t\n\t    // Same as this.x from timeline\n\t    this.xDisplayed = d3.time.scale().range([0, width]);\n\t    this.xDisplayed.domain(this.initialDomain);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-5, 0).tickFormat(Utils.formatMinutes);\n\t\n\t    this.svg = d3.select(\".timeline__header\").append(\"svg\").attr(\"width\", width + this.margin.left + this.margin.right).attr(\"height\", 56);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\t\n\t    this.createBrushHandle();\n\t    this.createTimeHandle();\n\t    this.timer.durationChanged.add(this.onDurationChanged);\n\t  };\n\t\n\t  Header.prototype.adaptDomainToDuration = function (domain, seconds) {\n\t    var ms = seconds * 1000;\n\t    var new_domain = [domain[0], domain[1]];\n\t    // Make the domain smaller or equal to ms.\n\t    new_domain[0] = Math.min(new_domain[0], ms);\n\t    new_domain[1] = Math.min(new_domain[1], ms);\n\t    // Should not go below 0.\n\t    new_domain[0] = Math.max(new_domain[0], 0);\n\t\n\t    return new_domain;\n\t  };\n\t\n\t  Header.prototype.setDomain = function () {\n\t    this.brush.x(this.x).extent(this.initialDomain);\n\t    this.svgContainer.select(\".brush\").call(this.brush);\n\t    // Same as onBrush\n\t    this.onBrush.dispatch(this.initialDomain);\n\t    this.render();\n\t    this.xDisplayed.domain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.onDurationChanged = function (seconds) {\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t    this.xAxisElement.call(this.xAxis);\n\t    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n\t    this.setDomain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.createBrushHandle = function () {\n\t    var _this = this;\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\").call(this.xAxis);\n\t\n\t    var onBrush = function () {\n\t      var extent0 = _this.brush.extent();\n\t      // Get domain as milliseconds and not date.\n\t      var start = extent0[0].getTime();\n\t      var end = extent0[1].getTime();\n\t      // Set the initial domain.\n\t      _this.initialDomain[0] = start;\n\t      _this.initialDomain[1] = end;\n\t      _this.setDomain(_this.initialDomain);\n\t    };\n\t\n\t    this.brush = d3.svg.brush().x(this.x).extent(this.initialDomain).on(\"brush\", onBrush);\n\t\n\t    this.gBrush = this.svgContainer.append(\"g\").attr(\"class\", \"brush\").call(this.brush).selectAll(\"rect\").attr(\"height\", 20);\n\t  };\n\t\n\t  Header.prototype.render = function () {\n\t    var timeSelection = this.svgContainer.selectAll(\".time-indicator\");\n\t    timeSelection.attr(\"transform\", \"translate(\" + (this.xDisplayed(this.currentTime[0])) + \", 25)\");\n\t  };\n\t\n\t  Header.prototype.createTimeHandle = function () {\n\t    var self = this;\n\t\n\t    var dragTimeMove = function () {\n\t      var event = d3.event.sourceEvent;\n\t      event.stopPropagation();\n\t      var tweenTime = self.tweenTime;\n\t      var event_x = event.x !== undefined ? event.x : event.clientX;\n\t      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t\n\t      var timeMatch = false;\n\t      if (event.shiftKey) {\n\t        var time = dx / 1000;\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, time, \"---non-existant\", false, false, 0.3);\n\t        if (timeMatch !== false) {\n\t          timeMatch = timeMatch * 1000;\n\t        }\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t      self.timer.seek([timeMatch]);\n\t    };\n\t\n\t    var dragTime = d3.behavior.drag().origin(function (d) {\n\t      return d;\n\t    }).on(\"drag\", dragTimeMove);\n\t\n\t    var timeSelection = this.svgContainer.selectAll(\".time-indicator\").data(this.currentTime);\n\t\n\t    timeSelection.enter().append(\"rect\").attr(\"x\", 0).attr(\"y\", 20).attr(\"width\", self.xDisplayed(self.timer.totalDuration)).attr(\"height\", 50).attr(\"fill-opacity\", 0).on(\"click\", function () {\n\t      var mouse = d3.mouse(this);\n\t      var dx = self.xDisplayed.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t      self.timer.seek([dx]);\n\t    });\n\t\n\t    var timeGrp = timeSelection.enter().append(\"g\").attr(\"class\", \"time-indicator\").attr(\"transform\", \"translate(-0.5,\" + 30 + \")\").call(dragTime);\n\t\n\t    timeGrp.append(\"rect\").attr(\"class\", \"time-indicator__line\").attr(\"x\", -0.5).attr(\"y\", 0).attr(\"width\", 1).attr(\"height\", 1000);\n\t\n\t    timeGrp.append(\"path\").attr(\"class\", \"time-indicator__handle\").attr(\"d\", \"M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3\");\n\t\n\t    // Mask time indicator\n\t    // todo: remove the mask.\n\t    this.svgContainer.append(\"rect\").attr(\"class\", \"graph-mask\").attr(\"x\", -self.margin.left).attr(\"y\", -self.margin.top).attr(\"width\", self.margin.left - 5).attr(\"height\", self.height);\n\t  };\n\t\n\t  Header.prototype.resize = function (width) {\n\t    width = width - this.margin.left - this.margin.right;\n\t    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\t\n\t    this.x.range([0, width]);\n\t    this.xDisplayed.range([0, width]);\n\t    this.xAxisElement.call(this.xAxis);\n\t  };\n\t\n\t  return Header;\n\t})();\n\t\n\texports[\"default\"] = Header;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar TimeIndicator = (function () {\n\t  var TimeIndicator = function TimeIndicator(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.timeSelection = this.container.selectAll(\".time-indicator\").data(this.timeline.currentTime);\n\t    this.timeGrp = this.timeSelection.enter().append(\"svg\").attr(\"class\", \"time-indicator timeline__right-mask\").attr(\"width\", window.innerWidth - this.timeline.label_position_x).attr(\"height\", 442);\n\t\n\t    this.timeSelection = this.timeGrp.append(\"rect\").attr(\"class\", \"time-indicator__line\").attr(\"x\", 0).attr(\"y\", -this.timeline.margin.top - 5).attr(\"width\", 1).attr(\"height\", 1000);\n\t\n\t    this.timeSelection = this.container.selectAll(\".time-indicator rect\");\n\t  };\n\t\n\t  TimeIndicator.prototype.updateHeight = function (height) {\n\t    this.timeGrp.attr(\"height\", height);\n\t    this.timeSelection.attr(\"height\", height + this.timeline.margin.top + 5);\n\t  };\n\t\n\t  TimeIndicator.prototype.render = function () {\n\t    this.timeSelection.attr(\"transform\", \"translate(\" + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + \",0)\");\n\t  };\n\t\n\t  return TimeIndicator;\n\t})();\n\t\n\texports[\"default\"] = TimeIndicator;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\tvar Signals = __webpack_require__(5);\n\tvar _ = __webpack_require__(2);\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar Items = (function () {\n\t  var Items = function Items(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.dy = 10 + this.timeline.margin.top;\n\t    this.onUpdate = new Signals.Signal();\n\t  };\n\t\n\t  Items.prototype.render = function () {\n\t    var self = this;\n\t    var tweenTime = self.timeline.tweenTime;\n\t\n\t    var selectBar = function () {\n\t      var data = d3.select(this).datum();\n\t      self.timeline.selectionManager.select(data);\n\t    };\n\t\n\t    var dragmove = function (d) {\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var diff = (dx - d.start);\n\t      d.start += diff;\n\t      d.end += diff;\n\t      if (d.properties) {\n\t        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n\t          var prop = d.properties[prop_key];\n\t          for (var i = 0; i < prop.keys.length; i++) {\n\t            var key = prop.keys[i];\n\t            key.time += diff;\n\t          }\n\t        }\n\t      }\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragmoveLeft = function (d) {\n\t      d3.event.sourceEvent.stopPropagation();\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        var diff = dx - d.start;\n\t        timeMatch = d.start + diff;\n\t      }\n\t      d.start = timeMatch;\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragmoveRight = function (d) {\n\t      d3.event.sourceEvent.stopPropagation();\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        var diff = dx - d.end;\n\t        timeMatch = d.end + diff;\n\t      }\n\t      d.end = timeMatch;\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragLeft = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmoveLeft);\n\t\n\t    var dragRight = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmoveRight);\n\t\n\t    var drag = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmove);\n\t\n\t    var bar_border = 1;\n\t    var bar = this.container.selectAll(\".line-grp\").data(this.timeline.tweenTime.data, function (d) {\n\t      return d.id;\n\t    });\n\t\n\t    var barEnter = bar.enter().append(\"g\").attr(\"class\", \"line-grp\");\n\t\n\t    var barContainerRight = barEnter.append(\"svg\").attr(\"class\", \"timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar\")\n\t    // Add a unique id for SelectionManager.removeDuplicates\n\t    .attr(\"id\", function () {\n\t      return Utils.guid();\n\t    }).attr(\"y\", 3).attr(\"height\", 14);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--left\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragLeft);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--right\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragRight);\n\t\n\t    self.dy = 10 + this.timeline.margin.top;\n\t    bar.attr(\"transform\", function (d) {\n\t      var y = self.dy;\n\t      self.dy += self.timeline.lineHeight;\n\t      if (!d.collapsed) {\n\t        var numProperties = 0;\n\t        if (d.properties) {\n\t          var visibleProperties = _.filter(d.properties, function (prop) {\n\t            return prop.keys.length;\n\t          });\n\t          numProperties = visibleProperties.length;\n\t        }\n\t        self.dy += numProperties * self.timeline.lineHeight;\n\t      }\n\t      return \"translate(0,\" + y + \")\";\n\t    });\n\t\n\t    var barWithStartAndEnd = function (d) {\n\t      if ((d.start !== undefined) && (d.end !== undefined)) {\n\t        return true;\n\t      }\n\t      return false;\n\t    };\n\t\n\t    bar.selectAll(\".bar-anchor--left\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.start * 1000) - 1;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    bar.selectAll(\".bar-anchor--right\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.end * 1000) - 1;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    bar.selectAll(\".bar\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.start * 1000) + bar_border;\n\t    }).attr(\"width\", function (d) {\n\t      return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n\t    }).call(drag).on(\"click\", selectBar).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    barEnter.append(\"text\").attr(\"class\", \"line-label\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 16).text(function (d) {\n\t      return d.label;\n\t    }).on(\"click\", selectBar).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    barEnter.append(\"text\").attr(\"class\", \"line__toggle\").attr(\"x\", self.timeline.label_position_x - 10).attr(\"y\", 16).on(\"click\", function (d) {\n\t      d.collapsed = !d.collapsed;\n\t      self.onUpdate.dispatch();\n\t    });\n\t\n\t    bar.selectAll(\".line__toggle\").text(function (d) {\n\t      if (d.collapsed) {\n\t        return \"\\u25b8\";\n\t      } else {\n\t        return \"\\u25be\";\n\t      }\n\t    });\n\t\n\t    barEnter.append(\"line\").attr(\"class\", \"line-separator\").attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t    bar.exit().remove();\n\t\n\t    return bar;\n\t  };\n\t\n\t  return Items;\n\t})();\n\t\n\texports[\"default\"] = Items;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\t\n\tvar KeysPreview = (function () {\n\t  var KeysPreview = function KeysPreview(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t  };\n\t\n\t  KeysPreview.prototype.render = function (bar) {\n\t    var self = this;\n\t\n\t    var propVal = function (d) {\n\t      if (d.properties) {\n\t        return d.properties;\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    var propKey = function (d) {\n\t      return d.name;\n\t    };\n\t\n\t    var properties = bar.selectAll(\".keys-preview\").data(propVal, propKey);\n\t\n\t    properties.enter().append(\"svg\").attr(\"class\", \"keys-preview timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    var setItemStyle = function () {\n\t      var item = d3.select(this.parentNode.parentNode);\n\t      var bar_data = item.datum();\n\t      if (bar_data.collapsed === true) {\n\t        return \"\";\n\t      }\n\t      // Show only when item is collapsed\n\t      return \"display: none;\";\n\t    };\n\t\n\t    properties.selectAll(\".key--preview\").attr(\"style\", setItemStyle);\n\t\n\t    var keyValue = function (d) {\n\t      return d.keys;\n\t    };\n\t    var keyKey = function (d) {\n\t      return d.time;\n\t    };\n\t    var keys = properties.selectAll(\".key--preview\").data(keyValue, keyKey);\n\t\n\t    keys.enter().append(\"path\").attr(\"class\", \"key--preview\").attr(\"style\", setItemStyle).attr(\"d\", \"M 0 -4 L 4 0 L 0 4 L -4 0\");\n\t\n\t    keys.attr(\"transform\", function (d) {\n\t      var dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      var dy = 11;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t\n\t    keys.exit().remove();\n\t  };\n\t\n\t  return KeysPreview;\n\t})();\n\t\n\texports[\"default\"] = KeysPreview;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\tvar Signals = __webpack_require__(5);\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar Properties = (function () {\n\t  var Properties = function Properties(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyAdded = new Signals.Signal();\n\t    this.subGrp = false;\n\t  };\n\t\n\t  Properties.prototype.render = function (bar) {\n\t    var self = this;\n\t    var editor = this.timeline.editor;\n\t    var core = editor.tweenTime;\n\t\n\t    var propVal = function (d) {\n\t      if (d.properties) {\n\t        return d.properties.filter(function (prop) {\n\t          return prop.keys.length;\n\t        });\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    var propKey = function (d) {\n\t      return d.name;\n\t    };\n\t\n\t    var properties = bar.selectAll(\".line-item\").data(propVal, propKey);\n\t    var subGrp = properties.enter().append(\"g\").attr(\"class\", \"line-item\");\n\t\n\t    // Save subGrp in a variable for use in Errors.coffee\n\t    self.subGrp = subGrp;\n\t\n\t    properties.attr(\"transform\", function (d, i) {\n\t      var sub_height = (i + 1) * self.timeline.lineHeight;\n\t      return \"translate(0,\" + sub_height + \")\";\n\t    });\n\t\n\t    subGrp.append(\"rect\").attr(\"class\", \"click-handler click-handler--property\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"height\", self.timeline.lineHeight).on(\"dblclick\", function (d) {\n\t      var lineObject = this.parentNode.parentNode;\n\t      var lineValue = d3.select(lineObject).datum();\n\t      var def = d[\"default\"] ? d[\"default\"] : 0;\n\t      var mouse = d3.mouse(this);\n\t      var dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime() / 1000;\n\t      var prevKey = Utils.getPreviousKey(d.keys, dx);\n\t      // set the value to match the previous key if we found one\n\t      if (prevKey) {\n\t        def = prevKey.val;\n\t      }\n\t      d._line = lineValue;\n\t      var newKey = {\n\t        time: dx,\n\t        val: def,\n\t        _property: d\n\t      };\n\t      if (core.options.defaultEase) {\n\t        newKey.ease = core.options.defaultEase;\n\t      }\n\t\n\t      d.keys.push(newKey);\n\t      // Sort the keys for tweens creation\n\t      d.keys = Utils.sortKeys(d.keys);\n\t      lineValue._isDirty = true;\n\t\n\t      lineValue._isDirty = true;\n\t      var keyContainer = this.parentNode;\n\t      self.onKeyAdded.dispatch(newKey, keyContainer);\n\t    });\n\t\n\t    // Mask\n\t    subGrp.append(\"svg\").attr(\"class\", \"line-item__keys timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight).attr(\"fill\", \"#f00\");\n\t\n\t    subGrp.append(\"text\").attr(\"class\", \"line-label line-label--small\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 15).text(function (d) {\n\t      return d.name;\n\t    });\n\t\n\t    subGrp.append(\"line\").attr(\"class\", \"line-separator--secondary\").attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t    bar.selectAll(\".line-item\").attr(\"display\", function () {\n\t      var lineObject = this.parentNode;\n\t      var lineValue = d3.select(lineObject).datum();\n\t      if (!lineValue.collapsed) {\n\t        return \"block\";\n\t      } else {\n\t        return \"none\";\n\t      }\n\t    });\n\t\n\t    properties.exit().remove();\n\t\n\t    return properties;\n\t  };\n\t\n\t  return Properties;\n\t})();\n\t\n\texports[\"default\"] = Properties;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\tvar Signals = __webpack_require__(5);\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar _ = __webpack_require__(2);\n\t\n\tvar Keys = (function () {\n\t  var Keys = function Keys(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyUpdated = new Signals.Signal();\n\t  };\n\t\n\t  Keys.prototype.selectNewKey = function (data, container) {\n\t    var self = this;\n\t    var key = d3.select(container).selectAll(\".key\").filter(function (item) {\n\t      return item.time === data.time;\n\t    });\n\t    if (key.length) {\n\t      d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t      key.classed(\"key--selected\", true);\n\t      key = key[0][0];\n\t      data._dom = key;\n\t      self.timeline.selectionManager.select(data);\n\t    }\n\t  };\n\t\n\t  Keys.prototype.render = function (properties) {\n\t    var self = this;\n\t    var tweenTime = self.timeline.tweenTime;\n\t\n\t    var dragmove = function (d) {\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var propertyObject = this.parentNode;\n\t      var lineObject = propertyObject.parentNode.parentNode;\n\t      var propertyData = d3.select(propertyObject).datum();\n\t      var lineData = d3.select(lineObject).datum();\n\t      var key_data = d;\n\t\n\t      var currentDomainStart = self.timeline.x.domain()[0];\n\t      var mouse = d3.mouse(this);\n\t      var old_time = d.time;\n\t      var dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = dx / 1000 - currentDomainStart / 1000;\n\t      dx = d.time + dx;\n\t\n\t      var selection = self.timeline.selectionManager.getSelection();\n\t      var selection_first_time = false;\n\t      var selection_last_time = false;\n\t      if (selection.length) {\n\t        selection_first_time = selection[0].time;\n\t        selection_last_time = selection[selection.length - 1].time;\n\t      }\n\t\n\t      selection = _.filter(selection, function (item) {\n\t        return _.isEqual(item, key_data) === false;\n\t      });\n\t\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t\n\t      d.time = timeMatch;\n\t      // Sort the keys of the current selected item.\n\t      propertyData.keys = Utils.sortKeys(propertyData.keys);\n\t      var time_offset = d.time - old_time;\n\t\n\t      var updateKeyItem = function (item) {\n\t        var property = item._property;\n\t        property._line._isDirty = true;\n\t        property.keys = Utils.sortKeys(property.keys);\n\t      };\n\t\n\t      var key_scale = false;\n\t      var is_first = false;\n\t      if (selection.length) {\n\t        if (sourceEvent.altKey && (selection_first_time !== false) && (selection_last_time !== false)) {\n\t          is_first = selection_first_time === old_time;\n\t          if (is_first) {\n\t            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n\t          } else {\n\t            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n\t          }\n\t        }\n\t\n\t        for (var i = 0; i < selection.length; i++) {\n\t          var data = selection[i];\n\t          if (key_scale === false) {\n\t            data.time += time_offset;\n\t          } else {\n\t            if (is_first) {\n\t              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n\t            } else {\n\t              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n\t            }\n\t          }\n\t          updateKeyItem(data);\n\t        }\n\t      }\n\t\n\t      lineData._isDirty = true;\n\t      self.onKeyUpdated.dispatch();\n\t    };\n\t\n\t    var propValue = function (d) {\n\t      return d.keys;\n\t    };\n\t    var propKey = function (d) {\n\t      if (!d._id) {\n\t        d._id = Utils.guid();\n\t      }\n\t      return d._id;\n\t    };\n\t    var keys = properties.select(\".line-item__keys\").selectAll(\".key\").data(propValue, propKey);\n\t\n\t    // selectKey is triggered by dragstart event\n\t    var selectKey = function () {\n\t      var event = d3.event;\n\t      // with dragstart event the mousevent is is inside the event.sourcEvent\n\t      if (event.sourceEvent) {\n\t        event = event.sourceEvent;\n\t      }\n\t\n\t      var addToSelection = event.shiftKey;\n\t      // if element is already selectionned and we are on\n\t      // the dragstart event, we stop there since it is already selected.\n\t      if (d3.event.type && d3.event.type === \"dragstart\") {\n\t        if (d3.select(this).classed(\"key--selected\")) {\n\t          return;\n\t        }\n\t      }\n\t      var key_data = d3.select(this).datum();\n\t\n\t      // Also keep a reference to the key dom element.\n\t      key_data._dom = this;\n\t\n\t      self.timeline.selectionManager.select(key_data, addToSelection);\n\t    };\n\t\n\t    var dragend = function () {\n\t      self.timeline.editor.undoManager.addState();\n\t    };\n\t\n\t    var drag = d3.behavior.drag().origin(function (d) {\n\t      return d;\n\t    }).on(\"drag\", dragmove).on(\"dragstart\", selectKey).on(\"dragend\", dragend);\n\t\n\t    var key_grp = keys.enter().append(\"g\").attr(\"class\", \"key\")\n\t    // Use the unique id added in propKey above for the dom element id.\n\t    .attr(\"id\", function (d) {\n\t      return d._id;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    }).call(drag);\n\t\n\t    properties.selectAll(\".key\").attr(\"class\", function (d) {\n\t      var cls = \"key\";\n\t      // keep selected class\n\t      if (d3.select(this).classed(\"key--selected\")) {\n\t        cls += \" key--selected\";\n\t      }\n\t      if (d.ease) {\n\t        var ease = d.ease.split(\".\");\n\t        if (ease.length === 2) {\n\t          cls += \" \" + ease[1];\n\t        }\n\t      } else {\n\t        // If no easing specified, the it's the default Quad.easeOut\n\t        cls += \" easeOut\";\n\t      }\n\t      return cls;\n\t    });\n\t\n\t    var grp_linear = key_grp.append(\"g\").attr(\"class\", \"ease-linear\");\n\t    grp_linear.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L 6 0 L 0 6\");\n\t    grp_linear.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L -6 0 L 0 6\");\n\t\n\t    var grp_in = key_grp.append(\"g\").attr(\"class\", \"ease-in\");\n\t    grp_in.append(\"path\").attr(\"class\", \"key__shape-rect\").attr(\"d\", \"M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5\");\n\t    grp_in.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L -6 0 L 0 6\");\n\t\n\t    var grp_out = key_grp.append(\"g\").attr(\"class\", \"ease-out\");\n\t    grp_out.append(\"path\").attr(\"class\", \"key__shape-rect\").attr(\"d\", \"M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5\");\n\t    grp_out.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L 6 0 L 0 6\");\n\t\n\t    var grp_inout = key_grp.append(\"g\").attr(\"class\", \"ease-inout\");\n\t    grp_inout.append(\"circle\").attr(\"cx\", 0).attr(\"cy\", 0).attr(\"r\", 5);\n\t\n\t    keys.attr(\"transform\", function (d) {\n\t      var dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      var dy = 10;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t\n\t    keys.exit().remove();\n\t  };\n\t\n\t  return Keys;\n\t})();\n\t\n\texports[\"default\"] = Keys;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Errors = (function () {\n\t  var Errors = function Errors(timeline) {\n\t    this.timeline = timeline;\n\t  };\n\t\n\t  Errors.prototype.render = function (properties) {\n\t    var self = this;\n\t    var subGrp = self.timeline.properties.subGrp;\n\t    var propertiesWithError = function (d) {\n\t      return d.errors !== undefined;\n\t    };\n\t    // use insert with :first-child to prepend.\n\t    subGrp.insert(\"svg\", \":first-child\").attr(\"class\", \"line-item__errors\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    var errorsValue = function (d) {\n\t      return d.errors;\n\t    };\n\t    var errorTime = function (d) {\n\t      return d.time;\n\t    };\n\t\n\t    var errors = properties.filter(propertiesWithError).select(\".line-item__errors\").selectAll(\".error\").data(errorsValue, errorTime);\n\t\n\t    errors.enter().append(\"rect\").attr(\"class\", \"error\").attr(\"width\", 4).attr(\"height\", self.timeline.lineHeight - 1).attr(\"y\", \"1\");\n\t\n\t    properties.selectAll(\".error\").attr(\"x\", function (d) {\n\t      var dx;\n\t      dx = self.timeline.x(d.time * 1000);\n\t      return dx;\n\t    });\n\t\n\t    errors.exit().remove();\n\t  };\n\t\n\t  return Errors;\n\t})();\n\t\n\texports[\"default\"] = Errors;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Selection = (function () {\n\t  var Selection = function Selection(timeline, svg, margin) {\n\t    this.timeline = timeline;\n\t    this.svg = svg;\n\t    this.margin = margin;\n\t\n\t    this.onMouseUp = this.onMouseUp.bind(this);\n\t    this.init();\n\t  };\n\t\n\t  Selection.prototype.onMouseUp = function () {\n\t    this.svg.selectAll(\".selection\").remove();\n\t    // Enable again the default browser text selection.\n\t    $(\"body\").css({\n\t      \"user-select\": \"all\"\n\t    });\n\t  };\n\t\n\t  Selection.prototype.init = function () {\n\t    var self = this;\n\t    this.svg.on(\"mousedown\", function () {\n\t      var p = d3.mouse(this);\n\t      // Only init selection if we click on the timeline and not on the labels.\n\t      if (p[0] < self.timeline.margin.left) {\n\t        return;\n\t      }\n\t      self.svg.append(\"rect\").attr({\n\t        \"class\": \"selection\",\n\t        x: p[0],\n\t        y: p[1],\n\t        width: 0,\n\t        height: 0\n\t      });\n\t      // Unselect items.\n\t      self.timeline.selectionManager.reset();\n\t      // Prevent default browser text selection.\n\t      $(\"body\").css({\n\t        \"user-select\": \"none\"\n\t      });\n\t    }).on(\"mousemove\", function () {\n\t      var s = self.svg.select(\".selection\");\n\t      if (s.empty()) {\n\t        return;\n\t      }\n\t      var p = d3.mouse(this);\n\t      var d = {\n\t        x: parseInt(s.attr(\"x\"), 10),\n\t        y: parseInt(s.attr(\"y\"), 10),\n\t        width: parseInt(s.attr(\"width\"), 10),\n\t        height: parseInt(s.attr(\"height\"), 10)\n\t      };\n\t      // Apply margin to mouse selection.\n\t      p[0] = Math.max(self.margin.left, p[0]);\n\t\n\t      var move = {\n\t        x: p[0] - d.x,\n\t        y: p[1] - d.y\n\t      };\n\t      if (move.x < 1 || move.x * 2 < d.width) {\n\t        d.x = p[0];\n\t        d.width -= move.x;\n\t      } else {\n\t        d.width = move.x;\n\t      }\n\t\n\t      if (move.y < 1 || move.y * 2 < d.height) {\n\t        d.y = p[1];\n\t        d.height -= move.y;\n\t      } else {\n\t        d.height = move.y;\n\t      }\n\t\n\t      s.attr(d);\n\t\n\t      // remove margins from selection\n\t      d.x -= self.margin.left;\n\t      var key_width = 6;\n\t\n\t      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n\t      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n\t      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\t\n\t      // deselect all previously selected items\n\t      d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t      self.timeline.selectionManager.reset();\n\t      var selection = [];\n\t      d3.selectAll(\".key\").each(function (state_data) {\n\t        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n\t        var key_data = d3.select(this).datum();\n\t\n\t        // Also keep a reference to the key dom element.\n\t        key_data._dom = this;\n\t\n\t        if (item_data.collapsed !== true) {\n\t          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n\t          var y = itemBounding.top - containerBounding.top;\n\t          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n\t            // use or condition for top and bottom\n\t            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n\t              d3.select(this).classed(\"key--selected\", true);\n\t\n\t              selection.push(key_data);\n\t            }\n\t          }\n\t        }\n\t      });\n\t      self.timeline.selectionManager.select(selection);\n\t    });\n\t    // Attach the mouseup event to window so that it catch it event if\n\t    // mouseup happen outside of the browser window.\n\t    $(window).on(\"mouseup\", this.onMouseUp);\n\t  };\n\t\n\t  return Selection;\n\t})();\n\t\n\texports[\"default\"] = Selection;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(23);\n\t\n\tvar Signals = __webpack_require__(5);\n\tvar Property = __webpack_require__(24)[\"default\"];\n\t\n\t\n\tvar tpl_propertiesEditor = __webpack_require__(34);\n\t\n\tvar PropertiesEditor = (function () {\n\t  var PropertiesEditor = function PropertiesEditor(editor) {\n\t    this.editor = editor;\n\t\n\t    this.render = this.render.bind(this);\n\t    this.addProperty = this.addProperty.bind(this);\n\t    this.onSelect = this.onSelect.bind(this);\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t\n\t    this.timeline = this.editor.timeline;\n\t    this.timer = this.editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t\n\t    this.$el = $(tpl_propertiesEditor());\n\t    this.$container = this.$el.find(\".properties-editor__main\");\n\t    // todo: rename keyAdded to updated\n\t    this.keyAdded = new Signals.Signal();\n\t    this.keyRemoved = new Signals.Signal();\n\t    this.items = [];\n\t\n\t    // Close properties by default.\n\t    $(\"body\").addClass(\"properties-is-closed\");\n\t    // Add the properties editor to the document.\n\t    $(\"body\").append(this.$el);\n\t\n\t    this.selectionManager.onSelect.add(this.onSelect);\n\t\n\t    // Stop event propagation to no play by accident.\n\t    this.$el.keypress(function (e) {\n\t      return e.stopPropagation();\n\t    });\n\t  };\n\t\n\t  PropertiesEditor.prototype.onKeyAdded = function () {\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertiesEditor.prototype.onSelect = function (data) {\n\t    if (data === undefined) data = false;\n\t    this.items.forEach(function (item) {\n\t      item.remove();\n\t    });\n\t    this.items = [];\n\t    this.$container.empty();\n\t    if (data instanceof Array) {\n\t      for (var i = 0; i < data.length; i++) {\n\t        this.addProperty(data[i]);\n\t      }\n\t    } else {\n\t      this.addProperty(data);\n\t    }\n\t\n\t    // When selecting anything, automatically display the properties editor.\n\t    if (this.items.length) {\n\t      $(\"body\").removeClass(\"properties-is-closed\");\n\t    }\n\t  };\n\t\n\t  PropertiesEditor.prototype.addProperty = function (data) {\n\t    var prop = new Property(this.editor, this.$container, data);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    this.items.push(prop);\n\t  };\n\t\n\t  PropertiesEditor.prototype.render = function (time, time_changed) {\n\t    if (!time_changed) {\n\t      return;\n\t    }\n\t    this.items.forEach(function (prop) {\n\t      prop.update();\n\t    });\n\t  };\n\t\n\t  return PropertiesEditor;\n\t})();\n\t\n\texports[\"default\"] = PropertiesEditor;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Signals = __webpack_require__(5);\n\tvar PropertyNumber = __webpack_require__(25)[\"default\"];\n\tvar PropertyColor = __webpack_require__(29)[\"default\"];\n\tvar PropertyTween = __webpack_require__(32)[\"default\"];\n\tvar Property = (function () {\n\t  var Property = function Property(editor, $el, data) {\n\t    this.editor = editor;\n\t    this.$el = $el;\n\t\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t\n\t    this.timeline = editor.timeline;\n\t    this.timer = editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.items = [];\n\t    this.numberProp = false;\n\t    this.tweenProp = false;\n\t\n\t    var key_val = false;\n\t    var propertyObject = false;\n\t    var propertyData = false;\n\t    var lineObject = false;\n\t    var lineData = false;\n\t\n\t    // For keys the _property data should be defined.\n\t    if (data._property) {\n\t      propertyData = data._property;\n\t      lineData = propertyData._line;\n\t      key_val = data;\n\t    }\n\t\n\t    // Check if we selected a main item.\n\t    if (data.id) {\n\t      lineData = data;\n\t    }\n\t\n\t    // data and propertyData are defined on key select.\n\t    var property_name = false;\n\t    if (propertyData) {\n\t      property_name = propertyData.name;\n\t    }\n\t\n\t    // Get the property container.\n\t    var $container = this.getContainer(lineData);\n\t\n\t    var $tween_container = $container;\n\t\n\t    // Basic data, loop through properties.\n\t    for (var key in lineData.properties) {\n\t      var instance_prop = lineData.properties[key];\n\t      // show all properties or only 1 if we selected a key.\n\t      if (!property_name || instance_prop.name === property_name) {\n\t        var $grp_container = this.getGroupContainer(instance_prop, $container);\n\t        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n\t        this.items.push(numberProp);\n\t        if (instance_prop.name === property_name) {\n\t          $tween_container = $grp_container;\n\t        }\n\t\n\t        if (property_name) {\n\t          // Add tween select if we are editing a key, so only if there is property_name.\n\t          var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData);\n\t          this.items.push(tweenProp);\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  Property.prototype.onKeyAdded = function () {\n\t    // propagate the event.\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  Property.prototype.getGroupContainer = function (instance_prop, $container) {\n\t    var $existing, $grp, grp_class;\n\t    if (!instance_prop.group) {\n\t      grp_class = \"property-grp--general\";\n\t      $existing = $container.find(\".\" + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    } else {\n\t      // Replace all spaces to dash and make class lowercase\n\t      var group_name = instance_prop.group.replace(/\\s+/g, \"-\").toLowerCase();\n\t      grp_class = \"property-grp--\" + group_name;\n\t      $existing = $container.find(\".\" + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    }\n\t  };\n\t\n\t  Property.prototype.createGroupContainer = function (grp_class, label) {\n\t    if (label === undefined) label = false;\n\t    var $grp = $(\"<div class=\\\"property-grp \" + grp_class + \"\\\"></div>\");\n\t    if (label) {\n\t      $grp.append(\"<h3 class=\\\"property-grp__title\\\">\" + label + \"</h3>\");\n\t    }\n\t    return $grp;\n\t  };\n\t\n\t  Property.prototype.getContainer = function (lineData) {\n\t    var $container = false;\n\t    if (lineData.id) {\n\t      $container = $(\"#property--\" + lineData.id);\n\t      if (!$container.length) {\n\t        $container = $container = $(\"<div class=\\\"properties__wrapper\\\" id=\\\"property--\" + lineData.id + \"\\\"></div>\");\n\t        this.$el.append($container);\n\t        if (lineData.label) {\n\t          $container.append(\"<h2 class=\\\"properties-editor__title\\\">\" + lineData.label + \"</h2>\");\n\t        }\n\t      }\n\t    }\n\t    if ($container === false) {\n\t      $container = $(\"<div class=\\\"properties__wrapper\\\" id=\\\"no-item\\\"></div>\");\n\t      this.$el.append($container);\n\t    }\n\t    return $container;\n\t  };\n\t\n\t  Property.prototype.remove = function () {\n\t    this.items.forEach(function (item) {\n\t      item.remove();\n\t    });\n\t    if (this.keyAdded) {\n\t      this.keyAdded.dispose();\n\t    }\n\t\n\t    delete this.editor;\n\t    delete this.$el;\n\t\n\t    delete this.timeline;\n\t    delete this.timer;\n\t    delete this.selectionManager;\n\t    delete this.keyAdded;\n\t    delete this.items;\n\t    delete this.numberProp;\n\t    delete this.tweenProp;\n\t  };\n\t\n\t  Property.prototype.addNumberProperty = function (instance_prop, lineData, key_val, $container) {\n\t    var propClass = PropertyNumber;\n\t    if (instance_prop.type && instance_prop.type === \"color\") {\n\t      propClass = PropertyColor;\n\t    }\n\t    var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    $container.append(prop.$el);\n\t    return prop;\n\t  };\n\t\n\t  Property.prototype.addTweenProperty = function (instance_prop, lineData, key_val, $container, propertyData) {\n\t    var _this = this;\n\t    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n\t    $container.append(tween.$el);\n\t\n\t    // Add a remove key button\n\t    tween.$el.find(\"[data-action-remove]\").click(function (e) {\n\t      e.preventDefault();\n\t      var index = propertyData.keys.indexOf(key_val);\n\t      if (index > -1) {\n\t        propertyData.keys.splice(index, 1);\n\t        if (key_val._dom) {\n\t          _this.editor.propertiesEditor.keyRemoved.dispatch(key_val._dom);\n\t        }\n\t        lineData._isDirty = true;\n\t      }\n\t    });\n\t    return tween;\n\t  };\n\t\n\t  Property.prototype.update = function () {\n\t    for (var i = 0; i < this.items.length; i++) {\n\t      var item = this.items[i];\n\t      item.update();\n\t    }\n\t  };\n\t\n\t  return Property;\n\t})();\n\t\n\texports[\"default\"] = Property;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(23);\n\t\n\tvar PropertyBase = __webpack_require__(26)[\"default\"];\n\tvar DraggableNumber = __webpack_require__(27);\n\t\n\tvar tpl_property = __webpack_require__(28);\n\t\n\tvar PropertyNumber = (function (PropertyBase) {\n\t  var PropertyNumber =\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t  function PropertyNumber(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    PropertyBase.call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find(\"input\");\n\t  };\n\t\n\t  to5Runtime[\"extends\"](PropertyNumber, PropertyBase);\n\t\n\t  PropertyNumber.prototype.getInputVal = function () {\n\t    return parseFloat(this.$el.find(\"input\").val());\n\t  };\n\t\n\t  PropertyNumber.prototype.render = function () {\n\t    var _this = this;\n\t    PropertyBase.prototype.render.call(this);\n\t    // By default assign the property default value\n\t    var val = this.getCurrentVal();\n\t\n\t    var data = {\n\t      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t\n\t    var view = tpl_property(data);\n\t    this.$el = $(view);\n\t    this.$el.find(\".property__key\").click(this.onKeyClick);\n\t\n\t    var $input = this.$el.find(\"input\");\n\t\n\t    var onChangeEnd = function () {\n\t      _this.editor.undoManager.addState();\n\t    };\n\t\n\t    var draggableOptions = {\n\t      changeCallback: function () {\n\t        return _this.onInputChange();\n\t      },\n\t      endCallback: function () {\n\t        return onChangeEnd();\n\t      }\n\t    };\n\t    // Set min & max if they are defined.\n\t    if (\"min\" in this.instance_property) {\n\t      draggableOptions.min = this.instance_property.min;\n\t    }\n\t    if (\"max\" in this.instance_property) {\n\t      draggableOptions.max = this.instance_property.max;\n\t    }\n\t\n\t    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n\t    $input.data(\"draggable\", draggable);\n\t    $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyNumber.prototype.remove = function () {\n\t    PropertyBase.prototype.remove.call(this);\n\t    if (this.$input.data(\"draggable\")) {\n\t      this.$input.data(\"draggable\").destroy();\n\t    }\n\t\n\t    delete this.$input;\n\t    delete this.$el;\n\t  };\n\t\n\t  PropertyNumber.prototype.update = function () {\n\t    PropertyBase.prototype.update.call(this);\n\t    var val = this.getCurrentVal();\n\t    var draggable = this.$input.data(\"draggable\");\n\t\n\t    if (draggable) {\n\t      draggable.set(val.toFixed(3));\n\t    } else {\n\t      this.$input.val(val.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return PropertyNumber;\n\t})(PropertyBase);\n\t\n\texports[\"default\"] = PropertyNumber;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Signals = __webpack_require__(5);\n\tvar _ = __webpack_require__(2);\n\tvar Utils = __webpack_require__(3)[\"default\"];\n\tvar PropertyBase = (function () {\n\t  var PropertyBase =\n\t  // @instance_property: The current property on the data object.\n\t  // @lineData: The line data object.\n\t  function PropertyBase(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t\n\t    //this.update = this.update.bind(this);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.onKeyClick = this.onKeyClick.bind(this);\n\t\n\t    this.timer = editor.timer;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.render();\n\t\n\t    this.$key = this.$el.find(\".property__key\");\n\t  };\n\t\n\t  PropertyBase.prototype.onKeyClick = function (e) {\n\t    e.preventDefault();\n\t    var currentValue = this.getCurrentVal();\n\t    this.addKey(currentValue);\n\t  };\n\t\n\t  PropertyBase.prototype.getInputVal = function () {\n\t    return this.$el.find(\"input\").val();\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentVal = function () {\n\t    var val = this.instance_property.val;\n\t    var prop_name = this.instance_property.name;\n\t\n\t    // if we selected a key simply return it's value\n\t    if (this.key_val) {\n\t      return this.key_val.val;\n\t    }\n\t    if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n\t      return this.lineData.values[prop_name];\n\t    }\n\t    return val;\n\t  };\n\t\n\t  PropertyBase.prototype.onInputChange = function () {\n\t    var current_value = this.getInputVal();\n\t    var currentTime = this.timer.getCurrentTime() / 1000;\n\t\n\t    // if we selected a key simply get the time from it.\n\t    if (this.key_val) {\n\t      currentTime = this.key_val.time;\n\t    }\n\t\n\t    if (this.instance_property.keys && this.instance_property.keys.length) {\n\t      // Add a new key if there is no other key at same time\n\t      var current_key = _.find(this.instance_property.keys, function (key) {\n\t        return key.time == currentTime;\n\t      });\n\t\n\t      if (current_key) {\n\t        // if there is a key update it\n\t        current_key.val = current_value;\n\t      } else {\n\t        // add a new key\n\t        this.addKey(current_value);\n\t      }\n\t    } else {\n\t      // There is no keys, simply update the property value (for data saving)\n\t      this.instance_property.val = current_value;\n\t      // Also directly set the lineData value.\n\t      this.lineData.values[this.instance_property.name] = current_value;\n\t      // Simply update the custom object with new values.\n\t      if (this.lineData.object) {\n\t        currentTime = this.timer.getCurrentTime() / 1000;\n\t        // Set the property on the instance object.\n\t        this.lineData.object.update(currentTime - this.lineData.start);\n\t      }\n\t    }\n\t\n\t    // Something changed, make the lineData dirty to rebuild things. d\n\t    this.lineData._isDirty = true;\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentKey = function () {\n\t    var time = this.timer.getCurrentTime() / 1000;\n\t    if (!this.instance_property || !this.instance_property.keys) {\n\t      return false;\n\t    }\n\t    if (this.instance_property.keys.length === 0) {\n\t      return false;\n\t    }\n\t    for (var i = 0; i < this.instance_property.keys.length; i++) {\n\t      var key = this.instance_property.keys[i];\n\t      if (key.time === time) {\n\t        return key;\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  PropertyBase.prototype.addKey = function (val) {\n\t    var core = this.editor.tweenTime;\n\t    var currentTime = this.timer.getCurrentTime() / 1000;\n\t    var key = {\n\t      time: currentTime,\n\t      val: val\n\t    };\n\t    if (core.options.defaultEase) {\n\t      key.ease = core.options.defaultEase;\n\t    }\n\t    this.instance_property.keys.push(key);\n\t    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n\t    this.lineData._isDirty = true;\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertyBase.prototype.render = function () {\n\t    // current values are defined in @lineData.values\n\t    this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n\t  };\n\t\n\t  PropertyBase.prototype.update = function () {\n\t    var key = this.getCurrentKey();\n\t    this.$key.toggleClass(\"property__key--active\", key);\n\t  };\n\t\n\t  PropertyBase.prototype.remove = function () {\n\t    if (this.keyAdded) {\n\t      this.keyAdded.dispose();\n\t    }\n\t    delete this.instance_property;\n\t    delete this.lineData;\n\t    delete this.editor;\n\t    delete this.key_val;\n\t\n\t    delete this.timer;\n\t    delete this.keyAdded;\n\t    delete this.$key;\n\t  };\n\t\n\t  return PropertyBase;\n\t})();\n\t\n\texports[\"default\"] = PropertyBase;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(9);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(23);\n\t\n\t__webpack_require__(30);\n\tvar PropertyBase = __webpack_require__(26)[\"default\"];\n\t\n\t\n\tvar tpl_property = __webpack_require__(31);\n\t\n\tvar PropertyColor = (function (PropertyBase) {\n\t  var PropertyColor = function PropertyColor(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    PropertyBase.call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find(\"input\");\n\t  };\n\t\n\t  to5Runtime[\"extends\"](PropertyColor, PropertyBase);\n\t\n\t  PropertyColor.prototype.render = function () {\n\t    var _this = this;\n\t    PropertyBase.prototype.render.call(this);\n\t    // By default assign the property default value\n\t    var val = this.getCurrentVal();\n\t\n\t    var data = {\n\t      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t\n\t    var view = tpl_property(data);\n\t    this.$el = $(view);\n\t    this.$el.find(\".property__key\").click(this.onKeyClick);\n\t\n\t    var $input = this.$el.find(\"input\");\n\t\n\t    $input.spectrum({\n\t      allowEmpty: false,\n\t      showAlpha: true,\n\t      clickoutFiresChange: false,\n\t      preferredFormat: \"rgb\",\n\t      change: function () {\n\t        _this.editor.undoManager.addState();\n\t      },\n\t      move: function (color) {\n\t        if (color._a == 1) {\n\t          $input.val(color.toHexString());\n\t        } else {\n\t          $input.val(color.toRgbString());\n\t        }\n\t\n\t        _this.onInputChange();\n\t      }\n\t    });\n\t\n\t    $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyColor.prototype.remove = function () {\n\t    PropertyBase.prototype.remove.call(this);\n\t    this.$el.find(\"input\").spectrum(\"destroy\");\n\t    delete this.$el;\n\t    delete this.$input;\n\t  };\n\t\n\t  PropertyColor.prototype.update = function () {\n\t    PropertyBase.prototype.update.call(this);\n\t    var val = this.getCurrentVal();\n\t    this.$input.val(val);\n\t    this.$input.spectrum(\"set\", val);\n\t  };\n\t\n\t  return PropertyColor;\n\t})(PropertyBase);\n\t\n\texports[\"default\"] = PropertyColor;\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_30__;\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(9);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(23);\n\t\n\tvar tpl_property = __webpack_require__(33);\n\t\n\tvar PropertyTween = (function () {\n\t  var PropertyTween =\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t  function PropertyTween(instance_property, lineData, editor, key_val, timeline) {\n\t    if (key_val === undefined) key_val = false;\n\t    if (timeline === undefined) timeline = false;\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t    this.timeline = timeline;\n\t\n\t    this.onChange = this.onChange.bind(this);\n\t\n\t    this.timer = this.editor.timer;\n\t    this.$time = false;\n\t    this.$el = false;\n\t    this.render();\n\t  };\n\t\n\t  PropertyTween.prototype.remove = function () {\n\t    delete this.$el;\n\t    delete this.instance_property;\n\t    delete this.lineData;\n\t    delete this.editor;\n\t    delete this.key_val;\n\t    delete this.timeline;\n\t\n\t    delete this.timer;\n\t    delete this.$time;\n\t  };\n\t\n\t  PropertyTween.prototype.render = function () {\n\t    var _this = this;\n\t    var self = this;\n\t    if (!this.key_val.ease) {\n\t      this.key_val.ease = \"Quad.easeOut\";\n\t    }\n\t    var data = {\n\t      id: this.instance_property.name + \"_tween\",\n\t      val: this.key_val.ease,\n\t      time: this.key_val.time.toFixed(3),\n\t      options: [\"Linear.easeNone\"],\n\t      selected: function () {\n\t        if (this.toString() === self.key_val.ease) {\n\t          return \"selected\";\n\t        } else {\n\t          return \"\";\n\t        }\n\t      }\n\t    };\n\t\n\t    var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n\t    for (var i = 0; i < tweens.length; i++) {\n\t      var tween = tweens[i];\n\t      data.options.push(tween + \".easeOut\");\n\t      data.options.push(tween + \".easeIn\");\n\t      data.options.push(tween + \".easeInOut\");\n\t    }\n\t\n\t    this.$el = $(tpl_property(data));\n\t    this.$time = this.$el.find(\".property__key-time strong\");\n\t    this.$time.keypress(function (e) {\n\t      if (e.charCode == 13) {\n\t        // Enter\n\t        e.preventDefault();\n\t        _this.$time.blur();\n\t        _this.updateKeyTime(_this.$time.text());\n\t      }\n\t    });\n\t\n\t    this.$time.on(\"click\", function () {\n\t      return document.execCommand(\"selectAll\", false, null);\n\t    });\n\t    this.$el.find(\"select\").change(this.onChange);\n\t  };\n\t\n\t  PropertyTween.prototype.updateKeyTime = function (time) {\n\t    time = parseFloat(time);\n\t    if (isNaN(time)) {\n\t      time = this.key_val.time;\n\t    }\n\t    this.$time.text(time);\n\t    this.key_val.time = time;\n\t    this.onChange();\n\t  };\n\t\n\t  PropertyTween.prototype.onChange = function () {\n\t    var ease = this.$el.find(\"select\").val();\n\t    this.key_val.ease = ease;\n\t    this.editor.undoManager.addState();\n\t    this.lineData._isDirty = true;\n\t    this.timeline._isDirty = true;\n\t  };\n\t\n\t  PropertyTween.prototype.update = function () {\n\t    // todo: use mustache instead...\n\t    this.$time.html(this.key_val.time.toFixed(3));\n\t  };\n\t\n\t  return PropertyTween;\n\t})();\n\t\n\texports[\"default\"] = PropertyTween;\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(9);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(9);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar saveAs = __webpack_require__(36);\n\t\n\tvar EditorMenu = (function () {\n\t  var EditorMenu = function EditorMenu(tweenTime, $timeline, editor) {\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.editor = editor;\n\t    this.timer = this.tweenTime.timer;\n\t    this.initExport();\n\t    this.initToggle();\n\t  };\n\t\n\t  EditorMenu.prototype.initToggle = function () {\n\t    var timelineClosed = false;\n\t    var $toggleLink = this.$timeline.find(\"[data-action=\\\"toggle\\\"]\");\n\t    $toggleLink.click(function (e) {\n\t      e.preventDefault();\n\t      timelineClosed = !timelineClosed;\n\t      $toggleLink.toggleClass(\"menu-item--toggle-up\", timelineClosed);\n\t      $(\"body\").toggleClass(\"timeline-is-closed\", timelineClosed);\n\t      return window.dispatchEvent(new Event(\"resize\"));\n\t    });\n\t    var $toggleLinkSide = $(\".properties-editor\").find(\"[data-action=\\\"toggle\\\"]\");\n\t    $toggleLinkSide.click(function (e) {\n\t      var propertiesClosed;\n\t      e.preventDefault();\n\t      propertiesClosed = !$(\"body\").hasClass(\"properties-is-closed\");\n\t      $(\"body\").toggleClass(\"properties-is-closed\", propertiesClosed);\n\t      return window.dispatchEvent(new Event(\"resize\"));\n\t    });\n\t  };\n\t\n\t  EditorMenu.prototype.initExport = function () {\n\t    var exporter = this.editor.exporter;\n\t    this.$timeline.find(\"[data-action=\\\"export\\\"]\").click(function (e) {\n\t      e.preventDefault();\n\t      var data = exporter.getJSON();\n\t      var blob = new Blob([data], {\n\t        type: \"text/json;charset=utf-8\"\n\t      });\n\t      saveAs(blob, \"data.json\");\n\t    });\n\t  };\n\t\n\t  return EditorMenu;\n\t})();\n\t\n\texports[\"default\"] = EditorMenu;\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {/* FileSaver.js\n\t * A saveAs() FileSaver implementation.\n\t * 2014-08-29\n\t *\n\t * By Eli Grey, http://eligrey.com\n\t * License: X11/MIT\n\t *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n\t */\n\t\n\t/*global self */\n\t/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\t\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\t\n\tvar saveAs = saveAs\n\t  // IE 10+ (native saveAs)\n\t  || (typeof navigator !== \"undefined\" &&\n\t      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n\t  // Everyone else\n\t  || (function(view) {\n\t\t\"use strict\";\n\t\t// IE <10 is explicitly unsupported\n\t\tif (typeof navigator !== \"undefined\" &&\n\t\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\t\treturn;\n\t\t}\n\t\tvar\n\t\t\t  doc = view.document\n\t\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t\t, get_URL = function() {\n\t\t\t\treturn view.URL || view.webkitURL || view;\n\t\t\t}\n\t\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t\t, can_use_save_link = \"download\" in save_link\n\t\t\t, click = function(node) {\n\t\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\t\tevent.initMouseEvent(\n\t\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t\t, false, false, false, false, 0, null\n\t\t\t\t);\n\t\t\t\tnode.dispatchEvent(event);\n\t\t\t}\n\t\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t\t, throw_outside = function(ex) {\n\t\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\t\tthrow ex;\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t\t, fs_min_size = 0\n\t\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t\t// the reasoning behind the timeout and revocation flow\n\t\t\t, arbitrary_revoke_timeout = 10\n\t\t\t, revoke = function(file) {\n\t\t\t\tvar revoker = function() {\n\t\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t\t} else { // file is a File\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (view.chrome) {\n\t\t\t\t\trevoker();\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t\t}\n\t\t\t}\n\t\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\t\tevent_types = [].concat(event_types);\n\t\t\t\tvar i = event_types.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t, FileSaver = function(blob, name) {\n\t\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\t\tvar\n\t\t\t\t\t  filesaver = this\n\t\t\t\t\t, type = blob.type\n\t\t\t\t\t, blob_changed = false\n\t\t\t\t\t, object_url\n\t\t\t\t\t, target_view\n\t\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t\t}\n\t\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t\t, fs_error = function() {\n\t\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\trevoke(object_url);\n\t\t\t\t\t}\n\t\t\t\t\t, abortable = function(func) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t\t, slice\n\t\t\t\t;\n\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\tif (!name) {\n\t\t\t\t\tname = \"download\";\n\t\t\t\t}\n\t\t\t\tif (can_use_save_link) {\n\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\t\tblob_changed = true;\n\t\t\t\t}\n\t\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\t\tname += \".download\";\n\t\t\t\t}\n\t\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\t\ttarget_view = view;\n\t\t\t\t}\n\t\t\t\tif (!req_fs) {\n\t\t\t\t\tfs_error();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfs_min_size += blob.size;\n\t\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}), fs_error);\n\t\t\t\t}), fs_error);\n\t\t\t}\n\t\t\t, FS_proto = FileSaver.prototype\n\t\t\t, saveAs = function(blob, name) {\n\t\t\t\treturn new FileSaver(blob, name);\n\t\t\t}\n\t\t;\n\t\tFS_proto.abort = function() {\n\t\t\tvar filesaver = this;\n\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\tdispatch(filesaver, \"abort\");\n\t\t};\n\t\tFS_proto.readyState = FS_proto.INIT = 0;\n\t\tFS_proto.WRITING = 1;\n\t\tFS_proto.DONE = 2;\n\t\n\t\tFS_proto.error =\n\t\tFS_proto.onwritestart =\n\t\tFS_proto.onprogress =\n\t\tFS_proto.onwrite =\n\t\tFS_proto.onabort =\n\t\tFS_proto.onerror =\n\t\tFS_proto.onwriteend =\n\t\t\tnull;\n\t\n\t\treturn saveAs;\n\t}(\n\t\t   typeof self !== \"undefined\" && self\n\t\t|| typeof window !== \"undefined\" && window\n\t\t|| this.content\n\t));\n\t// `self` is undefined in Firefox for Android content script context\n\t// while `this` is nsIContentFrameMessageManager\n\t// with an attribute `content` that corresponds to the window\n\t\n\tif (typeof module !== \"undefined\" && module !== null) {\n\t  module.exports = saveAs;\n\t} else if ((\"function\" !== \"undefined\" && __webpack_require__(38) !== null) && (__webpack_require__(39) != null)) {\n\t  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t    return saveAs;\n\t  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(37)(module)))\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar EditorControls = (function () {\n\t  var EditorControls = function EditorControls(tweenTime, $timeline) {\n\t    var _this = this;\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.timer = this.tweenTime.timer;\n\t    this.$time = this.$timeline.find(\".control--time\");\n\t    this.$time_end = this.$timeline.find(\".control--time-end\");\n\t    this.initControls();\n\t    this.$time_end.val(this.tweenTime.timer.getDuration());\n\t\n\t    $(document).keypress(function (e) {\n\t      if (e.charCode == 32) {\n\t        // Space\n\t        _this.playPause();\n\t      }\n\t    });\n\t  };\n\t\n\t  EditorControls.prototype.playPause = function () {\n\t    var $play_pause;\n\t    this.timer.toggle();\n\t    $play_pause = this.$timeline.find(\".control--play-pause\");\n\t    $play_pause.toggleClass(\"icon-pause\", this.timer.is_playing);\n\t    $play_pause.toggleClass(\"icon-play\", !this.timer.is_playing);\n\t  };\n\t\n\t  EditorControls.prototype.initControls = function () {\n\t    var _this2 = this;\n\t    var $play_pause = this.$timeline.find(\".control--play-pause\");\n\t    $play_pause.click(function (e) {\n\t      e.preventDefault();\n\t      _this2.playPause();\n\t    });\n\t    var $bt_first = this.$timeline.find(\".control--first\");\n\t    $bt_first.click(function (e) {\n\t      e.preventDefault();\n\t      _this2.timer.seek([0]);\n\t    });\n\t    var $bt_last = this.$timeline.find(\".control--last\");\n\t    $bt_last.click(function (e) {\n\t      e.preventDefault();\n\t      var total = _this2.tweenTime.getTotalDuration();\n\t      _this2.timer.seek([total * 1000]);\n\t    });\n\t    this.$time.change(function () {\n\t      var seconds = parseFloat(_this2.$time.val(), 10) * 1000;\n\t      _this2.timer.seek([seconds]);\n\t    });\n\t    this.$time_end.change(function () {\n\t      var seconds = parseFloat(_this2.$time_end.val(), 10);\n\t      _this2.timer.setDuration(seconds);\n\t    });\n\t  };\n\t\n\t  EditorControls.prototype.render = function (time, time_changed) {\n\t    if (time_changed) {\n\t      var seconds = time / 1000;\n\t      this.$time.val(seconds.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return EditorControls;\n\t})();\n\t\n\texports[\"default\"] = EditorControls;\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(13);\n\tvar Signals = __webpack_require__(5);\n\tvar _ = __webpack_require__(2);\n\t\n\tvar SelectionManager = (function () {\n\t  var SelectionManager = function SelectionManager(tweenTime) {\n\t    this.tweenTime = tweenTime;\n\t    this.selection = [];\n\t    this.onSelect = new Signals.Signal();\n\t  };\n\t\n\t  SelectionManager.prototype.select = function (item, addToSelection) {\n\t    if (addToSelection === undefined) addToSelection = false;\n\t    this.addDataRelations();\n\t\n\t    if (!addToSelection) {\n\t      this.selection = [];\n\t    }\n\t    if (item instanceof Array) {\n\t      for (var i = 0; i < item.length; i++) {\n\t        var el = item[i];\n\t        this.selection.push(el);\n\t      }\n\t    } else {\n\t      this.selection.push(item);\n\t    }\n\t\n\t    this.removeDuplicates();\n\t    this.highlightItems();\n\t    this.sortSelection();\n\t    this.onSelect.dispatch(this.selection, addToSelection);\n\t  };\n\t\n\t  SelectionManager.prototype.getSelection = function () {\n\t    return this.selection;\n\t  };\n\t\n\t  SelectionManager.prototype.removeDuplicates = function () {\n\t    var result = [];\n\t    for (var i = 0; i < this.selection.length; i++) {\n\t      var item = this.selection[i];\n\t      var found = false;\n\t      for (var j = 0; j < result.length; j++) {\n\t        var item2 = result[j];\n\t        if (_.isEqual(item, item2)) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t      if (found === false) {\n\t        result.push(item);\n\t      }\n\t    }\n\t    this.selection = result;\n\t  };\n\t\n\t  SelectionManager.prototype.removeItem = function (item) {\n\t    var index = this.selection.indexOf(item);\n\t    if (index > -1) {\n\t      this.selection.splice(index, 1);\n\t    }\n\t  };\n\t\n\t  SelectionManager.prototype.sortSelection = function () {\n\t    var compare = function (a, b) {\n\t      if (!a.time || !b.time) {\n\t        return 0;\n\t      }\n\t      if (a.time < b.time) {\n\t        return -1;\n\t      }\n\t      if (a.time > b.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    this.selection = this.selection.sort(compare);\n\t  };\n\t\n\t  SelectionManager.prototype.reset = function () {\n\t    this.selection = [];\n\t    this.highlightItems();\n\t    this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.triggerSelect = function () {\n\t    this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.addDataRelations = function () {\n\t    // We need to add some parent references in main data object.\n\t    // Add a _property reference to each keys.\n\t    // Add a _line property for each references.\n\t    var data = this.tweenTime.data;\n\t    for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n\t      var line = data[lineIndex];\n\t      for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n\t        var property = line.properties[propIndex];\n\t        property._line = line;\n\t        for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n\t          var key = property.keys[keyIndex];\n\t          key._property = property;\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  SelectionManager.prototype.highlightItems = function () {\n\t    d3.selectAll(\".bar--selected\").classed(\"bar--selected\", false);\n\t    d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t\n\t    for (var i = 0; i < this.selection.length; i++) {\n\t      var data = this.selection[i];\n\t      if (data._dom) {\n\t        var d3item = d3.select(data._dom);\n\t        if (d3item.classed(\"bar\")) {\n\t          d3item.classed(\"bar--selected\", true);\n\t        } else if (d3item.classed(\"key\")) {\n\t          d3item.classed(\"key--selected\", true);\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  return SelectionManager;\n\t})();\n\t\n\texports[\"default\"] = SelectionManager;\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Exporter = (function () {\n\t  var Exporter = function Exporter(editor) {\n\t    this.editor = editor;\n\t  };\n\t\n\t  Exporter.prototype.getData = function () {\n\t    var tweenTime = this.editor.tweenTime;\n\t    var domain = this.editor.timeline.x.domain();\n\t    var domain_start = domain[0];\n\t    var domain_end = domain[1];\n\t    return {\n\t      settings: {\n\t        time: tweenTime.timer.getCurrentTime(),\n\t        duration: tweenTime.timer.getDuration(),\n\t        domain: [domain_start.getTime(), domain_end.getTime()]\n\t      },\n\t      data: tweenTime.data\n\t    };\n\t  };\n\t\n\t  Exporter.prototype.getJSON = function () {\n\t    var options = this.editor.options;\n\t    var json_replacer = function (key, val) {\n\t      // Disable all private properies from TweenMax/TimelineMax\n\t      if (key.indexOf(\"_\") === 0) {\n\t        return undefined;\n\t      }\n\t      if (options.json_replacer !== undefined) {\n\t        return options.json_replacer(key, val);\n\t      }\n\t      return val;\n\t    };\n\t\n\t    var data = this.getData();\n\t    return JSON.stringify(data, json_replacer, 2);\n\t  };\n\t\n\t  return Exporter;\n\t})();\n\t\n\texports[\"default\"] = Exporter;\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(23);\n\t\n\tvar UndoManager = (function () {\n\t  var UndoManager = function UndoManager(editor) {\n\t    var _this = this;\n\t    this.editor = editor;\n\t    this.history_max = 100;\n\t    this.history = [];\n\t    this.current_index = 0;\n\t\n\t    // Add the initial state\n\t    this.addState();\n\t\n\t    $(document).keydown(function (e) {\n\t      if (e.keyCode == 90) {\n\t        if (e.metaKey || e.ctrlKey) {\n\t          if (!e.shiftKey) {\n\t            // (command | ctrl) Z\n\t            _this.undo();\n\t          } else {\n\t            // (command | ctrl) shift Z\n\t            _this.redo();\n\t          }\n\t        }\n\t      }\n\t    });\n\t  };\n\t\n\t  UndoManager.prototype.undo = function () {\n\t    // If there is no more history return\n\t    if (this.current_index <= 0) {\n\t      return false;\n\t    }\n\t    this.current_index -= 1;\n\t    this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.redo = function () {\n\t    // Stop if there is no more things.\n\t    if (this.current_index >= this.history.length - 1) {\n\t      return false;\n\t    }\n\t    this.current_index += 1;\n\t    this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.addState = function () {\n\t    var data = JSON.parse(this.editor.exporter.getJSON());\n\t\n\t    // if we did some undo before and then edit something,\n\t    // we want to remove all actions past the current index first.\n\t    if (this.current_index + 1 < this.history.length) {\n\t      this.history.splice(this.current_index + 1, this.history.length - 1);\n\t    }\n\t\n\t    this.history.push(data);\n\t\n\t    // Keep history to a max size by removing the first element if needed.\n\t    if (this.history.length > this.history_max) {\n\t      this.history.shift();\n\t    }\n\t\n\t    // Set the current index\n\t    this.current_index = this.history.length - 1;\n\t  };\n\t\n\t  UndoManager.prototype.setState = function (index) {\n\t    var state = this.history[index];\n\t    var data = state.data;\n\t    var tweenTime = this.editor.tweenTime;\n\t\n\t    // naively copy keys and values from previous state\n\t    for (var item_key = 0; item_key < data.length; item_key++) {\n\t      var item = data[item_key];\n\t      // if item is not defined copy it\n\t      if (!tweenTime.data[item_key]) {\n\t        tweenTime.data[item_key] = item;\n\t      } else {\n\t        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n\t          var prop = item.properties[prop_key];\n\t          // if property is not defined copy it\n\t          if (!tweenTime.data[item_key].properties[prop_key]) {\n\t            tweenTime.data[item_key].properties[prop_key] = prop;\n\t          } else {\n\t            // set property keys\n\t            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n\t            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n\t              var key = prop.keys[key_key];\n\t              if (!keys[key_key]) {\n\t                keys[key_key] = key;\n\t              } else {\n\t                keys[key_key].time = key.time;\n\t                keys[key_key].val = key.val;\n\t                keys[key_key].ease = key.ease;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      tweenTime.data[item_key]._isDirty = true;\n\t    }\n\t    this.editor.render(false, true);\n\t  };\n\t\n\t  return UndoManager;\n\t})();\n\t\n\texports[\"default\"] = UndoManager;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** TweenTime.Editor.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d79a5728f8a705847f13\n **/","var tpl_timeline = require('./templates/timeline.tpl.html');\nimport Timeline from './graph/Timeline';\nimport PropertiesEditor from './editor/PropertiesEditor';\nimport EditorMenu from './editor/EditorMenu';\nimport EditorControls from './editor/EditorControls';\nimport SelectionManager from './editor/SelectionManager';\nimport Exporter from './editor/Exporter';\nimport UndoManager from './editor/UndoManager';\nlet Signals = require('js-signals');\n\nclass Editor {\n  constructor(tweenTime, options = {}) {\n    this.tweenTime = tweenTime;\n    this.options = options;\n    this.timer = this.tweenTime.timer;\n    this.lastTime = -1;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\n    this.$timeline = $(tpl_timeline());\n    $('body').append(this.$timeline);\n    $('body').addClass('has-editor');\n\n    this.selectionManager = new SelectionManager(this.tweenTime);\n    this.exporter = new Exporter(this);\n    this.timeline = new Timeline(this, options);\n\n    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\n    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n    if (this.options.onMenuCreated !== undefined) {\n      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'), this);\n    }\n\n    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n    this.undoManager = new UndoManager(this);\n\n    // Public events.\n    this.onSelect = new Signals.Signal();\n    var self = this;\n    this.selectionManager.onSelect.add(function(selection, addToSelection) {\n      // Propagate the event.\n      self.onSelect.dispatch(selection, addToSelection);\n    });\n\n    // Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true;\n    window.dispatchEvent(new Event('resize'));\n    window.requestAnimationFrame(() => this.update());\n  }\n\n  select(item, addToSelection = false) {\n    this.selectionManager.select(item, addToSelection);\n  }\n\n  getSelection() {\n    return this.selectionManager.getSelection();\n  }\n\n  onKeyAdded() {\n    this.undoManager.addState();\n    this.render(false, false, true);\n  }\n\n  onKeyRemoved(item) {\n    this.selectionManager.removeItem(item);\n    this.undoManager.addState();\n    if (this.selectionManager.selection.length) {\n      this.selectionManager.triggerSelect();\n    }\n    this.render(false, false, true);\n  }\n\n  render(time = false, time_changed = false, force = false) {\n    if (time === false) {\n      time = this.timer.time[0];\n    }\n    if (force) {\n      this.timeline._isDirty = true;\n    }\n    this.timeline.render(time, time_changed);\n    this.controls.render(time, time_changed);\n    this.propertiesEditor.render(time, time_changed);\n  }\n\n  update() {\n    var time = this.timer.time[0];\n    var time_changed = this.lastTime === time ? false : true;\n\n    this.render(time, time_changed);\n    this.lastTime = this.timer.time[0];\n    window.requestAnimationFrame(() => this.update());\n  }\n}\n\nmodule.exports = Editor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 2\n ** module chunks = 0 1\n **/","export default class Utils {\n  static formatMinutes(d) {\n    // convert milliseconds to seconds\n    d = d / 1000;\n    var hours = Math.floor(d / 3600);\n    var minutes = Math.floor((d - (hours * 3600)) / 60);\n    var seconds = d - (minutes * 60);\n    var output = seconds + \"s\";\n    if (minutes) {\n      output = minutes + \"m \" + output;\n    }\n    if (hours) {\n      output = hours + \"h \" + output;\n    }\n    return output;\n  }\n\n  static getClosestTime(data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) {\n    if (timer) {\n      var timer_time = timer.getCurrentTime() / 1000;\n      if (Math.abs(timer_time - time) <= tolerance) {\n        return timer_time;\n      }\n    }\n\n    if (objectId || property_name) {\n      for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        // Don't match item with itself, but allow property to match item start/end.\n        if (item.id != objectId || property_name) {\n          // First check start & end.\n          if (Math.abs(item.start - time) <= tolerance) {\n            return item.start;\n          }\n\n          if (Math.abs(item.end - time) <= tolerance) {\n            return item.end;\n          }\n        }\n\n        // Test properties keys\n        for (var j = 0; j < item.properties.length; j++) {\n          var prop = item.properties[j];\n\n          // Don't match property with itself.\n          if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n            for (var k = 0; k < prop.keys.length; k++) {\n              var key = prop.keys[k];\n              if (Math.abs(key.time - time) <= tolerance) {\n                return key.time;\n              }\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  static getPreviousKey(keys, time) {\n    var prevKey = false;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (key.time < time) {\n        prevKey = key;\n      }\n      else {\n        return prevKey;\n      }\n    }\n    return prevKey;\n  }\n\n  static sortKeys(keys) {\n    var compare = function (a, b) {\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    return keys.sort(compare);\n  }\n\n  static guid() {\n    var s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}\n ** module id = 5\n ** module chunks = 0 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/timeline.tpl.html\n ** module id = 8\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/hogan.js\n ** module id = 9\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/compiler.js\n ** module id = 10\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/template.js\n ** module id = 11\n ** module chunks = 1\n **/","let d3 = require('d3');\n\nimport Utils from '../core/Utils';\nimport Header from './Header';\nimport TimeIndicator from './TimeIndicator';\nimport Items from './Items';\nimport KeysPreview from './KeysPreview';\nimport Properties from './Properties';\nimport Keys from './Keys';\nimport Errors from './Errors';\nimport Selection from './Selection';\n\nexport default class Timeline {\n  constructor(editor, options) {\n    this.editor = editor;\n    this.tweenTime = this.editor.tweenTime;\n    this.timer = this.tweenTime.timer;\n    this.selectionManager = this.editor.selectionManager;\n\n    this._isDirty = true;\n    this.timer = this.tweenTime.timer;\n    this.currentTime = this.timer.time; // used in timeindicator.\n\n    this.onUpdate = this.onUpdate.bind(this);\n\n    // Make the domain cover 20% of the totalDuation by default.\n    this.initialDomain = [];\n    this.initialDomain[0] = options.domainStart || 0;\n    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\n    // Adapt time to be greater or equal to domainStart.\n    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n      this.timer.time[0] = this.initialDomain[0];\n    }\n\n    var margin = {top: 6, right: 20, bottom: 0, left: 265};\n    this.margin = margin;\n\n    var width = window.innerWidth - margin.left - margin.right;\n    var height = 270 - margin.top - margin.bottom - 40;\n    this.lineHeight = 20;\n    this.label_position_x = -margin.left + 20;\n\n    this.x = d3.time.scale()\n      .domain(this.initialDomain)\n      .range([0, width]);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select('.timeline__main').append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", 600);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    this.svgContainerTime = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\n    this.linesContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\");\n\n    this.header = new Header(this.timer, this.initialDomain, this.tweenTime, width, margin);\n    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\n    this.selection = new Selection(this, this.svg, margin);\n\n    this.items = new Items(this, this.linesContainer);\n    this.items.onUpdate.add(this.onUpdate);\n    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\n    this.properties = new Properties(this);\n    this.properties.onKeyAdded.add((newKey, keyContainer) => {\n      this._isDirty = true;\n      // render the timeline directly so that we can directly select\n      // the new key with it's domElement.\n      this.render(0, false);\n      this.keys.selectNewKey(newKey, keyContainer);\n    });\n    this.errors = new Errors(this);\n    this.keys = new Keys(this);\n    this.keys.onKeyUpdated.add(() => {\n      this.onUpdate();\n    });\n\n    this.xAxisGrid = d3.svg.axis()\n      .scale(this.x)\n      .ticks(100)\n      .tickSize(-this.items.dy, 0)\n      .tickFormat(\"\")\n      .orient(\"top\");\n\n    this.xGrid = this.svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxisGrid);\n\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxis);\n\n    this.header.onBrush.add((extent) => {\n      this.x.domain(extent);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this._isDirty = true;\n    });\n\n    // First render\n    window.requestAnimationFrame(() => {this.render();});\n\n    window.onresize = () => {\n      var INNER_WIDTH = window.innerWidth;\n      var width = INNER_WIDTH - margin.left - margin.right;\n      this.svg.attr(\"width\", width + margin.left + margin.right);\n      this.svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH);\n      this.x.range([0, width]);\n\n      this._isDirty = true;\n      this.header.resize(INNER_WIDTH);\n      this.render();\n    };\n  }\n\n  onUpdate() {\n    this.editor.render(false, false, true);\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var domainLength;\n      // Update current domain when playing to keep time indicator in view.\n      var margin_ms = 16;\n      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] += domainLength - margin_ms;\n        this.initialDomain[1] += domainLength - margin_ms;\n        this.header.setDomain(this.initialDomain);\n      }\n      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] = this.timer.getCurrentTime();\n        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n        this.header.setDomain(this.initialDomain);\n      }\n    }\n\n    if (this._isDirty || time_changed) {\n      // Render header and time indicator everytime the time changed.\n      this.header.render();\n      this.timeIndicator.render();\n    }\n\n    if (this._isDirty) {\n      // No need to call this on each frames, but only on brush, key drag, ...\n      var bar = this.items.render();\n      this.keysPreview.render(bar);\n      var properties = this.properties.render(bar);\n      this.errors.render(properties);\n      this.keys.render(properties);\n      this._isDirty = false;\n\n      // Adapt the timeline height.\n      var height = Math.max(this.items.dy + 30, 230);\n      this.xAxis.tickSize(-height, 0);\n      this.xAxisGrid.tickSize(-height, 0);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this.svg.attr(\"height\", height);\n      this.timeIndicator.updateHeight(height);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 13\n ** module chunks = 1\n **/","let d3 = require('d3');\n\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Header {\n  constructor(timer, initialDomain, tweenTime, width, margin) {\n    this.timer = timer;\n    this.initialDomain = initialDomain;\n    this.tweenTime = tweenTime;\n\n    this.onBrush = new Signals.Signal();\n    this.margin = {top: 10, right: 20, bottom: 0, left: margin.left};\n    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\n    this.currentTime = this.timer.time;\n    this.x = d3.time.scale().range([0, width]);\n    this.x.domain([0, this.timer.totalDuration]);\n\n    // Same as this.x from timeline\n    this.xDisplayed = d3.time.scale().range([0, width]);\n    this.xDisplayed.domain(this.initialDomain);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select('.timeline__header').append(\"svg\")\n      .attr(\"width\", width + this.margin.left + this.margin.right)\n      .attr(\"height\", 56);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.createBrushHandle();\n    this.createTimeHandle();\n    this.timer.durationChanged.add(this.onDurationChanged);\n  }\n\n  adaptDomainToDuration(domain, seconds) {\n    var ms = seconds * 1000;\n    var new_domain = [domain[0], domain[1]];\n    // Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms);\n    new_domain[1] = Math.min(new_domain[1], ms);\n    // Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0);\n\n    return new_domain;\n  }\n\n  setDomain() {\n    this.brush.x(this.x).extent(this.initialDomain);\n    this.svgContainer.select('.brush').call(this.brush);\n    // Same as onBrush\n    this.onBrush.dispatch(this.initialDomain);\n    this.render();\n    this.xDisplayed.domain(this.initialDomain);\n  }\n\n  onDurationChanged(seconds) {\n    this.x.domain([0, this.timer.totalDuration]);\n    this.xAxisElement.call(this.xAxis);\n    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n    this.setDomain(this.initialDomain);\n  }\n\n  createBrushHandle() {\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\")\n      .call(this.xAxis);\n\n    var onBrush = () => {\n      var extent0 = this.brush.extent();\n      // Get domain as milliseconds and not date.\n      var start = extent0[0].getTime();\n      var end = extent0[1].getTime();\n      // Set the initial domain.\n      this.initialDomain[0] = start;\n      this.initialDomain[1] = end;\n      this.setDomain(this.initialDomain);\n    };\n\n    this.brush = d3.svg.brush()\n      .x(this.x)\n      .extent(this.initialDomain)\n      .on(\"brush\", onBrush);\n\n    this.gBrush = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(this.brush)\n      .selectAll(\"rect\")\n      .attr('height', 20);\n  }\n\n  render() {\n    var timeSelection = this.svgContainer.selectAll('.time-indicator');\n    timeSelection.attr('transform', 'translate(' + (this.xDisplayed(this.currentTime[0])) + ', 25)');\n  }\n\n  createTimeHandle() {\n    var self = this;\n\n    var dragTimeMove = function() {\n      var event = d3.event.sourceEvent;\n      event.stopPropagation();\n      var tweenTime = self.tweenTime;\n      var event_x = event.x !== undefined ? event.x : event.clientX;\n      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n      dx = dx.getTime();\n      dx = Math.max(0, dx);\n\n      var timeMatch = false;\n      if (event.shiftKey) {\n        var time = dx / 1000;\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant', false, false, 0.3);\n        if (timeMatch !== false) {\n          timeMatch = timeMatch * 1000;\n        }\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n      self.timer.seek([timeMatch]);\n    };\n\n    var dragTime = d3.behavior.drag()\n      .origin(function(d) {\n        return d;\n      })\n      .on(\"drag\", dragTimeMove);\n\n    var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\n    timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', function() {\n        var mouse = d3.mouse(this);\n        var dx = self.xDisplayed.invert(mouse[0]);\n        dx = dx.getTime();\n        dx = Math.max(0, dx);\n        self.timer.seek([dx]);\n      });\n\n    var timeGrp = timeSelection.enter().append(\"g\")\n      .attr('class', \"time-indicator\")\n      .attr(\"transform\", \"translate(-0.5,\" + 30 + \")\")\n      .call(dragTime);\n\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\n    // Mask time indicator\n    // todo: remove the mask.\n    this.svgContainer.append(\"rect\")\n      .attr(\"class\", \"graph-mask\")\n      .attr(\"x\", -self.margin.left)\n      .attr(\"y\", -self.margin.top)\n      .attr(\"width\", self.margin.left - 5)\n      .attr(\"height\", self.height);\n  }\n\n  resize(width) {\n    width = width - this.margin.left - this.margin.right;\n    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\n    this.x.range([0, width]);\n    this.xDisplayed.range([0, width]);\n    this.xAxisElement.call(this.xAxis);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.js\n **/","export default class TimeIndicator {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n    this.timeGrp = this.timeSelection.enter().append(\"svg\")\n      .attr('class', \"time-indicator timeline__right-mask\")\n      .attr('width', window.innerWidth - this.timeline.label_position_x)\n      .attr('height', 442);\n\n    this.timeSelection = this.timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', 0)\n      .attr('y', -this.timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    this.timeSelection = this.container.selectAll('.time-indicator rect');\n  }\n\n  updateHeight(height) {\n    this.timeGrp.attr(\"height\", height);\n    this.timeSelection.attr(\"height\", height + this.timeline.margin.top + 5);\n  }\n\n  render() {\n    this.timeSelection.attr('transform', \"translate(\" + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + \",0)\");\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class Items {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.dy = 10 + this.timeline.margin.top;\n    this.onUpdate = new Signals.Signal();\n  }\n\n  render() {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var selectBar = function() {\n      var data = d3.select(this).datum();\n      self.timeline.selectionManager.select(data);\n    };\n\n    var dragmove = function(d) {\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var diff = (dx - d.start);\n      d.start += diff;\n      d.end += diff;\n      if (d.properties) {\n        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n          var prop = d.properties[prop_key];\n          for (var i = 0; i < prop.keys.length; i++) {\n            var key = prop.keys[i];\n            key.time += diff;\n          }\n        }\n      }\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveLeft = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.start;\n        timeMatch = d.start + diff;\n      }\n      d.start = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveRight = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.end;\n        timeMatch = d.end + diff;\n      }\n      d.end = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragLeft = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveLeft);\n\n    var dragRight = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveRight);\n\n    var drag = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmove);\n\n    var bar_border = 1;\n    var bar = this.container.selectAll(\".line-grp\")\n      .data(this.timeline.tweenTime.data, (d) => {return d.id;});\n\n    var barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp');\n\n    var barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar\")\n      // Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', () => {return Utils.guid();})\n      .attr(\"y\", 3)\n      .attr(\"height\", 14);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--left\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragLeft);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--right\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragRight);\n\n    self.dy = 10 + this.timeline.margin.top;\n    bar.attr(\"transform\", function(d) {\n      var y = self.dy;\n      self.dy += self.timeline.lineHeight;\n      if (!d.collapsed) {\n        var numProperties = 0;\n        if (d.properties) {\n          var visibleProperties = _.filter(d.properties, function(prop) {\n            return prop.keys.length;\n          });\n          numProperties = visibleProperties.length;\n        }\n        self.dy += numProperties * self.timeline.lineHeight;\n      }\n      return \"translate(0,\" + y + \")\";\n    });\n\n    var barWithStartAndEnd = function(d) {\n      if ((d.start !== undefined) && (d.end !== undefined)) {\n        return true;\n      }\n      return false;\n    };\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.end * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) + bar_border;})\n      .attr(\"width\", function(d) {\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n      })\n      .call(drag)\n      .on(\"click\", selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line-label\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 16)\n      .text((d) => {return d.label;})\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line__toggle\")\n      .attr(\"x\", self.timeline.label_position_x - 10)\n      .attr(\"y\", 16)\n      .on('click', function(d) {\n        d.collapsed = !d.collapsed;\n        self.onUpdate.dispatch();\n      });\n\n    bar.selectAll(\".line__toggle\").text(function(d) {\n      if (d.collapsed) {\n        return \"\";\n      } else {\n        return \"\";\n      }\n    });\n\n    barEnter.append(\"line\")\n      .attr(\"class\", 'line-separator')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.exit().remove();\n\n    return bar;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.js\n **/","let d3 = require('d3');\n\nexport default class KeysPreview {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\n    properties.enter()\n      .append('svg')\n      .attr(\"class\", 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var setItemStyle = function() {\n      var item = d3.select(this.parentNode.parentNode);\n      var bar_data = item.datum();\n      if (bar_data.collapsed === true) {\n        return \"\";\n      }\n      // Show only when item is collapsed\n      return \"display: none;\";\n    };\n\n    properties.selectAll('.key--preview')\n      .attr(\"style\", setItemStyle);\n\n    var keyValue = function(d) {\n      return d.keys;\n    };\n    var keyKey = function(d) {\n      return d.time;\n    };\n    var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\n    keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr(\"style\", setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\n    keys.attr('transform', function(d) {\n        var dx = self.timeline.x(d.time * 1000);\n        dx = parseInt(dx, 10);\n        var dy = 11;\n        return \"translate(\" + dx + \",\" + dy + \")\";\n      });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Properties {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyAdded = new Signals.Signal();\n    this.subGrp = false;\n  }\n\n  render(bar) {\n    var self = this;\n    var editor = this.timeline.editor;\n    var core = editor.tweenTime;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties.filter((prop) => {return prop.keys.length;});\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.line-item').data(propVal, propKey);\n    var subGrp = properties.enter()\n      .append('g')\n      .attr(\"class\", 'line-item');\n\n    // Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp;\n\n    properties.attr (\"transform\", function(d, i) {\n        var sub_height = (i + 1) * self.timeline.lineHeight;\n        return \"translate(0,\" + sub_height + \")\";\n      });\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on('dblclick', function(d) {\n        var lineObject = this.parentNode.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        var def = d[\"default\"] ? d[\"default\"] : 0;\n        var mouse = d3.mouse(this);\n        var dx = self.timeline.x.invert(mouse[0]);\n        dx = dx.getTime() / 1000;\n        var prevKey = Utils.getPreviousKey(d.keys, dx);\n        // set the value to match the previous key if we found one\n        if (prevKey) {\n          def = prevKey.val;\n        }\n        d._line = lineValue;\n        var newKey = {\n          time: dx,\n          val: def,\n          _property: d\n        };\n        if (core.options.defaultEase) {\n          newKey.ease = core.options.defaultEase;\n        }\n\n        d.keys.push(newKey);\n        // Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys);\n        lineValue._isDirty = true;\n\n        lineValue._isDirty = true;\n        var keyContainer = this.parentNode;\n        self.onKeyAdded.dispatch(newKey, keyContainer);\n      });\n\n    // Mask\n    subGrp.append('svg')\n      .attr('class','line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00');\n\n    subGrp.append('text')\n      .attr(\"class\", \"line-label line-label--small\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 15)\n      .text(function(d) {\n        return d.name;\n      });\n\n    subGrp.append(\"line\")\n      .attr(\"class\", 'line-separator--secondary')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.selectAll('.line-item').attr('display', function() {\n        var lineObject = this.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        if (!lineValue.collapsed) {\n          return \"block\";\n        } else {\n          return \"none\";\n        }\n      });\n\n    properties.exit().remove();\n\n    return properties;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\nlet _ = require('lodash');\n\nexport default class Keys {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyUpdated = new Signals.Signal();\n  }\n\n  selectNewKey(data, container) {\n    var self = this;\n    var key = d3.select(container).selectAll('.key').filter(function(item) {\n      return item.time === data.time;\n    });\n    if (key.length) {\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      key.classed('key--selected', true);\n      key = key[0][0];\n      data._dom = key;\n      self.timeline.selectionManager.select(data);\n    }\n  }\n\n  render(properties) {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var dragmove = function(d) {\n      var sourceEvent = d3.event.sourceEvent;\n      var propertyObject = this.parentNode;\n      var lineObject = propertyObject.parentNode.parentNode;\n      var propertyData = d3.select(propertyObject).datum();\n      var lineData = d3.select(lineObject).datum();\n      var key_data = d;\n\n      var currentDomainStart = self.timeline.x.domain()[0];\n      var mouse = d3.mouse(this);\n      var old_time = d.time;\n      var dx = self.timeline.x.invert(mouse[0]);\n      dx = dx.getTime();\n      dx = dx / 1000 - currentDomainStart / 1000;\n      dx = d.time + dx;\n\n      var selection = self.timeline.selectionManager.getSelection();\n      var selection_first_time = false;\n      var selection_last_time = false;\n      if (selection.length) {\n        selection_first_time = selection[0].time;\n        selection_last_time = selection[selection.length - 1].time;\n      }\n\n      selection = _.filter(selection, (item) => {return _.isEqual(item, key_data) === false;});\n\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n\n      d.time = timeMatch;\n      // Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys);\n      var time_offset = d.time - old_time;\n\n      var updateKeyItem = function(item) {\n        var property = item._property;\n        property._line._isDirty = true;\n        property.keys = Utils.sortKeys(property.keys);\n      };\n\n      var key_scale = false;\n      var is_first = false;\n      if (selection.length) {\n        if (sourceEvent.altKey && (selection_first_time !== false) && (selection_last_time !== false)) {\n          is_first = selection_first_time === old_time;\n          if (is_first) {\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n          } else {\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n          }\n        }\n\n        for (var i = 0; i < selection.length; i++) {\n          var data = selection[i];\n          if (key_scale === false) {\n            data.time += time_offset;\n          } else {\n            if (is_first) {\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n            } else {\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n            }\n          }\n          updateKeyItem(data);\n        }\n      }\n\n      lineData._isDirty = true;\n      self.onKeyUpdated.dispatch();\n    };\n\n    var propValue = function(d) {\n      return d.keys;\n    };\n    var propKey = function(d) {\n      if (!d._id) {\n        d._id = Utils.guid();\n      }\n      return d._id;\n    };\n    var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\n    // selectKey is triggered by dragstart event\n    var selectKey = function() {\n      var event = d3.event;\n      // with dragstart event the mousevent is is inside the event.sourcEvent\n      if (event.sourceEvent) {\n        event = event.sourceEvent;\n      }\n\n      var addToSelection = event.shiftKey;\n      // if element is already selectionned and we are on\n      // the dragstart event, we stop there since it is already selected.\n      if (d3.event.type && d3.event.type === \"dragstart\") {\n        if (d3.select(this).classed('key--selected')) {\n          return;\n        }\n      }\n      var key_data = d3.select(this).datum();\n\n      // Also keep a reference to the key dom element.\n      key_data._dom = this;\n\n      self.timeline.selectionManager.select(key_data, addToSelection);\n    };\n\n    var dragend = function() {\n      self.timeline.editor.undoManager.addState();\n    };\n\n    var drag = d3.behavior.drag()\n      .origin((d) => {return d;})\n      .on(\"drag\", dragmove)\n      .on(\"dragstart\", selectKey)\n      .on(\"dragend\", dragend);\n\n    var key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      // Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) => {return d._id;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n      .call(drag);\n\n    properties.selectAll('.key')\n      .attr('class', function(d) {\n        var cls = 'key';\n        // keep selected class\n        if (d3.select(this).classed('key--selected')) {\n          cls += \" key--selected\";\n        }\n        if (d.ease) {\n          var ease = d.ease.split('.');\n          if (ease.length === 2) {\n            cls += \" \" + ease[1];\n          }\n        } else {\n          // If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut';\n        }\n        return cls;\n      });\n\n    var grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_in = key_grp.append('g')\n      .attr('class', 'ease-in');\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_out = key_grp.append('g')\n      .attr('class', 'ease-out');\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n\n    var grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout');\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5);\n\n    keys.attr('transform', function(d) {\n      var dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      var dy = 10;\n      return \"translate(\" + dx + \",\" + dy + \")\";\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.js\n **/","export default class Errors {\n  constructor(timeline) {\n    this.timeline = timeline;\n  }\n\n  render(properties) {\n    var self = this;\n    var subGrp = self.timeline.properties.subGrp;\n    var propertiesWithError = function(d) {\n      return d.errors !== undefined;\n    };\n    // use insert with :first-child to prepend.\n    subGrp.insert('svg', ':first-child')\n      .attr('class','line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var errorsValue = function(d) {\n      return d.errors;\n    };\n    var errorTime = function(d) {\n      return d.time;\n    };\n\n    var errors = properties.filter(propertiesWithError)\n      .select('.line-item__errors').selectAll('.error')\n      .data(errorsValue, errorTime);\n\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1');\n\n    properties.selectAll('.error').attr('x', function(d) {\n      var dx;\n      dx = self.timeline.x(d.time * 1000);\n      return dx;\n    });\n\n    errors.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.js\n **/","export default class Selection {\n  constructor(timeline, svg, margin) {\n    this.timeline = timeline;\n    this.svg = svg;\n    this.margin = margin;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n\n  onMouseUp() {\n    this.svg.selectAll('.selection').remove();\n    // Enable again the default browser text selection.\n    $('body').css({\n      'user-select': 'all'\n    });\n  }\n\n  init() {\n    var self = this;\n    this.svg.on(\"mousedown\", function() {\n      var p = d3.mouse(this);\n      // Only init selection if we click on the timeline and not on the labels.\n      if (p[0] < self.timeline.margin.left) {\n        return;\n      }\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        });\n      // Unselect items.\n      self.timeline.selectionManager.reset();\n      // Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      });\n    }).on(\"mousemove\", function() {\n      var s = self.svg.select('.selection');\n      if (s.empty()) {\n        return;\n      }\n      var p = d3.mouse(this);\n      var d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      };\n      // Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0]);\n\n      var move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      };\n      if (move.x < 1 || move.x * 2 < d.width) {\n        d.x = p[0];\n        d.width -= move.x;\n      } else {\n        d.width = move.x;\n      }\n\n      if (move.y < 1 || move.y * 2 < d.height) {\n        d.y = p[1];\n        d.height -= move.y;\n      } else {\n        d.height = move.y;\n      }\n\n      s.attr(d);\n\n      // remove margins from selection\n      d.x -= self.margin.left;\n      var key_width = 6;\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\n      // deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      self.timeline.selectionManager.reset();\n      var selection = [];\n      d3.selectAll('.key').each( function(state_data) {\n        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n        var key_data = d3.select(this).datum();\n\n        // Also keep a reference to the key dom element.\n        key_data._dom = this;\n\n        if (item_data.collapsed !== true) {\n          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n          var y = itemBounding.top - containerBounding.top;\n          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n            // use or condition for top and bottom\n            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n              d3.select(this).classed('key--selected', true);\n\n              selection.push(key_data);\n            }\n          }\n        }\n      });\n      self.timeline.selectionManager.select(selection);\n    });\n    // Attach the mouseup event to window so that it catch it event if\n    // mouseup happen outside of the browser window.\n    $(window).on(\"mouseup\", this.onMouseUp);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.js\n **/","import 'jquery';\nlet Signals = require('js-signals');\nimport Property from '../editor/Property';\n\nlet tpl_propertiesEditor = require('./../templates/propertiesEditor.tpl.html');\n\nexport default class PropertiesEditor {\n  constructor(editor) {\n    this.editor = editor;\n\n    this.render = this.render.bind(this);\n    this.addProperty = this.addProperty.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = this.editor.timeline;\n    this.timer = this.editor.timer;\n    this.selectionManager = editor.selectionManager;\n\n    this.$el = $(tpl_propertiesEditor());\n    this.$container = this.$el.find('.properties-editor__main');\n    // todo: rename keyAdded to updated\n    this.keyAdded = new Signals.Signal();\n    this.keyRemoved = new Signals.Signal();\n    this.items = [];\n\n    // Close properties by default.\n    $('body').addClass('properties-is-closed');\n    // Add the properties editor to the document.\n    $('body').append(this.$el);\n\n    this.selectionManager.onSelect.add(this.onSelect);\n\n    // Stop event propagation to no play by accident.\n    this.$el.keypress(function(e) {\n      return e.stopPropagation();\n    });\n  }\n\n  onKeyAdded() {\n    this.keyAdded.dispatch();\n  }\n\n  onSelect(data = false) {\n    this.items.forEach((item) => {item.remove();});\n    this.items = [];\n    this.$container.empty();\n    if (data instanceof Array) {\n      for (var i = 0; i < data.length; i++) {\n        this.addProperty(data[i]);\n      }\n    } else {\n      this.addProperty(data);\n    }\n\n    // When selecting anything, automatically display the properties editor.\n    if (this.items.length) {\n      $('body').removeClass('properties-is-closed');\n    }\n  }\n\n  addProperty(data) {\n    var prop = new Property(this.editor, this.$container, data);\n    prop.keyAdded.add(this.onKeyAdded);\n    this.items.push(prop);\n  }\n\n  render(time, time_changed) {\n    if (!time_changed) {\n      return;\n    }\n    this.items.forEach((prop) => {prop.update();});\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 23\n ** module chunks = 1\n **/","let Signals = require('js-signals');\nimport PropertyNumber from './PropertyNumber';\nimport PropertyColor from './PropertyColor';\nimport PropertyTween from './PropertyTween';\n\nexport default class Property {\n  constructor(editor, $el, data) {\n    this.editor = editor;\n    this.$el = $el;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = editor.timeline;\n    this.timer = editor.timer;\n    this.selectionManager = editor.selectionManager;\n    this.keyAdded = new Signals.Signal();\n    this.items = [];\n    this.numberProp = false;\n    this.tweenProp = false;\n\n    var key_val = false;\n    var propertyObject = false;\n    var propertyData = false;\n    var lineObject = false;\n    var lineData = false;\n\n    // For keys the _property data should be defined.\n    if (data._property) {\n      propertyData = data._property;\n      lineData = propertyData._line;\n      key_val = data;\n    }\n\n    // Check if we selected a main item.\n    if (data.id) {\n      lineData = data;\n    }\n\n    // data and propertyData are defined on key select.\n    var property_name = false;\n    if (propertyData) {\n      property_name = propertyData.name;\n    }\n\n    // Get the property container.\n    var $container = this.getContainer(lineData);\n\n    var $tween_container = $container;\n\n    // Basic data, loop through properties.\n    for (var key in lineData.properties) {\n      var instance_prop = lineData.properties[key];\n      // show all properties or only 1 if we selected a key.\n      if (!property_name || instance_prop.name === property_name) {\n        var $grp_container = this.getGroupContainer(instance_prop, $container);\n        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n        this.items.push(numberProp);\n        if (instance_prop.name === property_name) {\n          $tween_container = $grp_container;\n        }\n\n        if (property_name) {\n          // Add tween select if we are editing a key, so only if there is property_name.\n          var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData);\n          this.items.push(tweenProp);\n        }\n      }\n    }\n  }\n\n  onKeyAdded() {\n    // propagate the event.\n    this.keyAdded.dispatch();\n  }\n\n  getGroupContainer(instance_prop, $container) {\n    var $existing, $grp, grp_class;\n    if (!instance_prop.group) {\n      grp_class = 'property-grp--general';\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class);\n        $container.append($grp);\n        return $grp;\n      }\n    } else {\n      // Replace all spaces to dash and make class lowercase\n      var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n      grp_class = 'property-grp--' + group_name;\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n        $container.append($grp);\n        return $grp;\n      }\n    }\n  }\n\n  createGroupContainer(grp_class, label = false) {\n    var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n    if (label) {\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n    }\n    return $grp;\n  }\n\n  getContainer(lineData) {\n    var $container = false;\n    if (lineData.id) {\n      $container = $('#property--' + lineData.id);\n      if (!$container.length) {\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n        this.$el.append($container);\n        if (lineData.label) {\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n        }\n      }\n    }\n    if ($container === false) {\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n      this.$el.append($container);\n    }\n    return $container;\n  }\n\n  remove() {\n    this.items.forEach((item) => {item.remove();});\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n\n    delete this.editor;\n    delete this.$el;\n\n    delete this.timeline;\n    delete this.timer;\n    delete this.selectionManager;\n    delete this.keyAdded;\n    delete this.items;\n    delete this.numberProp;\n    delete this.tweenProp;\n  }\n\n  addNumberProperty(instance_prop, lineData, key_val, $container) {\n    var propClass = PropertyNumber;\n    if (instance_prop.type && instance_prop.type === 'color') {\n      propClass = PropertyColor;\n    }\n    var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n    prop.keyAdded.add(this.onKeyAdded);\n    $container.append(prop.$el);\n    return prop;\n  }\n\n  addTweenProperty(instance_prop, lineData, key_val, $container, propertyData) {\n    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(tween.$el);\n\n    // Add a remove key button\n    tween.$el.find('[data-action-remove]').click((e) => {\n      e.preventDefault();\n      var index = propertyData.keys.indexOf(key_val);\n      if (index > -1) {\n        propertyData.keys.splice(index, 1);\n        if (key_val._dom) {\n          this.editor.propertiesEditor.keyRemoved.dispatch(key_val._dom);\n        }\n        lineData._isDirty = true;\n      }\n    });\n    return tween;\n  }\n\n  update() {\n    for (var i = 0; i < this.items.length; i++){\n      var item = this.items[i];\n      item.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.js\n **/","import 'jquery';\nimport PropertyBase from './PropertyBase';\nlet DraggableNumber = require('draggable-number.js');\n\nlet tpl_property = require('../templates/propertyNumber.tpl.html');\n\nexport default class PropertyNumber extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  getInputVal() {\n    return parseFloat(this.$el.find('input').val());\n  }\n\n  render() {\n    super();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    var onChangeEnd = () => {\n      this.editor.undoManager.addState();\n    };\n\n    var draggableOptions = {\n      changeCallback: () => this.onInputChange(),\n      endCallback: () => onChangeEnd()\n    };\n    // Set min & max if they are defined.\n    if ('min' in this.instance_property) {\n      draggableOptions.min = this.instance_property.min;\n    }\n    if ('max' in this.instance_property) {\n      draggableOptions.max = this.instance_property.max;\n    }\n\n    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n    $input.data('draggable', draggable);\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super();\n    if (this.$input.data('draggable')) {\n      this.$input.data('draggable').destroy();\n    }\n\n    delete this.$input;\n    delete this.$el;\n  }\n\n  update() {\n    super();\n    var val = this.getCurrentVal();\n    var draggable = this.$input.data('draggable');\n\n    if (draggable) {\n      draggable.set(val.toFixed(3));\n    }\n    else {\n      this.$input.val(val.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.js\n **/","let Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class PropertyBase {\n  // @instance_property: The current property on the data object.\n  // @lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n\n    //this.update = this.update.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onKeyClick = this.onKeyClick.bind(this);\n\n    this.timer = editor.timer;\n    this.keyAdded = new Signals.Signal();\n    this.render();\n\n    this.$key = this.$el.find('.property__key');\n  }\n\n  onKeyClick(e) {\n    e.preventDefault();\n    var currentValue = this.getCurrentVal();\n    this.addKey(currentValue);\n  }\n\n  getInputVal() {\n    return this.$el.find('input').val();\n  }\n\n  getCurrentVal() {\n    var val = this.instance_property.val;\n    var prop_name = this.instance_property.name;\n\n    // if we selected a key simply return it's value\n    if (this.key_val) {\n      return this.key_val.val;\n    }\n    if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n      return this.lineData.values[prop_name];\n    }\n    return val;\n  }\n\n  onInputChange() {\n    var current_value = this.getInputVal();\n    var currentTime = this.timer.getCurrentTime() / 1000;\n\n    // if we selected a key simply get the time from it.\n    if (this.key_val) {\n      currentTime = this.key_val.time;\n    }\n\n    if (this.instance_property.keys && this.instance_property.keys.length) {\n      // Add a new key if there is no other key at same time\n      var current_key = _.find(this.instance_property.keys, (key) => key.time == currentTime);\n\n      if (current_key) {\n        // if there is a key update it\n        current_key.val = current_value;\n      }\n      else {\n        // add a new key\n        this.addKey(current_value);\n      }\n    }\n    else {\n      // There is no keys, simply update the property value (for data saving)\n      this.instance_property.val = current_value;\n      // Also directly set the lineData value.\n      this.lineData.values[this.instance_property.name] = current_value;\n      // Simply update the custom object with new values.\n      if (this.lineData.object) {\n        currentTime = this.timer.getCurrentTime() / 1000;\n        // Set the property on the instance object.\n        this.lineData.object.update(currentTime - this.lineData.start);\n      }\n    }\n\n    // Something changed, make the lineData dirty to rebuild things. d\n    this.lineData._isDirty = true;\n  }\n\n  getCurrentKey() {\n    var time = this.timer.getCurrentTime() / 1000;\n    if (!this.instance_property || !this.instance_property.keys) {\n      return false;\n    }\n    if (this.instance_property.keys.length === 0) {\n      return false;\n    }\n    for (var i = 0; i < this.instance_property.keys.length; i++) {\n      var key = this.instance_property.keys[i];\n      if (key.time === time) {\n        return key;\n      }\n    }\n    return false;\n  }\n\n  addKey(val) {\n    var core = this.editor.tweenTime;\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    var key = {\n      time: currentTime,\n      val: val\n    };\n    if (core.options.defaultEase) {\n      key.ease = core.options.defaultEase;\n    }\n    this.instance_property.keys.push(key);\n    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n    this.lineData._isDirty = true;\n    this.keyAdded.dispatch();\n  }\n\n  render() {\n    // current values are defined in @lineData.values\n    this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n  }\n\n  update() {\n    var key = this.getCurrentKey();\n    this.$key.toggleClass('property__key--active', key);\n  }\n\n  remove() {\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n\n    delete this.timer;\n    delete this.keyAdded;\n    delete this.$key;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}\n ** module id = 27\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyNumber.tpl.html\n ** module id = 28\n ** module chunks = 1\n **/","import 'jquery';\nrequire('spectrum');\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyColor.tpl.html');\n\nexport default class PropertyColor extends PropertyBase {\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: \"rgb\",\n      change: () => {\n        this.editor.undoManager.addState();\n      },\n      move: (color) => {\n        if (color._a == 1) {\n          $input.val(color.toHexString());\n        }\n        else {\n          $input.val(color.toRgbString());\n        }\n\n        this.onInputChange();\n      }\n    });\n\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super();\n    this.$el.find('input').spectrum('destroy');\n    delete this.$el;\n    delete this.$input;\n  }\n\n  update() {\n    super();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n    this.$input.spectrum('set', val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_30__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"spectrum\"\n ** module id = 30\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyColor.tpl.html\n ** module id = 31\n ** module chunks = 1\n **/","import 'jquery';\n\nlet tpl_property = require('../templates/propertyTween.tpl.html');\n\nexport default class PropertyTween {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.onChange = this.onChange.bind(this);\n\n    this.timer = this.editor.timer;\n    this.$time = false;\n    this.$el = false;\n    this.render();\n  }\n\n  remove() {\n    delete this.$el;\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n    delete this.timeline;\n\n    delete this.timer;\n    delete this.$time;\n  }\n\n  render() {\n    var self = this;\n    if (!this.key_val.ease) {\n      this.key_val.ease = \"Quad.easeOut\";\n    }\n    var data = {\n      id: this.instance_property.name + \"_tween\",\n      val: this.key_val.ease,\n      time: this.key_val.time.toFixed(3),\n      options: ['Linear.easeNone'],\n      selected: function() {\n        if (this.toString() === self.key_val.ease) {\n          return 'selected';\n        } else {\n          return '';\n        }\n      }\n    };\n\n    var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n    for (var i = 0; i < tweens.length; i++) {\n      var tween = tweens[i];\n      data.options.push(tween + \".easeOut\");\n      data.options.push(tween + \".easeIn\");\n      data.options.push(tween + \".easeInOut\");\n    }\n\n    this.$el = $(tpl_property(data));\n    this.$time = this.$el.find('.property__key-time strong');\n    this.$time.keypress((e) => {\n      if (e.charCode == 13) {\n        // Enter\n        e.preventDefault();\n        this.$time.blur();\n        this.updateKeyTime(this.$time.text());\n      }\n    });\n\n    this.$time.on('click', () => document.execCommand('selectAll', false, null));\n    this.$el.find('select').change(this.onChange);\n  }\n\n  updateKeyTime(time) {\n    time = parseFloat(time);\n    if (isNaN(time)) {\n      time = this.key_val.time;\n    }\n    this.$time.text(time);\n    this.key_val.time = time;\n    this.onChange();\n  }\n\n  onChange() {\n    var ease = this.$el.find('select').val();\n    this.key_val.ease = ease;\n    this.editor.undoManager.addState();\n    this.lineData._isDirty = true;\n    this.timeline._isDirty = true;\n  }\n\n  update() {\n    // todo: use mustache instead...\n    this.$time.html(this.key_val.time.toFixed(3));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyTween.tpl.html\n ** module id = 33\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertiesEditor.tpl.html\n ** module id = 34\n ** module chunks = 1\n **/","let saveAs = require('../bower_components/FileSaver/FileSaver.js');\n\nexport default class EditorMenu {\n  constructor(tweenTime, $timeline, editor) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.editor = editor;\n    this.timer = this.tweenTime.timer;\n    this.initExport();\n    this.initToggle();\n  }\n\n  initToggle() {\n    var timelineClosed = false;\n    var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n    $toggleLink.click((e) => {\n      e.preventDefault();\n      timelineClosed = !timelineClosed;\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n      $('body').toggleClass('timeline-is-closed', timelineClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n    var $toggleLinkSide = $('.properties-editor').find('[data-action=\"toggle\"]');\n    $toggleLinkSide.click((e) => {\n      var propertiesClosed;\n      e.preventDefault();\n      propertiesClosed = !$('body').hasClass('properties-is-closed');\n      $('body').toggleClass('properties-is-closed', propertiesClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n  }\n\n  initExport() {\n    var exporter = this.editor.exporter;\n    this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n      e.preventDefault();\n      var data = exporter.getJSON();\n      var blob = new Blob([data], {\n        \"type\": \"text/json;charset=utf-8\"\n      });\n      saveAs(blob, 'data.json');\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.js\n **/","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 2014-08-29\n *\n * By Eli Grey, http://eligrey.com\n * License: X11/MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs\n  // IE 10+ (native saveAs)\n  || (typeof navigator !== \"undefined\" &&\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n  // Everyone else\n  || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof navigator !== \"undefined\" &&\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\tevent.initMouseEvent(\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t, false, false, false, false, 0, null\n\t\t\t);\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t, fs_min_size = 0\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t// the reasoning behind the timeout and revocation flow\n\t\t, arbitrary_revoke_timeout = 10\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (view.chrome) {\n\t\t\t\trevoker();\n\t\t\t} else {\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t}\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, FileSaver = function(blob, name) {\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, blob_changed = false\n\t\t\t\t, object_url\n\t\t\t\t, target_view\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t\t, abortable = function(func) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t, slice\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\tif (!name) {\n\t\t\t\tname = \"download\";\n\t\t\t}\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsave_link.href = object_url;\n\t\t\t\tsave_link.download = name;\n\t\t\t\tclick(save_link);\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\tdispatch_all();\n\t\t\t\trevoke(object_url);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\tblob_changed = true;\n\t\t\t}\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\tname += \".download\";\n\t\t\t}\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\ttarget_view = view;\n\t\t\t}\n\t\t\tif (!req_fs) {\n\t\t\t\tfs_error();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfs_min_size += blob.size;\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t};\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\tsave();\n\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}), fs_error);\n\t\t\t}), fs_error);\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name) {\n\t\t\treturn new FileSaver(blob, name);\n\t\t}\n\t;\n\tFS_proto.abort = function() {\n\t\tvar filesaver = this;\n\t\tfilesaver.readyState = filesaver.DONE;\n\t\tdispatch(filesaver, \"abort\");\n\t};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n  define([], function() {\n    return saveAs;\n  });\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./bower_components/FileSaver/FileSaver.js\n ** module id = 36\n ** module chunks = 1\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 37\n ** module chunks = 1\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 38\n ** module chunks = 1\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 39\n ** module chunks = 1\n **/","export default class EditorControls {\n  constructor(tweenTime, $timeline) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.timer = this.tweenTime.timer;\n    this.$time = this.$timeline.find('.control--time');\n    this.$time_end = this.$timeline.find('.control--time-end');\n    this.initControls();\n    this.$time_end.val(this.tweenTime.timer.getDuration());\n\n    $(document).keypress((e) => {\n      if (e.charCode == 32) {\n        // Space\n        this.playPause();\n      }\n    });\n  }\n\n  playPause() {\n    var $play_pause;\n    this.timer.toggle();\n    $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n    $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n  }\n\n  initControls() {\n    var $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.click((e) => {\n      e.preventDefault();\n      this.playPause();\n    });\n    var $bt_first = this.$timeline.find('.control--first');\n    $bt_first.click((e) => {\n      e.preventDefault();\n      this.timer.seek([0]);\n    });\n    var $bt_last = this.$timeline.find('.control--last');\n    $bt_last.click((e) => {\n      e.preventDefault();\n      var total = this.tweenTime.getTotalDuration();\n      this.timer.seek([total * 1000]);\n    });\n    this.$time.change(() => {\n      var seconds = parseFloat(this.$time.val(), 10) * 1000;\n      this.timer.seek([seconds]);\n    });\n    this.$time_end.change(() => {\n      var seconds = parseFloat(this.$time_end.val(), 10);\n      this.timer.setDuration(seconds);\n    });\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var seconds = time / 1000;\n      this.$time.val(seconds.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\n\nexport default class SelectionManager {\n  constructor(tweenTime) {\n    this.tweenTime = tweenTime;\n    this.selection = [];\n    this.onSelect = new Signals.Signal();\n  }\n\n  select(item, addToSelection = false) {\n    this.addDataRelations();\n\n    if (!addToSelection) {\n      this.selection = [];\n    }\n    if (item instanceof Array) {\n      for (var i = 0; i < item.length; i++) {\n        var el = item[i];\n        this.selection.push(el);\n      }\n    }\n    else {\n      this.selection.push(item);\n    }\n\n    this.removeDuplicates();\n    this.highlightItems();\n    this.sortSelection();\n    this.onSelect.dispatch(this.selection, addToSelection);\n  }\n\n  getSelection() {\n    return this.selection;\n  }\n\n  removeDuplicates() {\n    var result = [];\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var found = false;\n      for (var j = 0; j < result.length; j++) {\n        var item2 = result[j];\n        if (_.isEqual(item, item2)) {\n          found = true;\n          break;\n        }\n      }\n      if (found === false) {\n        result.push(item);\n      }\n    }\n    this.selection = result;\n  }\n\n  removeItem(item) {\n    var index = this.selection.indexOf(item);\n    if (index > -1) {\n      this.selection.splice(index, 1);\n    }\n  }\n\n  sortSelection() {\n    var compare = function(a, b) {\n      if (!a.time || !b.time) {\n        return 0;\n      }\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    this.selection = this.selection.sort(compare);\n  }\n\n  reset() {\n    this.selection = [];\n    this.highlightItems();\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  triggerSelect() {\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  addDataRelations() {\n    // We need to add some parent references in main data object.\n    // Add a _property reference to each keys.\n    // Add a _line property for each references.\n    var data = this.tweenTime.data;\n    for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n      var line = data[lineIndex];\n      for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n        var property = line.properties[propIndex];\n        property._line = line;\n        for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n          var key = property.keys[keyIndex];\n          key._property = property;\n        }\n      }\n    }\n  }\n\n  highlightItems() {\n    d3.selectAll('.bar--selected').classed('bar--selected', false);\n    d3.selectAll('.key--selected').classed('key--selected', false);\n\n    for (var i = 0; i < this.selection.length; i++) {\n      var data = this.selection[i];\n      if (data._dom) {\n        var d3item = d3.select(data._dom);\n        if (d3item.classed('bar')) {\n          d3item.classed('bar--selected', true);\n        }\n        else if (d3item.classed('key')) {\n          d3item.classed('key--selected', true);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.js\n **/","export default class Exporter {\n  constructor (editor) {\n    this.editor = editor;\n  }\n\n  getData() {\n    var tweenTime = this.editor.tweenTime;\n    var domain = this.editor.timeline.x.domain();\n    var domain_start = domain[0];\n    var domain_end = domain[1];\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    };\n  }\n\n  getJSON () {\n    var options = this.editor.options;\n    var json_replacer = function(key, val) {\n      // Disable all private properies from TweenMax/TimelineMax\n      if (key.indexOf('_') === 0) {\n        return undefined;\n      }\n      if (options.json_replacer !== undefined) {\n        return options.json_replacer(key, val);\n      }\n      return val;\n    };\n\n    var data = this.getData();\n    return JSON.stringify(data, json_replacer, 2);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.js\n **/","import 'jquery';\n\nexport default class UndoManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.history_max = 100;\n    this.history = [];\n    this.current_index = 0;\n\n    // Add the initial state\n    this.addState();\n\n    $(document).keydown((e) => {\n      if (e.keyCode == 90) {\n        if (e.metaKey || e.ctrlKey) {\n          if (!e.shiftKey) {\n            // (command | ctrl) Z\n            this.undo();\n          }\n          else {\n            // (command | ctrl) shift Z\n            this.redo();\n          }\n        }\n      }\n    });\n  }\n\n  undo() {\n    // If there is no more history return\n    if (this.current_index <= 0) {\n      return false;\n    }\n    this.current_index -= 1;\n    this.setState(this.current_index);\n  }\n\n  redo() {\n    // Stop if there is no more things.\n    if (this.current_index >= this.history.length - 1) {\n      return false;\n    }\n    this.current_index += 1;\n    this.setState(this.current_index);\n  }\n\n  addState() {\n    var data = JSON.parse(this.editor.exporter.getJSON());\n\n    // if we did some undo before and then edit something,\n    // we want to remove all actions past the current index first.\n    if (this.current_index + 1 < this.history.length) {\n      this.history.splice(this.current_index + 1, this.history.length - 1);\n    }\n\n    this.history.push(data);\n\n    // Keep history to a max size by removing the first element if needed.\n    if (this.history.length > this.history_max) {\n      this.history.shift();\n    }\n\n    // Set the current index\n    this.current_index = this.history.length - 1;\n  }\n\n  setState(index) {\n    var state = this.history[index];\n    var data = state.data;\n    var tweenTime = this.editor.tweenTime;\n\n    // naively copy keys and values from previous state\n    for (var item_key = 0; item_key < data.length; item_key++) {\n      var item = data[item_key];\n      // if item is not defined copy it\n      if (!tweenTime.data[item_key]) {\n        tweenTime.data[item_key] = item;\n      }\n      else {\n        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n          var prop = item.properties[prop_key];\n          // if property is not defined copy it\n          if (!tweenTime.data[item_key].properties[prop_key]) {\n            tweenTime.data[item_key].properties[prop_key] = prop;\n          }\n          else {\n            // set property keys\n            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n              var key = prop.keys[key_key];\n              if (!keys[key_key]) {\n                keys[key_key] = key;\n              }\n              else {\n                keys[key_key].time = key.time;\n                keys[key_key].val = key.val;\n                keys[key_key].ease = key.ease;\n              }\n            }\n          }\n        }\n      }\n\n      tweenTime.data[item_key]._isDirty = true;\n    }\n    this.editor.render(false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.js\n **/"],"sourceRoot":""}