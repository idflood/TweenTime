<<<<<<< HEAD
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 43b0210609f5a1ede61b?7612","webpack:///./Editor.js","webpack:///./core/Utils.js?8d2f","webpack:///external {\"root\":\"signals\",\"commonjs\":\"signals\",\"commonjs2\":\"signals\",\"amd\":\"signals\"}?9038","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./graph/Timeline.js","webpack:///./graph/Header.js","webpack:///external \"d3\"","webpack:///./graph/TimeIndicator.js","webpack:///./graph/Items.js","webpack:///./graph/KeysPreview.js","webpack:///./graph/Properties.js","webpack:///./graph/Keys.js","webpack:///./graph/Errors.js","webpack:///./graph/Selection.js","webpack:///./editor/PropertiesEditor.js","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./editor/Property.js","webpack:///./editor/PropertyNumber.js","webpack:///./editor/PropertyBase.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"draggable-number.js\",\"commonjs2\":\"draggable-number.js\",\"amd\":\"DraggableNumber\"}","webpack:///./templates/propertyNumber.tpl.html","webpack:////Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/hogan.js","webpack:////Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/compiler.js","webpack:////Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/template.js","webpack:///./editor/PropertyColor.js","webpack:///external {\"root\":\"spectrum\",\"commonjs\":\"spectrum-colorpicker\",\"commonjs2\":\"spectrum-colorpicker\",\"amd\":\"spectrum\"}","webpack:///./templates/propertyColor.tpl.html","webpack:///./editor/PropertyTween.js","webpack:///./templates/propertyTween.tpl.html","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./editor/EditorMenu.js","webpack:///external {\"root\":\"saveAs\",\"commonjs\":\"file-saver\",\"commonjs2\":\"file-saver\",\"amd\":\"file-saver\"}","webpack:///./editor/EditorControls.js","webpack:///./editor/SelectionManager.js","webpack:///./editor/Exporter.js","webpack:///./editor/UndoManager.js","webpack:///./templates/timeline.tpl.html"],"names":["tpl_timeline","require","Signals","Editor","tweenTime","options","timer","lastTime","onKeyAdded","bind","onKeyRemoved","forceItemsRender","el","$","$timeline","append","addClass","selectionManager","exporter","timeline","propertiesEditor","keyAdded","add","keyRemoved","menu","onMenuCreated","undefined","find","controls","undoManager","onSelect","Signal","self","selection","addToSelection","dispatch","window","editorEnabled","dispatchEvent","Event","requestAnimationFrame","update","_isDirty","item","select","getSelection","addState","render","removeItem","_id","length","triggerSelect","time","time_changed","force","time2","module","exports","Utils","d","seconds","hours","Math","floor","minutes","output","data","objectId","property_name","tolerance","timer_time","getCurrentTime","abs","i","id","start","end","j","properties","prop","keys","name","k","key","prevKey","compare","a","b","sort","s4","random","toString","substring","d3","Timeline","editor","currentTime","onUpdate","initialDomain","domainStart","domainEnd","totalDuration","margin","top","right","bottom","left","width","innerWidth","height","lineHeight","label_position_x","x","scale","domain","range","xAxis","svg","axis","orient","tickSize","tickFormat","formatMinutes","get","attr","svgContainer","svgContainerTime","linesContainer","header","timeIndicator","items","keysPreview","newKey","keyContainer","selectNewKey","errors","onKeyUpdated","xAxisGrid","ticks","dy","xGrid","call","xAxisElement","onBrush","extent","onresize","INNER_WIDTH","width2","selectAll","resize","domainLength","margin_ms","setDomain","bar","max","updateHeight","Header","xDisplayed","createBrushHandle","createTimeHandle","durationChanged","onDurationChanged","ms","new_domain","min","brush","adaptDomainToDuration","extent0","getTime","on","gBrush","timeSelection","dragTimeMove","event","sourceEvent","stopPropagation","event_x","clientX","dx","invert","timeMatch","shiftKey","getClosestTime","seek","dragTime","behavior","drag","origin","enter","mouse","timeGrp","TimeIndicator","container","_","Items","selectBar","datum","dragmove","diff","prop_key","dragmoveLeft","dragmoveRight","dragLeft","t","y","dragRight","bar_border","barEnter","barContainerRight","guid","collapsed","numProperties","visibleProperties","filter","barWithStartAndEnd","text","label","exit","remove","KeysPreview","propVal","propKey","setItemStyle","parentNode","bar_data","keyValue","keyKey","parseInt","Properties","subGrp","core","sub_height","lineObject","lineValue","def","default","getPreviousKey","val","_line","_property","defaultEase","ease","push","sortKeys","Keys","classed","_dom","propertyObject","propertyData","lineData","key_data","currentDomainStart","old_time","selection_first_time","selection_last_time","isEqual","time_offset","updateKeyItem","property","key_scale","is_first","altKey","propValue","selectKey","type","dragend","key_grp","cls","split","grp_linear","grp_in","grp_out","grp_inout","Errors","propertiesWithError","insert","errorsValue","errorTime","Selection","onMouseUp","init","p","class","reset","css","s","empty","move","key_width","timeStart","timeEnd","containerBounding","getBoundingClientRect","each","state_data","item_data","itemBounding","tpl_propertiesEditor","PropertiesEditor","addProperty","$el","$container","parentElement","keypress","e","forEach","Array","removeClass","Property","numberProp","tweenProp","key_val","getContainer","$tween_container","hasOwnProperty","instance_prop","$grp_container","getGroupContainer","addNumberProperty","addTweenProperty","$existing","$grp","grp_class","group","createGroupContainer","group_name","replace","toLowerCase","dispose","PropClass","tween","click","preventDefault","index","indexOf","splice","DraggableNumber","tpl_property","PropertyNumber","instance_property","onInputChange","$input","parseFloat","getCurrentVal","view","onKeyClick","onChangeEnd","draggableOptions","changeCallback","endCallback","draggable","change","destroy","set","toFixed","PropertyBase","$key","currentValue","addKey","prop_name","values","current_value","getInputVal","current_key","object","getCurrentKey","toggleClass","PropertyColor","spectrum","allowEmpty","showAlpha","clickoutFiresChange","preferredFormat","color","_a","toHexString","toRgbString","PropertyTween","onChange","$time","selected","tweens","charCode","blur","updateKeyTime","document","execCommand","isNaN","html","saveAs","EditorMenu","initExport","initToggle","timelineClosed","$toggleLink","$toggleLinkSide","propertiesClosed","hasClass","getJSON","blob","Blob","EditorControls","$time_end","initControls","getDuration","playPause","$play_pause","toggle","is_playing","$bt_first","$bt_last","total","getTotalDuration","setDuration","SelectionManager","addDataRelations","removeDuplicates","highlightItems","sortSelection","result","found","item2","itemObj","lineIndex","line","propIndex","keyIndex","d3item","Exporter","domain_start","domain_end","settings","duration","json_replacer","getData","JSON","stringify","UndoManager","history_max","history","current_index","keydown","keyCode","metaKey","ctrlKey","undo","redo","setState","parse","shift","state","item_key","key_key"],"mappings":"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CA;AACA,sBAAqB,iCAAiC;AACtD;AACA;AACA;;AAEA;AACA;AACA,8BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAqC,mBAAmB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,sBAAqB,SAAS;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,wBAAuB;AACvB,sFAAqF;AACrF;AACA;AACA;AACA,4BAA2B;AAC3B,4BAA2B;AAC3B;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,kDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAmC,OAAO;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAwB;;AAExB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAAyD,iBAAiB;AAC1E;AACA,cAAa,0BAA0B;AACvC;;AAEA;AACA;AACA;AACA,0CAAyC,iGAAiG;AAC1I;AACA,wBAAuB,2BAA2B;AAClD;;AAEA;AACA,cAAa,wBAAwB,uCAAuC,qCAAqC;AACjH;;AAEA;AACA;AACA;AACA,oBAAmB,mBAAmB,cAAc;AACpD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,aAAa,0BAA0B;AAC9D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B,uFAAsF;AACtF;AACA;;AAEA;AACA;AACA;AACA,sGAAqG;AACrG,sDAAqD;AACrD;AACA,yBAAwB,EAAE,SAAS;AACnC,MAAK;;AAEL;AACA,2GAA0G;AAC1G;AACA,0BAAyB;AACzB,MAAK;;AAEL;AACA;AACA,kBAAiB,YAAY,oBAAoB;AACjD;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,kBAAiB,QAAQ;AACzB;AACA;AACA;AACA,6DAA4D;AAC5D;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA,8FAA6F;AAC7F,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL,OAAM;;AAEN;AACA;;AAEA;AACA,4FAA2F;AAC3F;;AAEA;AACA,4BAA2B;AAC3B;;AAEA;AACA;AACA,yCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACtaD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C,WAAW,EAAE;;AAE1D;AACA;;AAEA;AACA;;AAEA;AACA,+CAA8C;AAC9C,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,qBAAoB,eAAe,EAAE;;AAErC,qBAAoB,kBAAkB,eAAe,UAAU,EAAE;;AAEjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,4BAA2B;AAC3B,4BAA2B;AAC3B,+BAA8B;AAC9B,gCAA+B;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA,EAAC;;;;;;;;;;;;;;;;;ACpVD;;AAEA;;;;;;;;;;;;AADA,oBAAAlW,CAAQ,EAAR;;;AAGA,KAAIgV,eAAe,mBAAAhV,CAAQ,EAAR,CAAnB;;KAEqB8W,a;;;AACnB,0BAAY5B,iBAAZ,EAA+B1F,QAA/B,EAAyC1J,MAAzC,EAAkE;AAAA,SAAjBwN,OAAiB,yDAAP,KAAO;;AAAA;;AAAA,+HAC1D4B,iBAD0D,EACvC1F,QADuC,EAC7B1J,MAD6B,EACrBwN,OADqB;;AAEhE,WAAK6B,aAAL,GAAqB,MAAKA,aAAL,CAAmB3U,IAAnB,OAArB;AACA,WAAK4U,MAAL,GAAc,MAAKzC,GAAL,CAASjR,IAAT,CAAc,OAAd,CAAd;AAHgE;AAIjE;;;;8BAEQ;AAAA;;AACP;AACA;AACA,WAAIkN,MAAM,KAAK0G,aAAL,EAAV;;AAEA,WAAIrR,OAAO;AACTQ,aAAI,KAAKyQ,iBAAL,CAAuBlQ,IADlB,EACwB;AACjCuI,gBAAO,KAAK2H,iBAAL,CAAuB3H,KAAvB,IAAgC,KAAK2H,iBAAL,CAAuBlQ,IAFrD;AAGT4J,cAAKA;AAHI,QAAX;;AAMA,WAAI2G,OAAOP,aAAa/Q,IAAb,CAAX;AACA,YAAK0O,GAAL,GAAW/R,EAAE2U,IAAF,CAAX;AACA,YAAK5C,GAAL,CAASjR,IAAT,CAAc,gBAAd,EAAgCgT,KAAhC,CAAsC,KAAKc,UAA3C;;AAEA,WAAIJ,SAAS,KAAKzC,GAAL,CAASjR,IAAT,CAAc,OAAd,CAAb;;AAEA0T,cAAO2B,QAAP,CAAgB;AACdC,qBAAY,KADE;AAEdC,oBAAW,IAFG;AAGdC,8BAAqB,KAHP;AAIdC,0BAAiB,KAJH;AAKdrB,iBAAQ,kBAAM;AACZ,kBAAKhQ,MAAL,CAAYlE,WAAZ,CAAwBiB,QAAxB;AACD,UAPa;AAQdiP,eAAM,cAACsF,KAAD,EAAW;AACf,eAAIA,MAAMC,EAAN,KAAa,CAAjB,EAAoB;AAClBjC,oBAAOxG,GAAP,CAAWwI,MAAME,WAAN,EAAX;AACD,YAFD,MAGK;AACHlC,oBAAOxG,GAAP,CAAWwI,MAAMG,WAAN,EAAX;AACD;;AAED,kBAAKpC,aAAL;AACD;AAjBa,QAAhB;;AAoBAC,cAAOU,MAAP,CAAc,KAAKX,aAAnB;AACD;;;8BAEQ;AACP;AACA,YAAKxC,GAAL,CAASjR,IAAT,CAAc,OAAd,EAAuBqV,QAAvB,CAAgC,SAAhC;AACA,cAAO,KAAKpE,GAAZ;AACA,cAAO,KAAKyC,MAAZ;AACD;;;8BAEQ;AACP;AACA,WAAIxG,MAAM,KAAK0G,aAAL,EAAV;AACA,YAAKF,MAAL,CAAYxG,GAAZ,CAAgBA,GAAhB;AACA,YAAKwG,MAAL,CAAY2B,QAAZ,CAAqB,KAArB,EAA4BnI,GAA5B;AACD;;;;;;mBA3DkBkI,a;;;;;;ACNrB,iD;;;;;;ACAA;AACA,8BAA6B,yBAAyB,wBAAwB,YAAY,aAAa,iDAAiD,cAAc,mDAAmD,cAAc,uBAAuB,0BAA0B,qCAAqC,6BAA6B,gBAAgB,cAAc,sBAAsB,0BAA0B,6CAA6C,2BAA2B,aAAa,cAAc,cAAc,UAAU,cAAc,EAAE,aAAa,SAAS,IAAI,4GAA4G,IAAI,+BAA+B,OAAO,0BAA0B,IAAI,uCAAuC,KAAK,qBAAqB,qCAAqC,G;;;;;;;;;;;;;;ACDv2B;;;;AAEA,KAAI9B,eAAe,mBAAAhV,CAAQ,EAAR,CAAnB;;KAEqBwX,a;AACnB;AACA;AACA,0BAAYtC,iBAAZ,EAA+B1F,QAA/B,EAAyC1J,MAAzC,EAAoF;AAAA,SAAnCwN,OAAmC,yDAAzB,KAAyB;AAAA,SAAlBpS,QAAkB,yDAAP,KAAO;;AAAA;;AAClF,UAAKgU,iBAAL,GAAyBA,iBAAzB;AACA,UAAK1F,QAAL,GAAgBA,QAAhB;AACA,UAAK1J,MAAL,GAAcA,MAAd;AACA,UAAKwN,OAAL,GAAeA,OAAf;AACA,UAAKpS,QAAL,GAAgBA,QAAhB;;AAEA,UAAKuW,QAAL,GAAgB,KAAKA,QAAL,CAAcjX,IAAd,CAAmB,IAAnB,CAAhB;;AAEA,UAAKH,KAAL,GAAa,KAAKyF,MAAL,CAAYzF,KAAzB;AACA,UAAKqX,KAAL,GAAa,KAAb;AACA,UAAK/E,GAAL,GAAW,KAAX;AACA,UAAK7P,MAAL;AACD;;;;8BAEQ;AACP,cAAO,KAAK6P,GAAZ;AACA,cAAO,KAAKuC,iBAAZ;AACA,cAAO,KAAK1F,QAAZ;AACA,cAAO,KAAK1J,MAAZ;AACA,cAAO,KAAKwN,OAAZ;AACA,cAAO,KAAKpS,QAAZ;;AAEA,cAAO,KAAKb,KAAZ;AACA,cAAO,KAAKqX,KAAZ;AACD;;;8BAEQ;AAAA;;AACP,WAAI3V,OAAO,IAAX;AACA,WAAI,CAAC,KAAKuR,OAAL,CAAatE,IAAlB,EAAwB;AACtB,cAAKsE,OAAL,CAAatE,IAAb,GAAoB,cAApB;AACD;AACD,WAAI/K,OAAO;AACTQ,aAAI,KAAKyQ,iBAAL,CAAuBlQ,IAAvB,GAA8B,QADzB;AAET4J,cAAK,KAAK0E,OAAL,CAAatE,IAFT;AAGT7L,eAAM,KAAKmQ,OAAL,CAAanQ,IAAb,CAAkB8S,OAAlB,CAA0B,CAA1B,CAHG;AAIT7V,kBAAS,CAAC,iBAAD,CAJA;AAKTuX,mBAAU,oBAAW;AACnB,eAAI,KAAKjS,QAAL,OAAoB3D,KAAKuR,OAAL,CAAatE,IAArC,EAA2C;AACzC,oBAAO,UAAP;AACD;AACD,kBAAO,EAAP;AACD;AAVQ,QAAX;;AAaA,WAAI4I,SAAS,CAAC,MAAD,EAAS,OAAT,EAAkB,OAAlB,EAA2B,OAA3B,CAAb;AACA,YAAK,IAAIpT,IAAI,CAAb,EAAgBA,IAAIoT,OAAO3U,MAA3B,EAAmCuB,GAAnC,EAAwC;AACtC,aAAIiQ,QAAQmD,OAAOpT,CAAP,CAAZ;AACAP,cAAK7D,OAAL,CAAa6O,IAAb,CAAkBwF,QAAQ,UAA1B;AACAxQ,cAAK7D,OAAL,CAAa6O,IAAb,CAAkBwF,QAAQ,SAA1B;AACAxQ,cAAK7D,OAAL,CAAa6O,IAAb,CAAkBwF,QAAQ,YAA1B;AACD;;AAED,YAAK9B,GAAL,GAAW/R,EAAEoU,aAAa/Q,IAAb,CAAF,CAAX;AACA,YAAKyT,KAAL,GAAa,KAAK/E,GAAL,CAASjR,IAAT,CAAc,4BAAd,CAAb;AACA,YAAKgW,KAAL,CAAW5E,QAAX,CAAoB,UAACC,CAAD,EAAO;AACzB,aAAIA,EAAE8E,QAAF,KAAe,EAAnB,EAAuB;AACrB;AACA9E,aAAE4B,cAAF;AACA,iBAAK+C,KAAL,CAAWI,IAAX;AACA,iBAAKC,aAAL,CAAmB,MAAKL,KAAL,CAAWpK,IAAX,EAAnB;AACD;AACF,QAPD;;AASA,YAAKoK,KAAL,CAAWlN,EAAX,CAAc,OAAd,EAAuB;AAAA,gBAAMwN,SAASC,WAAT,CAAqB,WAArB,EAAkC,KAAlC,EAAyC,IAAzC,CAAN;AAAA,QAAvB;AACA,YAAKtF,GAAL,CAASjR,IAAT,CAAc,QAAd,EAAwBoU,MAAxB,CAA+B,KAAK2B,QAApC;AACD;;;mCAEatU,I,EAAM;AAClB,WAAIG,QAAQ+R,WAAWlS,IAAX,CAAZ;AACA,WAAI+U,MAAM5U,KAAN,CAAJ,EAAkB;AAChBA,iBAAQ,KAAKgQ,OAAL,CAAanQ,IAArB;AACD;AACD,YAAKuU,KAAL,CAAWpK,IAAX,CAAgBhK,KAAhB;AACA,YAAKgQ,OAAL,CAAanQ,IAAb,GAAoBG,KAApB;AACA,YAAKmU,QAAL;AACD;;;gCAEU;AACT,WAAIzI,OAAO,KAAK2D,GAAL,CAASjR,IAAT,CAAc,QAAd,EAAwBkN,GAAxB,EAAX;AACA,YAAK0E,OAAL,CAAatE,IAAb,GAAoBA,IAApB;AACA,YAAKlJ,MAAL,CAAYlE,WAAZ,CAAwBiB,QAAxB;AACA,YAAK2M,QAAL,CAAc/M,QAAd,GAAyB,IAAzB;AACA,YAAKvB,QAAL,CAAcuB,QAAd,GAAyB,IAAzB;AACD;;;8BAEQ;AACP;AACA,YAAKiV,KAAL,CAAWS,IAAX,CAAgB,KAAK7E,OAAL,CAAanQ,IAAb,CAAkB8S,OAAlB,CAA0B,CAA1B,CAAhB;AACD;;;;;;mBA5FkBuB,a;;;;;;ACJrB;AACA,8BAA6B,yBAAyB,wBAAwB,YAAY,aAAa,gDAAgD,cAAc,uBAAuB,0BAA0B,mDAAmD,cAAc,0CAA0C,cAAc,yCAAyC,cAAc,2BAA2B,0BAA0B,WAAW,cAAc,6CAA6C,GAAG,IAAI,yBAAyB,gCAAgC,yBAAyB,WAAW,gCAAgC,SAAS,yBAAyB,iBAAiB,eAAe,EAAE,SAAS,uBAAuB,cAAc,kBAAkB,cAAc,gBAAgB,cAAc,cAAc,cAAc,0DAA0D,cAAc,mHAAmH,4BAA4B,gCAAgC,cAAc,iFAAiF,cAAc,cAAc,cAAc,EAAE,aAAa,SAAS,IAAI,8DAA8D,IAAI,yIAAyI,IAAI,eAAe,UAAU,4BAA4B,GAAG,KAAK,UAAU,GAAG,GAAG,qBAAqB,UAAU,kNAAkN,MAAM,iHAAiH,qCAAqC,G;;;;;;ACDt5D;AACA,8BAA6B,yBAAyB,wBAAwB,YAAY,aAAa,yCAAyC,cAAc,2HAA2H,cAAc,uDAAuD,cAAc,cAAc,UAAU,cAAc,EAAE,aAAa,SAAS,IAAI,0NAA0N,qCAAqC,G;;;;;;;;;;;;;;;;ACD7qB,KAAIY,SAAS,mBAAApY,CAAQ,EAAR,EAAsBoY,MAAtB,IAAgC,mBAAApY,CAAQ,EAAR,CAA7C;;KAEqBqY,U;AACnB,uBAAYlY,SAAZ,EAAuBU,SAAvB,EAAkCiF,MAAlC,EAA0C;AAAA;;AACxC,UAAK3F,SAAL,GAAiBA,SAAjB;AACA,UAAKU,SAAL,GAAiBA,SAAjB;AACA,UAAKiF,MAAL,GAAcA,MAAd;AACA,UAAKzF,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACA,UAAKiY,UAAL;AACA,UAAKC,UAAL;AACD;;;;kCAEY;AACX,WAAI1F,gBAAgB,KAAK/M,MAAL,CAAYnF,EAAhC;AACA,WAAI6X,iBAAiB,KAArB;AACA,WAAIC,cAAc,KAAK5X,SAAL,CAAea,IAAf,CAAoB,wBAApB,CAAlB;AACA+W,mBAAY/D,KAAZ,CAAkB,UAAC3B,CAAD,EAAO;AACvBA,WAAE4B,cAAF;AACA6D,0BAAiB,CAACA,cAAlB;AACAC,qBAAY5B,WAAZ,CAAwB,sBAAxB,EAAgD2B,cAAhD;AACA3F,uBAAcgE,WAAd,CAA0B,oBAA1B,EAAgD2B,cAAhD;AACA,gBAAOrW,OAAOE,aAAP,CAAqB,IAAIC,KAAJ,CAAU,QAAV,CAArB,CAAP;AACD,QAND;AAOA,WAAIoW,kBAAkB9X,EAAE,oBAAF,EAAwBiS,aAAxB,EAAuCnR,IAAvC,CAA4C,wBAA5C,CAAtB;AACAgX,uBAAgBhE,KAAhB,CAAsB,UAAC3B,CAAD,EAAO;AAC3B,aAAI4F,gBAAJ;AACA5F,WAAE4B,cAAF;AACAgE,4BAAmB,CAAC9F,cAAc+F,QAAd,CAAuB,sBAAvB,CAApB;AACA/F,uBAAcgE,WAAd,CAA0B,sBAA1B,EAAkD8B,gBAAlD;AACA,gBAAOxW,OAAOE,aAAP,CAAqB,IAAIC,KAAJ,CAAU,QAAV,CAArB,CAAP;AACD,QAND;AAOD;;;kCAEY;AACX,WAAIrB,WAAW,KAAK6E,MAAL,CAAY7E,QAA3B;AACA,YAAKJ,SAAL,CAAea,IAAf,CAAoB,wBAApB,EAA8CgT,KAA9C,CAAoD,UAAS3B,CAAT,EAAY;AAC9DA,WAAE4B,cAAF;AACA,aAAI1Q,OAAOhD,SAAS4X,OAAT,EAAX;AACA,aAAIC,OAAO,IAAIC,IAAJ,CAAS,CAAC9U,IAAD,CAAT,EAAiB;AAC1BsM,iBAAM;AADoB,UAAjB,CAAX;AAGA6H,gBAAOU,IAAP,EAAa,WAAb;AACD,QAPD;AAQD;;;;;;mBAzCkBT,U;;;;;;ACFrB,iD;;;;;;;;;;;;;;;;KCAqBW,c;AACnB,2BAAY7Y,SAAZ,EAAuBU,SAAvB,EAAkC;AAAA;;AAAA;;AAChC,UAAKV,SAAL,GAAiBA,SAAjB;AACA,UAAKU,SAAL,GAAiBA,SAAjB;AACA,UAAKR,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACA,UAAKqX,KAAL,GAAa,KAAK7W,SAAL,CAAea,IAAf,CAAoB,gBAApB,CAAb;AACA,UAAKuX,SAAL,GAAiB,KAAKpY,SAAL,CAAea,IAAf,CAAoB,oBAApB,CAAjB;AACA,UAAKwX,YAAL;AACA,UAAKD,SAAL,CAAerK,GAAf,CAAmB,KAAKzO,SAAL,CAAeE,KAAf,CAAqB8Y,WAArB,EAAnB;;AAEAvY,OAAEoX,QAAF,EAAYlF,QAAZ,CAAqB,UAACC,CAAD,EAAO;AAC1B,WAAIA,EAAE8E,QAAF,KAAe,EAAnB,EAAuB;AACrB;AACA,eAAKuB,SAAL;AACD;AACF,MALD;AAMD;;;;iCAEW;AACV,WAAIC,WAAJ;AACA,YAAKhZ,KAAL,CAAWiZ,MAAX;AACAD,qBAAc,KAAKxY,SAAL,CAAea,IAAf,CAAoB,sBAApB,CAAd;AACA2X,mBAAYxC,WAAZ,CAAwB,YAAxB,EAAsC,KAAKxW,KAAL,CAAWkZ,UAAjD;AACAF,mBAAYxC,WAAZ,CAAwB,WAAxB,EAAqC,CAAC,KAAKxW,KAAL,CAAWkZ,UAAjD;AACD;;;oCAEc;AAAA;;AACb,WAAIF,cAAc,KAAKxY,SAAL,CAAea,IAAf,CAAoB,sBAApB,CAAlB;AACA2X,mBAAY3E,KAAZ,CAAkB,UAAC3B,CAAD,EAAO;AACvBA,WAAE4B,cAAF;AACA,gBAAKyE,SAAL;AACD,QAHD;AAIA,WAAII,YAAY,KAAK3Y,SAAL,CAAea,IAAf,CAAoB,iBAApB,CAAhB;AACA8X,iBAAU9E,KAAV,CAAgB,UAAC3B,CAAD,EAAO;AACrBA,WAAE4B,cAAF;AACA,gBAAKtU,KAAL,CAAWiL,IAAX,CAAgB,CAAC,CAAD,CAAhB;AACD,QAHD;AAIA,WAAImO,WAAW,KAAK5Y,SAAL,CAAea,IAAf,CAAoB,gBAApB,CAAf;AACA+X,gBAAS/E,KAAT,CAAe,UAAC3B,CAAD,EAAO;AACpBA,WAAE4B,cAAF;AACA,aAAI+E,QAAQ,OAAKvZ,SAAL,CAAewZ,gBAAf,EAAZ;AACA,gBAAKtZ,KAAL,CAAWiL,IAAX,CAAgB,CAACoO,QAAQ,IAAT,CAAhB;AACD,QAJD;AAKA,YAAKhC,KAAL,CAAW5B,MAAX,CAAkB,YAAM;AACtB,aAAInS,UAAU0R,WAAW,OAAKqC,KAAL,CAAW9I,GAAX,EAAX,EAA6B,EAA7B,IAAmC,IAAjD;AACA,gBAAKvO,KAAL,CAAWiL,IAAX,CAAgB,CAAC3H,OAAD,CAAhB;AACD,QAHD;AAIA,YAAKsV,SAAL,CAAenD,MAAf,CAAsB,YAAM;AAC1B,aAAInS,UAAU0R,WAAW,OAAK4D,SAAL,CAAerK,GAAf,EAAX,EAAiC,EAAjC,CAAd;AACA,gBAAKvO,KAAL,CAAWuZ,WAAX,CAAuBjW,OAAvB;AACD,QAHD;AAID;;;4BAEMR,I,EAAMC,Y,EAAc;AACzB,WAAIA,YAAJ,EAAkB;AAChB,aAAIO,UAAUR,OAAO,IAArB;AACA,cAAKuU,KAAL,CAAW9I,GAAX,CAAejL,QAAQsS,OAAR,CAAgB,CAAhB,CAAf;AACD;AACF;;;;;;mBA1DkB+C,c;;;;;;;;;;;;;;;;ACArB,KAAIpT,KAAK,mBAAA5F,CAAQ,CAAR,CAAT;AACA,KAAIC,UAAU,mBAAAD,CAAQ,CAAR,CAAd;AACA,KAAIgM,IAAI,mBAAAhM,CAAQ,CAAR,CAAR;;KAEqB6Z,gB;AACnB,6BAAY1Z,SAAZ,EAAuB;AAAA;;AACrB,UAAKA,SAAL,GAAiBA,SAAjB;AACA,UAAK6B,SAAL,GAAiB,EAAjB;AACA,UAAKH,QAAL,GAAgB,IAAI5B,QAAQ6B,MAAZ,EAAhB;AACD;;;;4BAEMY,I,EAA8B;AAAA,WAAxBT,cAAwB,yDAAP,KAAO;;AACnC,YAAK6X,gBAAL;;AAEA,WAAI,CAAC7X,cAAL,EAAqB;AACnB,cAAKD,SAAL,GAAiB,EAAjB;AACD;AACD,WAAIU,gBAAgBuQ,KAApB,EAA2B;AACzB,cAAK,IAAIzO,IAAI,CAAb,EAAgBA,IAAI9B,KAAKO,MAAzB,EAAiCuB,GAAjC,EAAsC;AACpC,eAAI7D,KAAK+B,KAAK8B,CAAL,CAAT;AACA,gBAAKxC,SAAL,CAAeiN,IAAf,CAAoBtO,EAApB;AACD;AACF,QALD,MAMK;AACH,cAAKqB,SAAL,CAAeiN,IAAf,CAAoBvM,IAApB;AACD;;AAED,YAAKqX,gBAAL;AACA,YAAKC,cAAL;AACA,YAAKC,aAAL;AACA,YAAKpY,QAAL,CAAcK,QAAd,CAAuB,KAAKF,SAA5B,EAAuCC,cAAvC;AACD;;;oCAEc;AACb,cAAO,KAAKD,SAAZ;AACD;;;wCAEkB;AACjB,WAAIkY,SAAS,EAAb;AACA,YAAK,IAAI1V,IAAI,CAAb,EAAgBA,IAAI,KAAKxC,SAAL,CAAeiB,MAAnC,EAA2CuB,GAA3C,EAAgD;AAC9C,aAAI9B,OAAO,KAAKV,SAAL,CAAewC,CAAf,CAAX;AACA,aAAI2V,QAAQ,KAAZ;AACA,cAAK,IAAIvV,IAAI,CAAb,EAAgBA,IAAIsV,OAAOjX,MAA3B,EAAmC2B,GAAnC,EAAwC;AACtC,eAAIwV,QAAQF,OAAOtV,CAAP,CAAZ;AACA,eAAIoH,EAAE8D,OAAF,CAAUpN,IAAV,EAAgB0X,KAAhB,CAAJ,EAA4B;AAC1BD,qBAAQ,IAAR;AACA;AACD;AACF;AACD,aAAIA,UAAU,KAAd,EAAqB;AACnBD,kBAAOjL,IAAP,CAAYvM,IAAZ;AACD;AACF;AACD,YAAKV,SAAL,GAAiBkY,MAAjB;AACD;;;gCAEUxX,I,EAAM;AACf;AACA,WAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,aAAI2X,UAAUrO,EAAEtK,IAAF,CAAO,KAAKM,SAAZ,EAAuB,UAASrB,EAAT,EAAa;AAChD,kBAAOA,GAAGqC,GAAH,KAAWN,IAAlB;AACD,UAFa,CAAd;AAGA,aAAI2X,OAAJ,EAAa;AACX,kBAAO,KAAKtX,UAAL,CAAgBsX,OAAhB,CAAP;AACD;AACF;;AAED;AACA,WAAIzF,QAAQ,KAAK5S,SAAL,CAAe6S,OAAf,CAAuBnS,IAAvB,CAAZ;AACA,WAAIkS,QAAQ,CAAC,CAAb,EAAgB;AACd,cAAK5S,SAAL,CAAe8S,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACD;AACD,YAAK1R,aAAL;AACD;;;qCAEe;AACd,WAAIkC,UAAU,SAAVA,OAAU,CAASC,CAAT,EAAYC,CAAZ,EAAe;AAC3B,aAAI,CAACD,EAAElC,IAAH,IAAW,CAACmC,EAAEnC,IAAlB,EAAwB;AACtB,kBAAO,CAAP;AACD;AACD,aAAIkC,EAAElC,IAAF,GAASmC,EAAEnC,IAAf,EAAqB;AACnB,kBAAO,CAAC,CAAR;AACD;AACD,aAAIkC,EAAElC,IAAF,GAASmC,EAAEnC,IAAf,EAAqB;AACnB,kBAAO,CAAP;AACD;AACD,gBAAO,CAAP;AACD,QAXD;AAYA,YAAKnB,SAAL,GAAiB,KAAKA,SAAL,CAAeuD,IAAf,CAAoBH,OAApB,CAAjB;AACD;;;6BAEO;AACN,YAAKpD,SAAL,GAAiB,EAAjB;AACA,YAAKgY,cAAL;AACA,YAAKnY,QAAL,CAAcK,QAAd,CAAuB,KAAKF,SAA5B,EAAuC,KAAvC;AACD;;;qCAEe;AACd,YAAKH,QAAL,CAAcK,QAAd,CAAuB,KAAKF,SAA5B,EAAuC,KAAvC;AACD;;;wCAEkB;AACjB;AACA;AACA;AACA,WAAIiC,OAAO,KAAK9D,SAAL,CAAe8D,IAA1B;AACA,YAAK,IAAIqW,YAAY,CAArB,EAAwBA,YAAYrW,KAAKhB,MAAzC,EAAiDqX,WAAjD,EAA8D;AAC5D,aAAIC,OAAOtW,KAAKqW,SAAL,CAAX;AACA,cAAK,IAAIE,YAAY,CAArB,EAAwBA,YAAYD,KAAK1V,UAAL,CAAgB5B,MAApD,EAA4DuX,WAA5D,EAAyE;AACvE,eAAIvK,WAAWsK,KAAK1V,UAAL,CAAgB2V,SAAhB,CAAf;AACAvK,oBAASpB,KAAT,GAAiB0L,IAAjB;AACA,gBAAK,IAAIE,WAAW,CAApB,EAAuBA,WAAWxK,SAASlL,IAAT,CAAc9B,MAAhD,EAAwDwX,UAAxD,EAAoE;AAClE,iBAAIvV,MAAM+K,SAASlL,IAAT,CAAc0V,QAAd,CAAV;AACAvV,iBAAI4J,SAAJ,GAAgBmB,QAAhB;AACD;AACF;AACF;AACF;;;sCAEgB;AACfrK,UAAGuD,SAAH,CAAa,gBAAb,EAA+BiG,OAA/B,CAAuC,eAAvC,EAAwD,KAAxD;AACAxJ,UAAGuD,SAAH,CAAa,gBAAb,EAA+BiG,OAA/B,CAAuC,eAAvC,EAAwD,KAAxD;;AAEA,YAAK,IAAI5K,IAAI,CAAb,EAAgBA,IAAI,KAAKxC,SAAL,CAAeiB,MAAnC,EAA2CuB,GAA3C,EAAgD;AAC9C,aAAIP,OAAO,KAAKjC,SAAL,CAAewC,CAAf,CAAX;AACA,aAAIP,KAAKoL,IAAT,EAAe;AACb,eAAIqL,SAAS9U,GAAGjD,MAAH,CAAUsB,KAAKoL,IAAf,CAAb;AACA,eAAIqL,OAAOtL,OAAP,CAAe,KAAf,CAAJ,EAA2B;AACzBsL,oBAAOtL,OAAP,CAAe,eAAf,EAAgC,IAAhC;AACD,YAFD,MAGK,IAAIsL,OAAOtL,OAAP,CAAe,KAAf,CAAJ,EAA2B;AAC9BsL,oBAAOtL,OAAP,CAAe,eAAf,EAAgC,IAAhC;AACD;AACF;AACF;AACF;;;;;;mBAnIkByK,gB;;;;;;;;;;;;;;;;KCJAc,Q;AACnB,qBAAY7U,MAAZ,EAAoB;AAAA;;AAClB,UAAKA,MAAL,GAAcA,MAAd;AACD;;;;+BAES;AACR,WAAI3F,YAAY,KAAK2F,MAAL,CAAY3F,SAA5B;AACA,WAAI8G,SAAS,KAAKnB,MAAL,CAAY5E,QAAZ,CAAqB6F,CAArB,CAAuBE,MAAvB,EAAb;AACA,WAAI2T,eAAe3T,OAAO,CAAP,CAAnB;AACA,WAAI4T,aAAa5T,OAAO,CAAP,CAAjB;AACA,cAAO;AACL6T,mBAAU;AACR3X,iBAAMhD,UAAUE,KAAV,CAAgBiE,cAAhB,EADE;AAERyW,qBAAU5a,UAAUE,KAAV,CAAgB8Y,WAAhB,EAFF;AAGRlS,mBAAQ,CAAC2T,aAAarQ,OAAb,EAAD,EAAyBsQ,WAAWtQ,OAAX,EAAzB;AAHA,UADL;AAMLtG,eAAM9D,UAAU8D;AANX,QAAP;AAQD;;;+BAES;AACR,WAAI7D,UAAU,KAAK0F,MAAL,CAAY1F,OAA1B;AACA,WAAI4a,gBAAgB,SAAhBA,aAAgB,CAAS9V,GAAT,EAAc0J,GAAd,EAAmB;AACrC;AACA,aAAI1J,IAAI2P,OAAJ,CAAY,GAAZ,MAAqB,CAAzB,EAA4B;AAC1B,kBAAOpT,SAAP;AACD;AACD,aAAIrB,QAAQ4a,aAAR,KAA0BvZ,SAA9B,EAAyC;AACvC,kBAAOrB,QAAQ4a,aAAR,CAAsB9V,GAAtB,EAA2B0J,GAA3B,CAAP;AACD;AACD,gBAAOA,GAAP;AACD,QATD;;AAWA,WAAI3K,OAAO,KAAKgX,OAAL,EAAX;AACA,cAAOC,KAAKC,SAAL,CAAelX,IAAf,EAAqB+W,aAArB,EAAoC,CAApC,CAAP;AACD;;;;;;mBAnCkBL,Q;;;;;;;;;;;;;;ACArB;;;;KAEqBS,W;AACnB,wBAAYtV,MAAZ,EAAoB;AAAA;;AAAA;;AAClB,UAAKA,MAAL,GAAcA,MAAd;AACA,UAAKuV,WAAL,GAAmB,GAAnB;AACA,UAAKC,OAAL,GAAe,EAAf;AACA,UAAKC,aAAL,GAAqB,CAArB;;AAEA;AACA,UAAK1Y,QAAL;;AAEAjC,OAAEoX,QAAF,EAAYwD,OAAZ,CAAoB,UAACzI,CAAD,EAAO;AACzB,WAAIA,EAAE0I,OAAF,KAAc,EAAlB,EAAsB;AACpB,aAAI1I,EAAE2I,OAAF,IAAa3I,EAAE4I,OAAnB,EAA4B;AAC1B,eAAI,CAAC5I,EAAE3H,QAAP,EAAiB;AACf;AACA,mBAAKwQ,IAAL;AACD,YAHD,MAIK;AACH;AACA,mBAAKC,IAAL;AACD;AACF;AACF;AACF,MAbD;AAcD;;;;4BAEM;AACL;AACA,WAAI,KAAKN,aAAL,IAAsB,CAA1B,EAA6B;AAC3B,gBAAO,KAAP;AACD;AACD,YAAKA,aAAL,IAAsB,CAAtB;AACA,YAAKO,QAAL,CAAc,KAAKP,aAAnB;AACD;;;4BAEM;AACL;AACA,WAAI,KAAKA,aAAL,IAAsB,KAAKD,OAAL,CAAarY,MAAb,GAAsB,CAAhD,EAAmD;AACjD,gBAAO,KAAP;AACD;AACD,YAAKsY,aAAL,IAAsB,CAAtB;AACA,YAAKO,QAAL,CAAc,KAAKP,aAAnB;AACD;;;gCAEU;AACT,WAAItX,OAAOiX,KAAKa,KAAL,CAAW,KAAKjW,MAAL,CAAY7E,QAAZ,CAAqB4X,OAArB,EAAX,CAAX;;AAEA;AACA;AACA,WAAI,KAAK0C,aAAL,GAAqB,CAArB,GAAyB,KAAKD,OAAL,CAAarY,MAA1C,EAAkD;AAChD,cAAKqY,OAAL,CAAaxG,MAAb,CAAoB,KAAKyG,aAAL,GAAqB,CAAzC,EAA4C,KAAKD,OAAL,CAAarY,MAAb,GAAsB,CAAlE;AACD;;AAED,YAAKqY,OAAL,CAAarM,IAAb,CAAkBhL,IAAlB;;AAEA;AACA,WAAI,KAAKqX,OAAL,CAAarY,MAAb,GAAsB,KAAKoY,WAA/B,EAA4C;AAC1C,cAAKC,OAAL,CAAaU,KAAb;AACD;;AAED;AACA,YAAKT,aAAL,GAAqB,KAAKD,OAAL,CAAarY,MAAb,GAAsB,CAA3C;AACD;;;8BAEQ2R,K,EAAO;AACd,WAAIqH,QAAQ,KAAKX,OAAL,CAAa1G,KAAb,CAAZ;AACA,WAAI3Q,OAAOgY,MAAMhY,IAAjB;AACA,WAAI9D,YAAY,KAAK2F,MAAL,CAAY3F,SAA5B;;AAEA;AACA,YAAK,IAAI+b,WAAW,CAApB,EAAuBA,WAAWjY,KAAKhB,MAAvC,EAA+CiZ,UAA/C,EAA2D;AACzD,aAAIxZ,OAAOuB,KAAKiY,QAAL,CAAX;AACA;AACA,aAAI,CAAC/b,UAAU8D,IAAV,CAAeiY,QAAf,CAAL,EAA+B;AAC7B/b,qBAAU8D,IAAV,CAAeiY,QAAf,IAA2BxZ,IAA3B;AACD,UAFD,MAGK;AACH,gBAAK,IAAI4J,WAAW,CAApB,EAAuBA,WAAW5J,KAAKmC,UAAL,CAAgB5B,MAAlD,EAA0DqJ,UAA1D,EAAsE;AACpE,iBAAIxH,OAAOpC,KAAKmC,UAAL,CAAgByH,QAAhB,CAAX;AACA;AACA,iBAAI,CAACnM,UAAU8D,IAAV,CAAeiY,QAAf,EAAyBrX,UAAzB,CAAoCyH,QAApC,CAAL,EAAoD;AAClDnM,yBAAU8D,IAAV,CAAeiY,QAAf,EAAyBrX,UAAzB,CAAoCyH,QAApC,IAAgDxH,IAAhD;AACD,cAFD,MAGK;AACH;AACA,mBAAIC,OAAO5E,UAAU8D,IAAV,CAAeiY,QAAf,EAAyBrX,UAAzB,CAAoCyH,QAApC,EAA8CvH,IAAzD;AACA,oBAAK,IAAIoX,UAAU,CAAnB,EAAsBA,UAAUrX,KAAKC,IAAL,CAAU9B,MAA1C,EAAkDkZ,SAAlD,EAA6D;AAC3D,qBAAIjX,MAAMJ,KAAKC,IAAL,CAAUoX,OAAV,CAAV;AACA,qBAAI,CAACpX,KAAKoX,OAAL,CAAL,EAAoB;AAClBpX,wBAAKoX,OAAL,IAAgBjX,GAAhB;AACD,kBAFD,MAGK;AACHH,wBAAKoX,OAAL,EAAchZ,IAAd,GAAqB+B,IAAI/B,IAAzB;AACA4B,wBAAKoX,OAAL,EAAcvN,GAAd,GAAoB1J,IAAI0J,GAAxB;AACA7J,wBAAKoX,OAAL,EAAcnN,IAAd,GAAqB9J,IAAI8J,IAAzB;AACD;AACF;AACF;AACF;AACF;;AAED7O,mBAAU8D,IAAV,CAAeiY,QAAf,EAAyBzZ,QAAzB,GAAoC,IAApC;AACD;AACD,YAAKqD,MAAL,CAAYhD,MAAZ,CAAmB,KAAnB,EAA0B,IAA1B;AACD;;;;;;mBAxGkBsY,W;;;;;;ACFrB;AACA,8BAA6B,yBAAyB,wBAAwB,YAAY,aAAa,gCAAgC,cAAc,wCAAwC,cAAc,+EAA+E,cAAc,wHAAwH,cAAc,gBAAgB,cAAc,qDAAqD,cAAc,6EAA6E,cAAc,8EAA8E,cAAc,2EAA2E,cAAc,8MAA8M,cAAc,gBAAgB,cAAc,0CAA0C,UAAU,cAAc,gBAAgB,cAAc,wCAAwC,UAAU,cAAc,gBAAgB,cAAc,cAAc,UAAU,cAAc,EAAE,aAAa,SAAS,IAAI,q0BAAq0B,qCAAqC,G","file":"TweenTime.Editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"draggable-number.js\"), require(\"spectrum-colorpicker\"), require(\"file-saver\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"signals\", \"lodash\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\", \"file-saver\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"draggable-number.js\"), require(\"spectrum-colorpicker\"), require(\"file-saver\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"signals\"], root[\"_\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"], root[\"saveAs\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_34__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 43b0210609f5a1ede61b\n **/","var tpl_timeline = require('./templates/timeline.tpl.html');\nimport Timeline from './graph/Timeline';\nimport PropertiesEditor from './editor/PropertiesEditor';\nimport EditorMenu from './editor/EditorMenu';\nimport EditorControls from './editor/EditorControls';\nimport SelectionManager from './editor/SelectionManager';\nimport Exporter from './editor/Exporter';\nimport UndoManager from './editor/UndoManager';\nlet Signals = require('js-signals');\n\nclass Editor {\n  constructor(tweenTime, options = {}) {\n    this.tweenTime = tweenTime;\n    this.options = options;\n    this.timer = this.tweenTime.timer;\n    this.lastTime = -1;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\n    this.forceItemsRender = this.forceItemsRender.bind(this);\n\n    var el = options.el || $('body');\n    this.el = el;\n    this.$timeline = $(tpl_timeline());\n    el.append(this.$timeline);\n    el.addClass('has-editor');\n\n    this.selectionManager = new SelectionManager(this.tweenTime);\n    this.exporter = new Exporter(this);\n    this.timeline = new Timeline(this, options);\n\n    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\n    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n    if (this.options.onMenuCreated !== undefined) {\n      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'), this);\n    }\n\n    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n    this.undoManager = new UndoManager(this);\n\n    // Public events.\n    this.onSelect = new Signals.Signal();\n    var self = this;\n    this.selectionManager.onSelect.add(function(selection, addToSelection) {\n      // Propagate the event.\n      self.onSelect.dispatch(selection, addToSelection);\n    });\n\n    // Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true;\n    window.dispatchEvent(new Event('resize'));\n    window.requestAnimationFrame(() => this.update());\n  }\n\n  forceItemsRender() {\n    this.timeline._isDirty = true;\n  }\n\n  select(item, addToSelection = false) {\n    this.selectionManager.select(item, addToSelection);\n  }\n\n  getSelection() {\n    return this.selectionManager.getSelection();\n  }\n\n  onKeyAdded() {\n    this.undoManager.addState();\n    this.render(false, false, true);\n  }\n\n  onKeyRemoved(item) {\n    this.selectionManager.removeItem(item._id);\n    this.undoManager.addState();\n    if (this.selectionManager.selection.length) {\n      this.selectionManager.triggerSelect();\n    }\n    this.render(false, false, true);\n  }\n\n  render(time = false, time_changed = false, force = false) {\n    let time2 = time;\n    if (time2 === false) {\n      time2 = this.timer.time[0];\n    }\n    if (force) {\n      this.timeline._isDirty = true;\n    }\n    this.timeline.render(time2, time_changed);\n    this.controls.render(time2, time_changed);\n    this.propertiesEditor.render(time2, time_changed);\n  }\n\n  update() {\n    var time = this.timer.time[0];\n    var time_changed = this.lastTime === time ? false : true;\n\n    this.render(time, time_changed);\n    this.lastTime = this.timer.time[0];\n    window.requestAnimationFrame(() => this.update());\n  }\n}\n\nmodule.exports = Editor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.js\n **/","export default class Utils {\n  static formatMinutes(d) {\n    // convert milliseconds to seconds\n    let seconds = d / 1000;\n    let hours = Math.floor(seconds / 3600);\n    let minutes = Math.floor((seconds - hours * 3600) / 60);\n    seconds = seconds - minutes * 60;\n    let output = seconds + 's';\n    if (minutes) {\n      output = minutes + 'm ' + output;\n    }\n    if (hours) {\n      output = hours + 'h ' + output;\n    }\n    return output;\n  }\n\n  static getClosestTime(data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) {\n    if (timer) {\n      var timer_time = timer.getCurrentTime() / 1000;\n      if (Math.abs(timer_time - time) <= tolerance) {\n        return timer_time;\n      }\n    }\n\n    if (objectId || property_name) {\n      for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        // Don't match item with itself, but allow property to match item start/end.\n        if (item.id !== objectId || property_name) {\n          // First check start & end.\n          if (Math.abs(item.start - time) <= tolerance) {\n            return item.start;\n          }\n\n          if (Math.abs(item.end - time) <= tolerance) {\n            return item.end;\n          }\n        }\n\n        // Test properties keys\n        for (var j = 0; j < item.properties.length; j++) {\n          var prop = item.properties[j];\n\n          // Don't match property with itself.\n          if (prop.keys && (item.id !== objectId || prop.name !== property_name)) {\n            for (var k = 0; k < prop.keys.length; k++) {\n              var key = prop.keys[k];\n              if (Math.abs(key.time - time) <= tolerance) {\n                return key.time;\n              }\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  static getPreviousKey(keys, time) {\n    var prevKey = false;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (key.time < time) {\n        prevKey = key;\n      }\n      else {\n        return prevKey;\n      }\n    }\n    return prevKey;\n  }\n\n  static sortKeys(keys) {\n    var compare = function(a, b) {\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    return keys.sort(compare);\n  }\n\n  static guid() {\n    var s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"signals\",\"commonjs2\":\"signals\",\"amd\":\"signals\"}\n ** module id = 3\n ** module chunks = 0 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 6\n ** module chunks = 0 1\n **/","let d3 = require('d3');\n\nimport Utils from '../core/Utils';\nimport Header from './Header';\nimport TimeIndicator from './TimeIndicator';\nimport Items from './Items';\nimport KeysPreview from './KeysPreview';\nimport Properties from './Properties';\nimport Keys from './Keys';\nimport Errors from './Errors';\nimport Selection from './Selection';\n\nexport default class Timeline {\n  constructor(editor, options) {\n    this.editor = editor;\n    this.tweenTime = this.editor.tweenTime;\n    this.timer = this.tweenTime.timer;\n    this.selectionManager = this.editor.selectionManager;\n\n    this._isDirty = true;\n    this.timer = this.tweenTime.timer;\n    this.currentTime = this.timer.time; // used in timeindicator.\n\n    this.onUpdate = this.onUpdate.bind(this);\n\n    // Make the domain cover 20% of the totalDuation by default.\n    this.initialDomain = [];\n    this.initialDomain[0] = options.domainStart || 0;\n    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\n    // Adapt time to be greater or equal to domainStart.\n    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n      this.timer.time[0] = this.initialDomain[0];\n    }\n\n    var margin = {top: 6, right: 20, bottom: 0, left: 265};\n    this.margin = margin;\n\n    var width = window.innerWidth - margin.left - margin.right;\n    var height = 270 - margin.top - margin.bottom - 40;\n    this.lineHeight = 20;\n    this.label_position_x = -margin.left + 20;\n\n    this.x = d3.time.scale()\n      .domain(this.initialDomain)\n      .range([0, width]);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient('top')\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__main').append('svg')\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', 600);\n\n    this.svgContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n    this.svgContainerTime = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',0)');\n\n    this.linesContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n    this.header = new Header(editor, this.timer, this.initialDomain, this.tweenTime, width, margin);\n    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\n    this.selection = new Selection(this, this.svg, margin);\n\n    this.items = new Items(this, this.linesContainer);\n    this.items.onUpdate.add(this.onUpdate);\n    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\n    this.properties = new Properties(this);\n    this.properties.onKeyAdded.add((newKey, keyContainer) => {\n      this._isDirty = true;\n      // render the timeline directly so that we can directly select\n      // the new key with it's domElement.\n      this.render(0, false);\n      this.keys.selectNewKey(newKey, keyContainer);\n    });\n    this.errors = new Errors(this);\n    this.keys = new Keys(this);\n    this.keys.onKeyUpdated.add(() => {\n      this.onUpdate();\n    });\n\n    this.xAxisGrid = d3.svg.axis()\n      .scale(this.x)\n      .ticks(100)\n      .tickSize(-this.items.dy, 0)\n      .tickFormat('')\n      .orient('top');\n\n    this.xGrid = this.svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr('transform', 'translate(0,' + margin.top + ')')\n      .call(this.xAxisGrid);\n\n    this.xAxisElement = this.svgContainer.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', 'translate(0,' + margin.top + ')')\n      .call(this.xAxis);\n\n    this.header.onBrush.add((extent) => {\n      this.x.domain(extent);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this._isDirty = true;\n    });\n\n    // First render\n    window.requestAnimationFrame(() => {this.render();});\n\n    window.onresize = () => {\n      var INNER_WIDTH = window.innerWidth;\n      var width2 = INNER_WIDTH - margin.left - margin.right;\n      this.svg.attr('width', width2 + margin.left + margin.right);\n      this.svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH);\n      this.x.range([0, width2]);\n\n      this._isDirty = true;\n      this.header.resize(INNER_WIDTH);\n      this.render();\n    };\n  }\n\n  onUpdate() {\n    this.editor.render(false, false, true);\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var domainLength;\n      // Update current domain when playing to keep time indicator in view.\n      var margin_ms = 16;\n      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] += domainLength - margin_ms;\n        this.initialDomain[1] += domainLength - margin_ms;\n        this.header.setDomain(this.initialDomain);\n      }\n      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] = this.timer.getCurrentTime();\n        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n        this.header.setDomain(this.initialDomain);\n      }\n    }\n\n    if (this._isDirty || time_changed) {\n      // Render header and time indicator everytime the time changed.\n      this.header.render();\n      this.timeIndicator.render();\n    }\n\n    if (this._isDirty) {\n      // No need to call this on each frames, but only on brush, key drag, ...\n      var bar = this.items.render();\n      this.keysPreview.render(bar);\n      var properties = this.properties.render(bar);\n      this.errors.render(properties);\n      this.keys.render(properties);\n      this._isDirty = false;\n\n      // Adapt the timeline height.\n      var height = Math.max(this.items.dy + 30, 230);\n      this.xAxis.tickSize(-height, 0);\n      this.xAxisGrid.tickSize(-height, 0);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this.svg.attr('height', height);\n      this.timeIndicator.updateHeight(height);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.js\n **/","let d3 = require('d3');\n\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Header {\n  constructor(editor, timer, initialDomain, tweenTime, width, margin) {\n    this.timer = timer;\n    this.initialDomain = initialDomain;\n    this.tweenTime = tweenTime;\n\n    this.onBrush = new Signals.Signal();\n    this.margin = {top: 10, right: 20, bottom: 0, left: margin.left};\n    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\n    this.currentTime = this.timer.time;\n    this.x = d3.time.scale().range([0, width]);\n    this.x.domain([0, this.timer.totalDuration]);\n\n    // Same as this.x from timeline\n    this.xDisplayed = d3.time.scale().range([0, width]);\n    this.xDisplayed.domain(this.initialDomain);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient('top')\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__header').append('svg')\n      .attr('width', width + this.margin.left + this.margin.right)\n      .attr('height', 56);\n\n    this.svgContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')');\n\n    this.createBrushHandle();\n    this.createTimeHandle();\n    this.timer.durationChanged.add(this.onDurationChanged);\n  }\n\n  adaptDomainToDuration(domain, seconds) {\n    var ms = seconds * 1000;\n    var new_domain = [domain[0], domain[1]];\n    // Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms);\n    new_domain[1] = Math.min(new_domain[1], ms);\n    // Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0);\n\n    return new_domain;\n  }\n\n  setDomain() {\n    this.brush.x(this.x).extent(this.initialDomain);\n    this.svgContainer.select('.brush').call(this.brush);\n    // Same as onBrush\n    this.onBrush.dispatch(this.initialDomain);\n    this.render();\n    this.xDisplayed.domain(this.initialDomain);\n  }\n\n  onDurationChanged(seconds) {\n    this.x.domain([0, this.timer.totalDuration]);\n    this.xAxisElement.call(this.xAxis);\n    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n    this.setDomain(this.initialDomain);\n  }\n\n  createBrushHandle() {\n    this.xAxisElement = this.svgContainer.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', 'translate(0,' + (this.margin.top + 7) + ')')\n      .call(this.xAxis);\n\n    var onBrush = () => {\n      var extent0 = this.brush.extent();\n      // Get domain as milliseconds and not date.\n      var start = extent0[0].getTime();\n      var end = extent0[1].getTime();\n      // Set the initial domain.\n      this.initialDomain[0] = start;\n      this.initialDomain[1] = end;\n      this.setDomain(this.initialDomain);\n    };\n\n    this.brush = d3.svg.brush()\n      .x(this.x)\n      .extent(this.initialDomain)\n      .on('brush', onBrush);\n\n    this.gBrush = this.svgContainer.append('g')\n      .attr('class', 'brush')\n      .call(this.brush)\n      .selectAll('rect')\n      .attr('height', 20);\n  }\n\n  render() {\n    var timeSelection = this.svgContainer.selectAll('.time-indicator');\n    timeSelection.attr('transform', 'translate(' + this.xDisplayed(this.currentTime[0]) + ', 25)');\n  }\n\n  createTimeHandle() {\n    var self = this;\n\n    var dragTimeMove = function() {\n      var event = d3.event.sourceEvent;\n      event.stopPropagation();\n      var tweenTime = self.tweenTime;\n      var event_x = event.x !== undefined ? event.x : event.clientX;\n      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n      dx = dx.getTime();\n      dx = Math.max(0, dx);\n\n      var timeMatch = false;\n      if (event.shiftKey) {\n        var time = dx / 1000;\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant', false, false, 0.3);\n        if (timeMatch !== false) {\n          timeMatch = timeMatch * 1000;\n        }\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n      self.timer.seek([timeMatch]);\n    };\n\n    var dragTime = d3.behavior.drag()\n      .origin(function(d) {\n        return d;\n      })\n      .on('drag', dragTimeMove);\n\n    var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\n    timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', function() {\n        var mouse = d3.mouse(this);\n        var dx = self.xDisplayed.invert(mouse[0]);\n        dx = dx.getTime();\n        dx = Math.max(0, dx);\n        self.timer.seek([dx]);\n      });\n\n    var timeGrp = timeSelection.enter().append('g')\n      .attr('class', 'time-indicator')\n      .attr('transform', 'translate(-0.5,' + 30 + ')')\n      .call(dragTime);\n\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\n    // Mask time indicator\n    // todo: remove the mask.\n    this.svgContainer.append('rect')\n      .attr('class', 'graph-mask')\n      .attr('x', -self.margin.left)\n      .attr('y', -self.margin.top)\n      .attr('width', self.margin.left - 5)\n      .attr('height', self.height);\n  }\n\n  resize(width) {\n    let width2 = width - this.margin.left - this.margin.right;\n    this.svg.attr('width', width2 + this.margin.left + this.margin.right);\n\n    this.x.range([0, width2]);\n    this.xDisplayed.range([0, width2]);\n    this.xAxisElement.call(this.xAxis);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 9\n ** module chunks = 1\n **/","export default class TimeIndicator {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n    this.timeGrp = this.timeSelection.enter().append('svg')\n      .attr('class', 'time-indicator timeline__right-mask')\n      .attr('width', window.innerWidth - this.timeline.label_position_x)\n      .attr('height', 442);\n\n    this.timeSelection = this.timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', 0)\n      .attr('y', -this.timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    this.timeSelection = this.container.selectAll('.time-indicator rect');\n  }\n\n  updateHeight(height) {\n    this.timeGrp.attr('height', height);\n    this.timeSelection.attr('height', height + this.timeline.margin.top + 5);\n  }\n\n  render() {\n    this.timeSelection.attr('transform', 'translate(' + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + ',0)');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class Items {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.dy = 10 + this.timeline.margin.top;\n    this.onUpdate = new Signals.Signal();\n  }\n\n  render() {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var selectBar = function() {\n      var data = d3.select(this).datum();\n      self.timeline.selectionManager.select(data);\n    };\n\n    var dragmove = function(d) {\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var diff = dx - d.start;\n      d.start += diff;\n      d.end += diff;\n      if (d.properties) {\n        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n          var prop = d.properties[prop_key];\n          for (var i = 0; i < prop.keys.length; i++) {\n            var key = prop.keys[i];\n            key.time += diff;\n          }\n        }\n      }\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveLeft = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.start;\n        timeMatch = d.start + diff;\n      }\n      d.start = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveRight = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.end;\n        timeMatch = d.end + diff;\n      }\n      d.end = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragLeft = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmoveLeft);\n\n    var dragRight = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmoveRight);\n\n    var drag = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmove);\n\n    var bar_border = 1;\n    var bar = this.container.selectAll('.line-grp')\n      .data(this.timeline.tweenTime.data, (d) => {return d.id;});\n\n    var barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp');\n\n    var barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar')\n      // Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', () => {return Utils.guid();})\n      .attr('y', 3)\n      .attr('height', 14);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar-anchor bar-anchor--left')\n      .attr('y', 2)\n      .attr('height', 16)\n      .attr('width', 6)\n      .call(dragLeft);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar-anchor bar-anchor--right')\n      .attr('y', 2)\n      .attr('height', 16)\n      .attr('width', 6)\n      .call(dragRight);\n\n    self.dy = 10 + this.timeline.margin.top;\n    bar.attr('transform', function(d) {\n      var y = self.dy;\n      self.dy += self.timeline.lineHeight;\n      if (!d.collapsed) {\n        var numProperties = 0;\n        if (d.properties) {\n          var visibleProperties = _.filter(d.properties, function(prop) {\n            return prop.keys.length;\n          });\n          numProperties = visibleProperties.length;\n        }\n        self.dy += numProperties * self.timeline.lineHeight;\n      }\n      return 'translate(0,' + y + ')';\n    });\n\n    var barWithStartAndEnd = function(d) {\n      if (d.start !== undefined && d.end !== undefined) {\n        return true;\n      }\n      return false;\n    };\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.start * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.end * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.start * 1000) + bar_border;})\n      .attr('width', function(d) {\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n      })\n      .call(drag)\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append('text')\n      .attr('class', 'line-label')\n      .attr('x', self.timeline.label_position_x + 10)\n      .attr('y', 16)\n      .text((d) => {return d.label;})\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append('text')\n      .attr('class', 'line__toggle')\n      .attr('x', self.timeline.label_position_x - 10)\n      .attr('y', 16)\n      .on('click', function(d) {\n        d.collapsed = !d.collapsed;\n        self.onUpdate.dispatch();\n      });\n\n    bar.selectAll('.line__toggle').text(function(d) {\n      if (d.collapsed) {\n        return '';\n      }\n      return '';\n    });\n\n    barEnter.append('line')\n      .attr('class', 'line-separator')\n      .attr('x1', -self.timeline.margin.left)\n      .attr('x2', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('y1', self.timeline.lineHeight)\n      .attr('y2', self.timeline.lineHeight);\n\n    bar.exit().remove();\n\n    return bar;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.js\n **/","let d3 = require('d3');\n\nexport default class KeysPreview {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      }\n\n      return [];\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\n    properties.enter()\n      .append('svg')\n      .attr('class', 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var setItemStyle = function() {\n      var item = d3.select(this.parentNode.parentNode);\n      var bar_data = item.datum();\n      if (bar_data.collapsed === true) {\n        return '';\n      }\n      // Show only when item is collapsed\n      return 'display: none;';\n    };\n\n    properties.selectAll('.key--preview')\n      .attr('style', setItemStyle);\n\n    var keyValue = function(d) {\n      return d.keys;\n    };\n    var keyKey = function(d) {\n      return d.time;\n    };\n    var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\n    keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr('style', setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\n    keys.attr('transform', function(d) {\n      let dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      let dy = 11;\n      return 'translate(' + dx + ',' + dy + ')';\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Properties {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyAdded = new Signals.Signal();\n    this.subGrp = false;\n  }\n\n  render(bar) {\n    var self = this;\n    var editor = this.timeline.editor;\n    var core = editor.tweenTime;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties.filter((prop) => {return prop.keys.length;});\n      }\n      return [];\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.line-item').data(propVal, propKey);\n    var subGrp = properties.enter()\n      .append('g')\n      .attr('class', 'line-item');\n\n    // Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp;\n\n    properties.attr('transform', function(d, i) {\n      let sub_height = (i + 1) * self.timeline.lineHeight;\n      return 'translate(0,' + sub_height + ')';\n    });\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on('dblclick', function(d) {\n        var lineObject = this.parentNode.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        var def = d.default ? d.default : 0;\n        var mouse = d3.mouse(this);\n        var dx = self.timeline.x.invert(mouse[0]);\n        dx = dx.getTime() / 1000;\n        var prevKey = Utils.getPreviousKey(d.keys, dx);\n        // set the value to match the previous key if we found one\n        if (prevKey) {\n          def = prevKey.val;\n        }\n        d._line = lineValue;\n        var newKey = {\n          time: dx,\n          val: def,\n          _property: d\n        };\n        if (core.options.defaultEase) {\n          newKey.ease = core.options.defaultEase;\n        }\n\n        d.keys.push(newKey);\n        // Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys);\n        lineValue._isDirty = true;\n\n        lineValue._isDirty = true;\n        var keyContainer = this.parentNode;\n        self.onKeyAdded.dispatch(newKey, keyContainer);\n      });\n\n    // Mask\n    subGrp.append('svg')\n      .attr('class', 'line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00');\n\n    subGrp.append('text')\n      .attr('class', 'line-label line-label--small')\n      .attr('x', self.timeline.label_position_x + 10)\n      .attr('y', 15)\n      .text(function(d) {\n        return d.name;\n      });\n\n    subGrp.append('line')\n      .attr('class', 'line-separator--secondary')\n      .attr('x1', -self.timeline.margin.left)\n      .attr('x2', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('y1', self.timeline.lineHeight)\n      .attr('y2', self.timeline.lineHeight);\n\n    bar.selectAll('.line-item').attr('display', function() {\n      var lineObject = this.parentNode;\n      var lineValue = d3.select(lineObject).datum();\n      if (!lineValue.collapsed) {\n        return 'block';\n      }\n      return 'none';\n    });\n\n    properties.exit().remove();\n\n    return properties;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\nlet _ = require('lodash');\n\nexport default class Keys {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyUpdated = new Signals.Signal();\n  }\n\n  selectNewKey(data, container) {\n    var self = this;\n    var key = d3.select(container).selectAll('.key').filter(function(item) {\n      return item.time === data.time;\n    });\n    if (key.length) {\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      key.classed('key--selected', true);\n      key = key[0][0];\n      data._dom = key;\n      self.timeline.selectionManager.select(data);\n    }\n  }\n\n  render(properties) {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var dragmove = function(d) {\n      var sourceEvent = d3.event.sourceEvent;\n      var propertyObject = this.parentNode;\n      var lineObject = propertyObject.parentNode.parentNode;\n      var propertyData = d3.select(propertyObject).datum();\n      var lineData = d3.select(lineObject).datum();\n      var key_data = d;\n\n      var currentDomainStart = self.timeline.x.domain()[0];\n      var mouse = d3.mouse(this);\n      var old_time = d.time;\n      var dx = self.timeline.x.invert(mouse[0]);\n      dx = dx.getTime();\n      dx = dx / 1000 - currentDomainStart / 1000;\n      dx = d.time + dx;\n\n      var selection = self.timeline.selectionManager.getSelection();\n      var selection_first_time = false;\n      var selection_last_time = false;\n      if (selection.length) {\n        selection_first_time = selection[0].time;\n        selection_last_time = selection[selection.length - 1].time;\n      }\n\n      selection = _.filter(selection, (item) => {return _.isEqual(item, key_data) === false;});\n\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n\n      d.time = timeMatch;\n      // Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys);\n      var time_offset = d.time - old_time;\n\n      var updateKeyItem = function(item) {\n        var property = item._property;\n        property._line._isDirty = true;\n        property.keys = Utils.sortKeys(property.keys);\n      };\n\n      var key_scale = false;\n      var is_first = false;\n      if (selection.length) {\n        if (sourceEvent.altKey && selection_first_time !== false && selection_last_time !== false) {\n          is_first = selection_first_time === old_time;\n          if (is_first) {\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n          }\n          else {\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n          }\n        }\n\n        for (var i = 0; i < selection.length; i++) {\n          var data = selection[i];\n          if (key_scale === false) {\n            data.time += time_offset;\n          }\n          else {\n            if (is_first) {\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n            }\n            else {\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n            }\n          }\n          updateKeyItem(data);\n        }\n      }\n\n      lineData._isDirty = true;\n      self.onKeyUpdated.dispatch();\n    };\n\n    var propValue = function(d) {\n      return d.keys;\n    };\n    var propKey = function(d) {\n      if (!d._id) {\n        d._id = Utils.guid();\n      }\n      return d._id;\n    };\n    var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\n    // selectKey is triggered by dragstart event\n    var selectKey = function() {\n      var event = d3.event;\n      // with dragstart event the mousevent is is inside the event.sourcEvent\n      if (event.sourceEvent) {\n        event = event.sourceEvent;\n      }\n\n      var addToSelection = event.shiftKey;\n      // if element is already selectionned and we are on\n      // the dragstart event, we stop there since it is already selected.\n      if (d3.event.type && d3.event.type === 'dragstart') {\n        if (d3.select(this).classed('key--selected')) {\n          return;\n        }\n      }\n      var key_data = d3.select(this).datum();\n\n      // Also keep a reference to the key dom element.\n      key_data._dom = this;\n\n      self.timeline.selectionManager.select(key_data, addToSelection);\n    };\n\n    var dragend = function() {\n      self.timeline.editor.undoManager.addState();\n    };\n\n    var drag = d3.behavior.drag()\n      .origin((d) => {return d;})\n      .on('drag', dragmove)\n      .on('dragstart', selectKey)\n      .on('dragend', dragend);\n\n    var key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      // Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) => {return d._id;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n      .call(drag);\n\n    properties.selectAll('.key')\n      .attr('class', function(d) {\n        var cls = 'key';\n        // keep selected class\n        if (d3.select(this).classed('key--selected')) {\n          cls += ' key--selected';\n        }\n        if (d.ease) {\n          var ease = d.ease.split('.');\n          if (ease.length === 2) {\n            cls += ' ' + ease[1];\n          }\n        }\n        else {\n          // If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut';\n        }\n        return cls;\n      });\n\n    var grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_in = key_grp.append('g')\n      .attr('class', 'ease-in');\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_out = key_grp.append('g')\n      .attr('class', 'ease-out');\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n\n    var grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout');\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5);\n\n    keys.attr('transform', function(d) {\n      var dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      var dy = 10;\n      return 'translate(' + dx + ',' + dy + ')';\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.js\n **/","export default class Errors {\n  constructor(timeline) {\n    this.timeline = timeline;\n  }\n\n  render(properties) {\n    var self = this;\n    var subGrp = self.timeline.properties.subGrp;\n    var propertiesWithError = function(d) {\n      return d.errors !== undefined;\n    };\n    // use insert with :first-child to prepend.\n    subGrp.insert('svg', ':first-child')\n      .attr('class', 'line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var errorsValue = function(d) {\n      return d.errors;\n    };\n    var errorTime = function(d) {\n      return d.time;\n    };\n\n    var errors = properties.filter(propertiesWithError)\n      .select('.line-item__errors').selectAll('.error')\n      .data(errorsValue, errorTime);\n\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1');\n\n    properties.selectAll('.error').attr('x', function(d) {\n      var dx;\n      dx = self.timeline.x(d.time * 1000);\n      return dx;\n    });\n\n    errors.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.js\n **/","let d3 = require('d3');\n\nexport default class Selection {\n  constructor(timeline, svg, margin) {\n    this.timeline = timeline;\n    this.svg = svg;\n    this.margin = margin;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n\n  onMouseUp() {\n    this.svg.selectAll('.selection').remove();\n    // Enable again the default browser text selection.\n    // Disabled this because is was causing problems with text higlhlighting\n    // $('body').css({\n    //   'user-select': 'all'\n    // });\n  }\n\n  init() {\n    var self = this;\n    this.svg.on('mousedown', function() {\n      var p = d3.mouse(this);\n      // Only init selection if we click on the timeline and not on the labels.\n      if (p[0] < self.timeline.margin.left) {\n        return;\n      }\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        });\n      // Unselect items.\n      self.timeline.selectionManager.reset();\n      // Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      });\n    }).on('mousemove', function() {\n      var s = self.svg.select('.selection');\n      if (s.empty()) {\n        return;\n      }\n      var p = d3.mouse(this);\n      var d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      };\n      // Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0]);\n\n      var move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      };\n      if (move.x < 1 || move.x * 2 < d.width) {\n        d.x = p[0];\n        d.width -= move.x;\n      }\n      else {\n        d.width = move.x;\n      }\n\n      if (move.y < 1 || move.y * 2 < d.height) {\n        d.y = p[1];\n        d.height -= move.y;\n      }\n      else {\n        d.height = move.y;\n      }\n\n      s.attr(d);\n\n      // remove margins from selection\n      d.x -= self.margin.left;\n      var key_width = 6;\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\n      // deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      self.timeline.selectionManager.reset();\n      var selection = [];\n      d3.selectAll('.key').each( function(state_data) {\n        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n        var key_data = d3.select(this).datum();\n\n        // Also keep a reference to the key dom element.\n        key_data._dom = this;\n\n        if (item_data.collapsed !== true) {\n          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n          var y = itemBounding.top - containerBounding.top;\n          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n            // use or condition for top and bottom\n            if (y >= d.y && y <= d.y + d.height || y + 10 >= d.y && y + 10 <= d.y + d.height) {\n              d3.select(this).classed('key--selected', true);\n\n              selection.push(key_data);\n            }\n          }\n        }\n      });\n      self.timeline.selectionManager.select(selection);\n    });\n    // Attach the mouseup event to window so that it catch it event if\n    // mouseup happen outside of the browser window.\n    $(window).on('mouseup', this.onMouseUp);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.js\n **/","import 'jquery';\nlet Signals = require('js-signals');\nimport Property from '../editor/Property';\n\nlet tpl_propertiesEditor = require('./../templates/propertiesEditor.tpl.html');\n\nexport default class PropertiesEditor {\n  constructor(editor) {\n    this.editor = editor;\n\n    this.render = this.render.bind(this);\n    this.addProperty = this.addProperty.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = this.editor.timeline;\n    this.timer = this.editor.timer;\n    this.selectionManager = editor.selectionManager;\n\n    this.$el = $(tpl_propertiesEditor());\n    this.$container = this.$el.find('.properties-editor__main');\n    // todo: rename keyAdded to updated\n    this.keyAdded = new Signals.Signal();\n    this.keyRemoved = new Signals.Signal();\n    this.items = [];\n\n    this.parentElement = editor.el;\n    // Close properties by default.\n    this.parentElement.addClass('properties-is-closed');\n    // Add the properties editor to the document.\n    this.parentElement.append(this.$el);\n\n    this.selectionManager.onSelect.add(this.onSelect);\n\n    // Stop event propagation to no play by accident.\n    this.$el.keypress(function(e) {\n      return e.stopPropagation();\n    });\n  }\n\n  onKeyAdded() {\n    this.keyAdded.dispatch();\n  }\n\n  onSelect(data = false) {\n    this.items.forEach((item) => {item.remove();});\n    this.items = [];\n    this.$container.empty();\n    if (data instanceof Array) {\n      for (var i = 0; i < data.length; i++) {\n        this.addProperty(data[i]);\n      }\n    }\n    else {\n      this.addProperty(data);\n    }\n\n    // When selecting anything, automatically display the properties editor.\n    if (this.items.length) {\n      this.parentElement.removeClass('properties-is-closed');\n    }\n  }\n\n  addProperty(data) {\n    var prop = new Property(this.editor, this.$container, data);\n    prop.keyAdded.add(this.onKeyAdded);\n    this.items.push(prop);\n  }\n\n  render(time, time_changed) {\n    if (!time_changed) {\n      return;\n    }\n    this.items.forEach((prop) => {prop.update();});\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 18\n ** module chunks = 1\n **/","let Signals = require('js-signals');\nimport PropertyNumber from './PropertyNumber';\nimport PropertyColor from './PropertyColor';\nimport PropertyTween from './PropertyTween';\n\nexport default class Property {\n  constructor(editor, $el, data) {\n    this.editor = editor;\n    this.$el = $el;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = editor.timeline;\n    this.timer = editor.timer;\n    this.selectionManager = editor.selectionManager;\n    this.keyAdded = new Signals.Signal();\n    this.items = [];\n    this.numberProp = false;\n    this.tweenProp = false;\n\n    var key_val = false;\n    // var propertyObject = false;\n    var propertyData = false;\n    // var lineObject = false;\n    var lineData = false;\n\n    // For keys the _property data should be defined.\n    if (data._property) {\n      propertyData = data._property;\n      lineData = propertyData._line;\n      key_val = data;\n    }\n\n    // Check if we selected a main item.\n    if (data.id) {\n      lineData = data;\n    }\n\n    // data and propertyData are defined on key select.\n    var property_name = false;\n    if (propertyData) {\n      property_name = propertyData.name;\n    }\n\n    // Get the property container.\n    var $container = this.getContainer(lineData);\n\n    var $tween_container = $container;\n\n    // Basic data, loop through properties.\n    for (var key in lineData.properties) {\n      if (lineData.properties.hasOwnProperty(key)) {\n        var instance_prop = lineData.properties[key];\n        // show all properties or only 1 if we selected a key.\n        if (!property_name || instance_prop.name === property_name) {\n          var $grp_container = this.getGroupContainer(instance_prop, $container);\n          var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n          this.items.push(numberProp);\n          if (instance_prop.name === property_name) {\n            $tween_container = $grp_container;\n          }\n\n          if (property_name) {\n            // Add tween select if we are editing a key, so only if there is property_name.\n            var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData);\n            this.items.push(tweenProp);\n          }\n        }\n      }\n    }\n  }\n\n  onKeyAdded() {\n    // propagate the event.\n    this.keyAdded.dispatch();\n  }\n\n  getGroupContainer(instance_prop, $container) {\n    var $existing;\n    var $grp;\n    var grp_class;\n    if (!instance_prop.group) {\n      grp_class = 'property-grp--general';\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      }\n\n      $grp = this.createGroupContainer(grp_class);\n      $container.append($grp);\n      return $grp;\n    }\n    // Replace all spaces to dash and make class lowercase\n    var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n    grp_class = 'property-grp--' + group_name;\n    $existing = $container.find('.' + grp_class);\n    if ($existing.length) {\n      return $existing;\n    }\n    $grp = this.createGroupContainer(grp_class, instance_prop.group);\n    $container.append($grp);\n    return $grp;\n  }\n\n  createGroupContainer(grp_class, label = false) {\n    var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n    if (label) {\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n    }\n    return $grp;\n  }\n\n  getContainer(lineData) {\n    var $container = false;\n    if (lineData.id) {\n      $container = $('#property--' + lineData.id);\n      if (!$container.length) {\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n        this.$el.append($container);\n        if (lineData.label) {\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n        }\n      }\n    }\n    if ($container === false) {\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n      this.$el.append($container);\n    }\n    return $container;\n  }\n\n  remove() {\n    this.items.forEach((item) => {item.remove();});\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n\n    delete this.editor;\n    delete this.$el;\n\n    delete this.timeline;\n    delete this.timer;\n    delete this.selectionManager;\n    delete this.keyAdded;\n    delete this.items;\n    delete this.numberProp;\n    delete this.tweenProp;\n  }\n\n  addNumberProperty(instance_prop, lineData, key_val, $container) {\n    var PropClass = PropertyNumber;\n    if (instance_prop.type && instance_prop.type === 'color') {\n      PropClass = PropertyColor;\n    }\n    var prop = new PropClass(instance_prop, lineData, this.editor, key_val);\n    prop.keyAdded.add(this.onKeyAdded);\n    $container.append(prop.$el);\n    return prop;\n  }\n\n  addTweenProperty(instance_prop, lineData, key_val, $container, propertyData) {\n    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(tween.$el);\n\n    // Add a remove key button\n    tween.$el.find('[data-action-remove]').click((e) => {\n      e.preventDefault();\n      var index = propertyData.keys.indexOf(key_val);\n      if (index > -1) {\n        propertyData.keys.splice(index, 1);\n        if (key_val._dom) {\n          this.editor.propertiesEditor.keyRemoved.dispatch(key_val);\n        }\n        lineData._isDirty = true;\n      }\n    });\n    return tween;\n  }\n\n  update() {\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.js\n **/","import 'jquery';\nimport PropertyBase from './PropertyBase';\nlet DraggableNumber = require('draggable-number.js');\n\nlet tpl_property = require('../templates/propertyNumber.tpl.html');\n\nexport default class PropertyNumber extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  getInputVal() {\n    return parseFloat(this.$el.find('input').val());\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    var onChangeEnd = () => {\n      this.editor.undoManager.addState();\n    };\n\n    var draggableOptions = {\n      changeCallback: () => this.onInputChange(),\n      endCallback: () => onChangeEnd()\n    };\n    // Set min & max if they are defined.\n    if ('min' in this.instance_property) {\n      draggableOptions.min = this.instance_property.min;\n    }\n    if ('max' in this.instance_property) {\n      draggableOptions.max = this.instance_property.max;\n    }\n\n    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n    $input.data('draggable', draggable);\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.render();\n    if (this.$input.data('draggable')) {\n      this.$input.data('draggable').destroy();\n    }\n\n    delete this.$input;\n    delete this.$el;\n  }\n\n  update() {\n    super.render();\n    var val = this.getCurrentVal();\n    var draggable = this.$input.data('draggable');\n\n    if (draggable) {\n      draggable.set(val.toFixed(3));\n    }\n    else {\n      this.$input.val(val.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.js\n **/","let Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class PropertyBase {\n  // @instance_property: The current property on the data object.\n  // @lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n\n    // this.update = this.update.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onKeyClick = this.onKeyClick.bind(this);\n\n    this.timer = editor.timer;\n    this.keyAdded = new Signals.Signal();\n    this.render();\n\n    this.$key = this.$el.find('.property__key');\n  }\n\n  onKeyClick(e) {\n    e.preventDefault();\n    var currentValue = this.getCurrentVal();\n    this.addKey(currentValue);\n  }\n\n  getInputVal() {\n    return this.$el.find('input').val();\n  }\n\n  getCurrentVal() {\n    var val = this.instance_property.val;\n    var prop_name = this.instance_property.name;\n\n    // if we selected a key simply return it's value\n    if (this.key_val) {\n      return this.key_val.val;\n    }\n    if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n      return this.lineData.values[prop_name];\n    }\n    return val;\n  }\n\n  onInputChange() {\n    var current_value = this.getInputVal();\n    var currentTime = this.timer.getCurrentTime() / 1000;\n\n    // if we selected a key simply get the time from it.\n    if (this.key_val) {\n      currentTime = this.key_val.time;\n    }\n\n    if (this.instance_property.keys && this.instance_property.keys.length) {\n      // Add a new key if there is no other key at same time\n      var current_key = _.find(this.instance_property.keys, (key) => key.time === currentTime);\n\n      if (current_key) {\n        // if there is a key update it\n        current_key.val = current_value;\n      }\n      else {\n        // add a new key\n        this.addKey(current_value);\n      }\n    }\n    else {\n      // There is no keys, simply update the property value (for data saving)\n      this.instance_property.val = current_value;\n      // Also directly set the lineData value.\n      this.lineData.values[this.instance_property.name] = current_value;\n      // Simply update the custom object with new values.\n      if (this.lineData.object) {\n        currentTime = this.timer.getCurrentTime() / 1000;\n        // Set the property on the instance object.\n        this.lineData.object.update(currentTime - this.lineData.start);\n      }\n    }\n\n    // Something changed, make the lineData dirty to rebuild things. d\n    this.lineData._isDirty = true;\n  }\n\n  getCurrentKey() {\n    var time = this.timer.getCurrentTime() / 1000;\n    if (!this.instance_property || !this.instance_property.keys) {\n      return false;\n    }\n    if (this.instance_property.keys.length === 0) {\n      return false;\n    }\n    for (var i = 0; i < this.instance_property.keys.length; i++) {\n      var key = this.instance_property.keys[i];\n      if (key.time === time) {\n        return key;\n      }\n    }\n    return false;\n  }\n\n  addKey(val) {\n    var core = this.editor.tweenTime;\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    var key = {\n      time: currentTime,\n      val: val\n    };\n    if (core.options.defaultEase) {\n      key.ease = core.options.defaultEase;\n    }\n    this.instance_property.keys.push(key);\n    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n    this.lineData._isDirty = true;\n    this.keyAdded.dispatch();\n  }\n\n  render() {\n    // current values are defined in @lineData.values\n    this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n  }\n\n  update() {\n    var key = this.getCurrentKey();\n    this.$key.toggleClass('property__key--active', key);\n  }\n\n  remove() {\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n\n    delete this.timer;\n    delete this.keyAdded;\n    delete this.$key;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"draggable-number.js\",\"commonjs2\":\"draggable-number.js\",\"amd\":\"DraggableNumber\"}\n ** module id = 22\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyNumber.tpl.html\n ** module id = 23\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/hogan.js\n ** module id = 24\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/compiler.js\n ** module id = 25\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/primoz/work/responsiveads/TweenTime/TweenTime/~/hogan.js/lib/template.js\n ** module id = 26\n ** module chunks = 1\n **/","import 'jquery';\nrequire('spectrum');\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyColor.tpl.html');\n\nexport default class PropertyColor extends PropertyBase {\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: 'rgb',\n      change: () => {\n        this.editor.undoManager.addState();\n      },\n      move: (color) => {\n        if (color._a === 1) {\n          $input.val(color.toHexString());\n        }\n        else {\n          $input.val(color.toRgbString());\n        }\n\n        this.onInputChange();\n      }\n    });\n\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.remove();\n    this.$el.find('input').spectrum('destroy');\n    delete this.$el;\n    delete this.$input;\n  }\n\n  update() {\n    super.update();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n    this.$input.spectrum('set', val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"spectrum\",\"commonjs\":\"spectrum-colorpicker\",\"commonjs2\":\"spectrum-colorpicker\",\"amd\":\"spectrum\"}\n ** module id = 28\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyColor.tpl.html\n ** module id = 29\n ** module chunks = 1\n **/","import 'jquery';\n\nlet tpl_property = require('../templates/propertyTween.tpl.html');\n\nexport default class PropertyTween {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.onChange = this.onChange.bind(this);\n\n    this.timer = this.editor.timer;\n    this.$time = false;\n    this.$el = false;\n    this.render();\n  }\n\n  remove() {\n    delete this.$el;\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n    delete this.timeline;\n\n    delete this.timer;\n    delete this.$time;\n  }\n\n  render() {\n    var self = this;\n    if (!this.key_val.ease) {\n      this.key_val.ease = 'Quad.easeOut';\n    }\n    var data = {\n      id: this.instance_property.name + '_tween',\n      val: this.key_val.ease,\n      time: this.key_val.time.toFixed(3),\n      options: ['Linear.easeNone'],\n      selected: function() {\n        if (this.toString() === self.key_val.ease) {\n          return 'selected';\n        }\n        return '';\n      }\n    };\n\n    var tweens = ['Quad', 'Cubic', 'Quart', 'Quint'];\n    for (var i = 0; i < tweens.length; i++) {\n      var tween = tweens[i];\n      data.options.push(tween + '.easeOut');\n      data.options.push(tween + '.easeIn');\n      data.options.push(tween + '.easeInOut');\n    }\n\n    this.$el = $(tpl_property(data));\n    this.$time = this.$el.find('.property__key-time strong');\n    this.$time.keypress((e) => {\n      if (e.charCode === 13) {\n        // Enter\n        e.preventDefault();\n        this.$time.blur();\n        this.updateKeyTime(this.$time.text());\n      }\n    });\n\n    this.$time.on('click', () => document.execCommand('selectAll', false, null));\n    this.$el.find('select').change(this.onChange);\n  }\n\n  updateKeyTime(time) {\n    let time2 = parseFloat(time);\n    if (isNaN(time2)) {\n      time2 = this.key_val.time;\n    }\n    this.$time.text(time2);\n    this.key_val.time = time2;\n    this.onChange();\n  }\n\n  onChange() {\n    var ease = this.$el.find('select').val();\n    this.key_val.ease = ease;\n    this.editor.undoManager.addState();\n    this.lineData._isDirty = true;\n    this.timeline._isDirty = true;\n  }\n\n  update() {\n    // todo: use mustache instead...\n    this.$time.html(this.key_val.time.toFixed(3));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyTween.tpl.html\n ** module id = 31\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertiesEditor.tpl.html\n ** module id = 32\n ** module chunks = 1\n **/","let saveAs = require('file-saver').saveAs || require('file-saver');\n\nexport default class EditorMenu {\n  constructor(tweenTime, $timeline, editor) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.editor = editor;\n    this.timer = this.tweenTime.timer;\n    this.initExport();\n    this.initToggle();\n  }\n\n  initToggle() {\n    var parentElement = this.editor.el;\n    var timelineClosed = false;\n    var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n    $toggleLink.click((e) => {\n      e.preventDefault();\n      timelineClosed = !timelineClosed;\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n      parentElement.toggleClass('timeline-is-closed', timelineClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n    var $toggleLinkSide = $('.properties-editor', parentElement).find('[data-action=\"toggle\"]');\n    $toggleLinkSide.click((e) => {\n      var propertiesClosed;\n      e.preventDefault();\n      propertiesClosed = !parentElement.hasClass('properties-is-closed');\n      parentElement.toggleClass('properties-is-closed', propertiesClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n  }\n\n  initExport() {\n    var exporter = this.editor.exporter;\n    this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n      e.preventDefault();\n      var data = exporter.getJSON();\n      var blob = new Blob([data], {\n        type: 'text/json;charset=utf-8'\n      });\n      saveAs(blob, 'data.json');\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_34__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"saveAs\",\"commonjs\":\"file-saver\",\"commonjs2\":\"file-saver\",\"amd\":\"file-saver\"}\n ** module id = 34\n ** module chunks = 1\n **/","export default class EditorControls {\n  constructor(tweenTime, $timeline) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.timer = this.tweenTime.timer;\n    this.$time = this.$timeline.find('.control--time');\n    this.$time_end = this.$timeline.find('.control--time-end');\n    this.initControls();\n    this.$time_end.val(this.tweenTime.timer.getDuration());\n\n    $(document).keypress((e) => {\n      if (e.charCode === 32) {\n        // Space\n        this.playPause();\n      }\n    });\n  }\n\n  playPause() {\n    var $play_pause;\n    this.timer.toggle();\n    $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n    $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n  }\n\n  initControls() {\n    var $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.click((e) => {\n      e.preventDefault();\n      this.playPause();\n    });\n    var $bt_first = this.$timeline.find('.control--first');\n    $bt_first.click((e) => {\n      e.preventDefault();\n      this.timer.seek([0]);\n    });\n    var $bt_last = this.$timeline.find('.control--last');\n    $bt_last.click((e) => {\n      e.preventDefault();\n      var total = this.tweenTime.getTotalDuration();\n      this.timer.seek([total * 1000]);\n    });\n    this.$time.change(() => {\n      var seconds = parseFloat(this.$time.val(), 10) * 1000;\n      this.timer.seek([seconds]);\n    });\n    this.$time_end.change(() => {\n      var seconds = parseFloat(this.$time_end.val(), 10);\n      this.timer.setDuration(seconds);\n    });\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var seconds = time / 1000;\n      this.$time.val(seconds.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\n\nexport default class SelectionManager {\n  constructor(tweenTime) {\n    this.tweenTime = tweenTime;\n    this.selection = [];\n    this.onSelect = new Signals.Signal();\n  }\n\n  select(item, addToSelection = false) {\n    this.addDataRelations();\n\n    if (!addToSelection) {\n      this.selection = [];\n    }\n    if (item instanceof Array) {\n      for (var i = 0; i < item.length; i++) {\n        var el = item[i];\n        this.selection.push(el);\n      }\n    }\n    else {\n      this.selection.push(item);\n    }\n\n    this.removeDuplicates();\n    this.highlightItems();\n    this.sortSelection();\n    this.onSelect.dispatch(this.selection, addToSelection);\n  }\n\n  getSelection() {\n    return this.selection;\n  }\n\n  removeDuplicates() {\n    var result = [];\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var found = false;\n      for (var j = 0; j < result.length; j++) {\n        var item2 = result[j];\n        if (_.isEqual(item, item2)) {\n          found = true;\n          break;\n        }\n      }\n      if (found === false) {\n        result.push(item);\n      }\n    }\n    this.selection = result;\n  }\n\n  removeItem(item) {\n    // If we pass an _id then search for the item and remove it.\n    if (typeof item === 'string') {\n      let itemObj = _.find(this.selection, function(el) {\n        return el._id === item;\n      });\n      if (itemObj) {\n        return this.removeItem(itemObj);\n      }\n    }\n\n    // Remove the object if it exists in the selection.\n    var index = this.selection.indexOf(item);\n    if (index > -1) {\n      this.selection.splice(index, 1);\n    }\n    this.triggerSelect();\n  }\n\n  sortSelection() {\n    var compare = function(a, b) {\n      if (!a.time || !b.time) {\n        return 0;\n      }\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    this.selection = this.selection.sort(compare);\n  }\n\n  reset() {\n    this.selection = [];\n    this.highlightItems();\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  triggerSelect() {\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  addDataRelations() {\n    // We need to add some parent references in main data object.\n    // Add a _property reference to each keys.\n    // Add a _line property for each references.\n    var data = this.tweenTime.data;\n    for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n      var line = data[lineIndex];\n      for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n        var property = line.properties[propIndex];\n        property._line = line;\n        for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n          var key = property.keys[keyIndex];\n          key._property = property;\n        }\n      }\n    }\n  }\n\n  highlightItems() {\n    d3.selectAll('.bar--selected').classed('bar--selected', false);\n    d3.selectAll('.key--selected').classed('key--selected', false);\n\n    for (var i = 0; i < this.selection.length; i++) {\n      var data = this.selection[i];\n      if (data._dom) {\n        var d3item = d3.select(data._dom);\n        if (d3item.classed('bar')) {\n          d3item.classed('bar--selected', true);\n        }\n        else if (d3item.classed('key')) {\n          d3item.classed('key--selected', true);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.js\n **/","export default class Exporter {\n  constructor(editor) {\n    this.editor = editor;\n  }\n\n  getData() {\n    var tweenTime = this.editor.tweenTime;\n    var domain = this.editor.timeline.x.domain();\n    var domain_start = domain[0];\n    var domain_end = domain[1];\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    };\n  }\n\n  getJSON() {\n    var options = this.editor.options;\n    var json_replacer = function(key, val) {\n      // Disable all private properies from TweenMax/TimelineMax\n      if (key.indexOf('_') === 0) {\n        return undefined;\n      }\n      if (options.json_replacer !== undefined) {\n        return options.json_replacer(key, val);\n      }\n      return val;\n    };\n\n    var data = this.getData();\n    return JSON.stringify(data, json_replacer, 2);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.js\n **/","import 'jquery';\n\nexport default class UndoManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.history_max = 100;\n    this.history = [];\n    this.current_index = 0;\n\n    // Add the initial state\n    this.addState();\n\n    $(document).keydown((e) => {\n      if (e.keyCode === 90) {\n        if (e.metaKey || e.ctrlKey) {\n          if (!e.shiftKey) {\n            // (command | ctrl) Z\n            this.undo();\n          }\n          else {\n            // (command | ctrl) shift Z\n            this.redo();\n          }\n        }\n      }\n    });\n  }\n\n  undo() {\n    // If there is no more history return\n    if (this.current_index <= 0) {\n      return false;\n    }\n    this.current_index -= 1;\n    this.setState(this.current_index);\n  }\n\n  redo() {\n    // Stop if there is no more things.\n    if (this.current_index >= this.history.length - 1) {\n      return false;\n    }\n    this.current_index += 1;\n    this.setState(this.current_index);\n  }\n\n  addState() {\n    var data = JSON.parse(this.editor.exporter.getJSON());\n\n    // if we did some undo before and then edit something,\n    // we want to remove all actions past the current index first.\n    if (this.current_index + 1 < this.history.length) {\n      this.history.splice(this.current_index + 1, this.history.length - 1);\n    }\n\n    this.history.push(data);\n\n    // Keep history to a max size by removing the first element if needed.\n    if (this.history.length > this.history_max) {\n      this.history.shift();\n    }\n\n    // Set the current index\n    this.current_index = this.history.length - 1;\n  }\n\n  setState(index) {\n    var state = this.history[index];\n    var data = state.data;\n    var tweenTime = this.editor.tweenTime;\n\n    // naively copy keys and values from previous state\n    for (var item_key = 0; item_key < data.length; item_key++) {\n      var item = data[item_key];\n      // if item is not defined copy it\n      if (!tweenTime.data[item_key]) {\n        tweenTime.data[item_key] = item;\n      }\n      else {\n        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n          var prop = item.properties[prop_key];\n          // if property is not defined copy it\n          if (!tweenTime.data[item_key].properties[prop_key]) {\n            tweenTime.data[item_key].properties[prop_key] = prop;\n          }\n          else {\n            // set property keys\n            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n              var key = prop.keys[key_key];\n              if (!keys[key_key]) {\n                keys[key_key] = key;\n              }\n              else {\n                keys[key_key].time = key.time;\n                keys[key_key].val = key.val;\n                keys[key_key].ease = key.ease;\n              }\n            }\n          }\n        }\n      }\n\n      tweenTime.data[item_key]._isDirty = true;\n    }\n    this.editor.render(false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-backward\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-forward\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-backward\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-forward\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/timeline.tpl.html\n ** module id = 39\n ** module chunks = 1\n **/"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap c647f3c89c050d79dea0?f9c9","webpack:///./Editor.js","webpack:///./core/Utils.js?8d2f","webpack:///external {\"root\":\"signals\",\"commonjs\":\"signals\",\"commonjs2\":\"signals\",\"amd\":\"signals\"}?9038","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./graph/Timeline.js","webpack:///./graph/Header.js","webpack:///external \"d3\"","webpack:///./graph/TimeIndicator.js","webpack:///./graph/Items.js","webpack:///./graph/KeysPreview.js","webpack:///./graph/Properties.js","webpack:///./graph/Keys.js","webpack:///./graph/Errors.js","webpack:///./graph/Selection.js","webpack:///./editor/PropertiesEditor.js","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./editor/Property.js","webpack:///./editor/PropertyNumber.js","webpack:///./editor/PropertyBase.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"draggable-number.js\",\"commonjs2\":\"draggable-number.js\",\"amd\":\"DraggableNumber\"}","webpack:///./templates/propertyNumber.tpl.html","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/hogan.js","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/compiler.js","webpack:////Users/poly/ws/TweenTime/~/hogan.js/lib/template.js","webpack:///./editor/PropertyColor.js","webpack:///external {\"root\":\"spectrum\",\"commonjs\":\"spectrum-colorpicker\",\"commonjs2\":\"spectrum-colorpicker\",\"amd\":\"spectrum\"}","webpack:///./templates/propertyColor.tpl.html","webpack:///./editor/PropertyTween.js","webpack:///./templates/propertyTween.tpl.html","webpack:///./editor/PropertyEvent.js","webpack:///./templates/propertyEvent.tpl.html","webpack:///./editor/PropertyFooter.js","webpack:///./templates/propertyFooter.tpl.html","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./editor/EditorMenu.js","webpack:///external {\"root\":\"saveAs\",\"commonjs\":\"file-saver\",\"commonjs2\":\"file-saver\",\"amd\":\"file-saver\"}","webpack:///./editor/EditorControls.js","webpack:///./editor/SelectionManager.js","webpack:///./editor/Exporter.js","webpack:///./editor/UndoManager.js","webpack:///./templates/timeline.tpl.html"],"names":[],"mappings":"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mDAAmD,cAAc,uBAAuB,0BAA0B,qCAAqC,6BAA6B,gBAAgB,cAAc,sCAAsC,0BAA0B,6CAA6C,2BAA2B,aAAa,cAAc,cAAc,UAAU,cAAc,EAAE,aAAa,SAAS,IAAI,4GAA4G,IAAI,+BAA+B,OAAO,0CAA0C,IAAI,uCAAuC,KAAK,qBAAqB,qCAAqC,G;;;;;;ACDv4B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB,mBAAkB;;AAElB;AACA;AACA,sBAAqB,iCAAiC;AACtD;AACA;AACA;;AAEA;AACA;AACA,8BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAqC,mBAAmB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,sBAAqB,SAAS;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gBAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,wBAAuB;AACvB,sFAAqF;AACrF;AACA;AACA;AACA,4BAA2B;AAC3B,4BAA2B;AAC3B;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,kDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oCAAmC,OAAO;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAwB;;AAExB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAAyD,iBAAiB;AAC1E;AACA,cAAa,0BAA0B;AACvC;;AAEA;AACA;AACA;AACA,0CAAyC,iGAAiG;AAC1I;AACA,wBAAuB,2BAA2B;AAClD;;AAEA;AACA,cAAa,wBAAwB,uCAAuC,qCAAqC;AACjH;;AAEA;AACA;AACA;AACA,oBAAmB,mBAAmB,cAAc;AACpD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,aAAa,0BAA0B;AAC9D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B,uFAAsF;AACtF;AACA;;AAEA;AACA;AACA;AACA,sGAAqG;AACrG,sDAAqD;AACrD;AACA,yBAAwB,EAAE,SAAS;AACnC,MAAK;;AAEL;AACA,2GAA0G;AAC1G;AACA,0BAAyB;AACzB,MAAK;;AAEL;AACA;AACA,kBAAiB,YAAY,oBAAoB;AACjD;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,kBAAiB,QAAQ;AACzB;AACA;AACA;AACA,6DAA4D;AAC5D;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA,8FAA6F;AAC7F,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL,OAAM;;AAEN;AACA;;AAEA;AACA,4FAA2F;AAC3F;;AAEA;AACA,4BAA2B;AAC3B;;AAEA;AACA;AACA,yCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACtaD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C,WAAW,EAAE;;AAE1D;AACA;;AAEA;AACA;;AAEA;AACA,+CAA8C;AAC9C,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAkC,QAAQ;AAC1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","file":"TweenTime.Editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"draggable-number.js\"), require(\"spectrum-colorpicker\"), require(\"file-saver\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"signals\", \"lodash\", \"d3\", \"jquery\", \"DraggableNumber\", \"spectrum\", \"file-saver\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"signals\"), require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"draggable-number.js\"), require(\"spectrum-colorpicker\"), require(\"file-saver\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"signals\"], root[\"_\"], root[\"d3\"], root[\"$\"], root[\"DraggableNumber\"], root[\"spectrum\"], root[\"saveAs\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_42__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c647f3c89c050d79dea0\n **/","var tpl_timeline = require('./templates/timeline.tpl.html');\nimport Timeline from './graph/Timeline';\nimport PropertiesEditor from './editor/PropertiesEditor';\nimport EditorMenu from './editor/EditorMenu';\nimport EditorControls from './editor/EditorControls';\nimport SelectionManager from './editor/SelectionManager';\nimport Exporter from './editor/Exporter';\nimport UndoManager from './editor/UndoManager';\nlet Signals = require('js-signals');\n\nclass Editor {\n  constructor(tweenTime, options = {}) {\n    this.tweenTime = tweenTime;\n    this.options = options;\n    this.timer = this.tweenTime.timer;\n    this.lastTime = -1;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\n    var el = options.el || $('body');\n    this.el = el;\n    this.$timeline = $(tpl_timeline());\n    el.append(this.$timeline);\n    el.addClass('has-editor');\n\n    this.selectionManager = new SelectionManager(this.tweenTime);\n    this.exporter = new Exporter(this);\n    this.timeline = new Timeline(this, options);\n\n    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\n    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n    if (this.options.onMenuCreated !== undefined) {\n      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'), this);\n    }\n\n    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n    this.undoManager = new UndoManager(this);\n\n    // Public events.\n    this.onSelect = new Signals.Signal();\n    var self = this;\n    this.selectionManager.onSelect.add(function(selection, addToSelection) {\n      // Propagate the event.\n      self.onSelect.dispatch(selection, addToSelection);\n    });\n\n    // Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true;\n    window.dispatchEvent(new Event('resize'));\n    window.requestAnimationFrame(() => this.update());\n  }\n\n  select(item, addToSelection = false) {\n    this.selectionManager.select(item, addToSelection);\n  }\n\n  getSelection() {\n    return this.selectionManager.getSelection();\n  }\n\n  onKeyAdded() {\n    this.undoManager.addState();\n    this.render(false, false, true);\n  }\n\n  onKeyRemoved(item) {\n    this.selectionManager.removeItem(item._id);\n    this.undoManager.addState();\n    if (this.selectionManager.selection.length) {\n      this.selectionManager.triggerSelect();\n    }\n    this.render(false, false, true);\n  }\n\n  render(time = false, time_changed = false, force = false) {\n    let time2 = time;\n    if (time2 === false) {\n      time2 = this.timer.time[0];\n    }\n    if (force) {\n      this.timeline._isDirty = true;\n    }\n    this.timeline.render(time2, time_changed);\n    this.controls.render(time2, time_changed);\n    this.propertiesEditor.render(time2, time_changed);\n  }\n\n  update() {\n    var time = this.timer.time[0];\n    var time_changed = this.lastTime === time ? false : true;\n\n    this.render(time, time_changed);\n    this.lastTime = this.timer.time[0];\n    window.requestAnimationFrame(() => this.update());\n  }\n}\n\nmodule.exports = Editor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.js\n **/","export default class Utils {\n  static formatMinutes(d) {\n    // convert milliseconds to seconds\n    let seconds = d / 1000;\n    let hours = Math.floor(seconds / 3600);\n    let minutes = Math.floor((seconds - hours * 3600) / 60);\n    seconds = seconds - minutes * 60;\n    let output = seconds + 's';\n    if (minutes) {\n      output = minutes + 'm ' + output;\n    }\n    if (hours) {\n      output = hours + 'h ' + output;\n    }\n    return output;\n  }\n\n  static getClosestTime(data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) {\n    if (timer) {\n      var timer_time = timer.getCurrentTime() / 1000;\n      if (Math.abs(timer_time - time) <= tolerance) {\n        return timer_time;\n      }\n    }\n\n    if (objectId || property_name) {\n      for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        // Don't match item with itself, but allow property to match item start/end.\n        if (item.id !== objectId || property_name) {\n          // First check start & end.\n          if (Math.abs(item.start - time) <= tolerance) {\n            return item.start;\n          }\n\n          if (Math.abs(item.end - time) <= tolerance) {\n            return item.end;\n          }\n        }\n\n        // Test properties keys\n        for (var j = 0; j < item.properties.length; j++) {\n          var prop = item.properties[j];\n\n          // Don't match property with itself.\n          if (prop.keys && (item.id !== objectId || prop.name !== property_name)) {\n            for (var k = 0; k < prop.keys.length; k++) {\n              var key = prop.keys[k];\n              if (Math.abs(key.time - time) <= tolerance) {\n                return key.time;\n              }\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  static getPreviousKey(keys, time) {\n    var prevKey = false;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (key.time < time) {\n        prevKey = key;\n      }\n      else {\n        return prevKey;\n      }\n    }\n    return prevKey;\n  }\n\n  static sortKeys(keys) {\n    var compare = function(a, b) {\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    return keys.sort(compare);\n  }\n\n  static guid() {\n    var s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    };\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"signals\",\"commonjs2\":\"signals\",\"amd\":\"signals\"}\n ** module id = 5\n ** module chunks = 0 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 10\n ** module chunks = 0 1\n **/","let d3 = require('d3');\n\nimport Utils from '../core/Utils';\nimport Header from './Header';\nimport TimeIndicator from './TimeIndicator';\nimport Items from './Items';\nimport KeysPreview from './KeysPreview';\nimport Properties from './Properties';\nimport Keys from './Keys';\nimport Errors from './Errors';\nimport Selection from './Selection';\n\nexport default class Timeline {\n  constructor(editor, options) {\n    this.editor = editor;\n    this.tweenTime = this.editor.tweenTime;\n    this.timer = this.tweenTime.timer;\n    this.selectionManager = this.editor.selectionManager;\n\n    this._isDirty = true;\n    this.timer = this.tweenTime.timer;\n    this.currentTime = this.timer.time; // used in timeindicator.\n\n    this.onUpdate = this.onUpdate.bind(this);\n\n    // Make the domain cover 20% of the totalDuation by default.\n    this.initialDomain = [];\n    this.initialDomain[0] = options.domainStart || 0;\n    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\n    // Adapt time to be greater or equal to domainStart.\n    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n      this.timer.time[0] = this.initialDomain[0];\n    }\n\n    var margin = {top: 6, right: 20, bottom: 0, left: 265};\n    this.margin = margin;\n\n    var width = window.innerWidth - margin.left - margin.right;\n    var height = 270 - margin.top - margin.bottom - 40;\n    this.lineHeight = 20;\n    this.label_position_x = -margin.left + 20;\n\n    this.x = d3.time.scale()\n      .domain(this.initialDomain)\n      .range([0, width]);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient('top')\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__main').append('svg')\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', 600);\n\n    this.svgContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n    this.svgContainerTime = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',0)');\n\n    this.linesContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n    this.header = new Header(editor, this.timer, this.initialDomain, this.tweenTime, width, margin);\n    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\n    this.selection = new Selection(this, this.svg, margin);\n\n    this.items = new Items(this, this.linesContainer);\n    this.items.onUpdate.add(this.onUpdate);\n    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\n    this.properties = new Properties(this);\n    this.properties.onKeyAdded.add((newKey, keyContainer) => {\n      this._isDirty = true;\n      // render the timeline directly so that we can directly select\n      // the new key with it's domElement.\n      this.render(0, false);\n      this.keys.selectNewKey(newKey, keyContainer);\n    });\n    this.errors = new Errors(this);\n    this.keys = new Keys(this);\n    this.keys.onKeyUpdated.add(() => {\n      this.onUpdate();\n    });\n\n    this.xAxisGrid = d3.svg.axis()\n      .scale(this.x)\n      .ticks(100)\n      .tickSize(-this.items.dy, 0)\n      .tickFormat('')\n      .orient('top');\n\n    this.xGrid = this.svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr('transform', 'translate(0,' + margin.top + ')')\n      .call(this.xAxisGrid);\n\n    this.xAxisElement = this.svgContainer.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', 'translate(0,' + margin.top + ')')\n      .call(this.xAxis);\n\n    this.header.onBrush.add((extent) => {\n      this.x.domain(extent);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this._isDirty = true;\n    });\n\n    // First render\n    window.requestAnimationFrame(() => {this.render();});\n\n    window.onresize = () => {\n      var INNER_WIDTH = window.innerWidth;\n      var width2 = INNER_WIDTH - margin.left - margin.right;\n      this.svg.attr('width', width2 + margin.left + margin.right);\n      this.svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH);\n      this.x.range([0, width2]);\n\n      this._isDirty = true;\n      this.header.resize(INNER_WIDTH);\n      this.render();\n    };\n  }\n\n  onUpdate() {\n    this.editor.render(false, false, true);\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var domainLength;\n      // Update current domain when playing to keep time indicator in view.\n      var margin_ms = 16;\n      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] += domainLength - margin_ms;\n        this.initialDomain[1] += domainLength - margin_ms;\n        this.header.setDomain(this.initialDomain);\n      }\n      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n        domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] = this.timer.getCurrentTime();\n        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n        this.header.setDomain(this.initialDomain);\n      }\n    }\n\n    if (this._isDirty || time_changed) {\n      // Render header and time indicator everytime the time changed.\n      this.header.render();\n      this.timeIndicator.render();\n    }\n\n    if (this._isDirty) {\n      // No need to call this on each frames, but only on brush, key drag, ...\n      var bar = this.items.render();\n      this.keysPreview.render(bar);\n      var properties = this.properties.render(bar);\n      this.errors.render(properties);\n      this.keys.render(properties);\n      this._isDirty = false;\n\n      // Adapt the timeline height.\n      var height = Math.max(this.items.dy + 30, 230);\n      this.xAxis.tickSize(-height, 0);\n      this.xAxisGrid.tickSize(-height, 0);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this.svg.attr('height', height);\n      this.timeIndicator.updateHeight(height);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.js\n **/","let d3 = require('d3');\n\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Header {\n  constructor(editor, timer, initialDomain, tweenTime, width, margin) {\n    this.timer = timer;\n    this.initialDomain = initialDomain;\n    this.tweenTime = tweenTime;\n\n    this.onBrush = new Signals.Signal();\n    this.margin = {top: 10, right: 20, bottom: 0, left: margin.left};\n    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\n    this.currentTime = this.timer.time;\n    this.x = d3.time.scale().range([0, width]);\n    this.x.domain([0, this.timer.totalDuration]);\n\n    // Same as this.x from timeline\n    this.xDisplayed = d3.time.scale().range([0, width]);\n    this.xDisplayed.domain(this.initialDomain);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient('top')\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select(editor.$timeline.get(0)).select('.timeline__header').append('svg')\n      .attr('width', width + this.margin.left + this.margin.right)\n      .attr('height', 56);\n\n    this.svgContainer = this.svg.append('g')\n      .attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')');\n\n    this.createBrushHandle();\n    this.createTimeHandle();\n    this.timer.durationChanged.add(this.onDurationChanged.bind(this));\n  }\n\n  adaptDomainToDuration(domain, seconds) {\n    var ms = seconds * 1000;\n    var new_domain = [domain[0], domain[1]];\n    // Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms);\n    new_domain[1] = Math.min(new_domain[1], ms);\n    // Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0);\n\n    return new_domain;\n  }\n\n  setDomain() {\n    this.brush.x(this.x).extent(this.initialDomain);\n    this.svgContainer.select('.brush').call(this.brush);\n    // Same as onBrush\n    this.onBrush.dispatch(this.initialDomain);\n    this.render();\n    this.xDisplayed.domain(this.initialDomain);\n  }\n\n  onDurationChanged(seconds) {\n    this.x.domain([0, this.timer.totalDuration]);\n    this.xAxisElement.call(this.xAxis);\n    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n    this.setDomain(this.initialDomain);\n  }\n\n  createBrushHandle() {\n    this.xAxisElement = this.svgContainer.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', 'translate(0,' + (this.margin.top + 7) + ')')\n      .call(this.xAxis);\n\n    var onBrush = () => {\n      var extent0 = this.brush.extent();\n      // Get domain as milliseconds and not date.\n      var start = extent0[0].getTime();\n      var end = extent0[1].getTime();\n      // Set the initial domain.\n      this.initialDomain[0] = start;\n      this.initialDomain[1] = end;\n      this.setDomain(this.initialDomain);\n    };\n\n    this.brush = d3.svg.brush()\n      .x(this.x)\n      .extent(this.initialDomain)\n      .on('brush', onBrush);\n\n    this.gBrush = this.svgContainer.append('g')\n      .attr('class', 'brush')\n      .call(this.brush)\n      .selectAll('rect')\n      .attr('height', 20);\n  }\n\n  render() {\n    var timeSelection = this.svgContainer.selectAll('.time-indicator');\n    timeSelection.attr('transform', 'translate(' + this.xDisplayed(this.currentTime[0]) + ', 25)');\n  }\n\n  createTimeHandle() {\n    var self = this;\n\n    var dragTimeMove = function() {\n      var event = d3.event.sourceEvent;\n      event.stopPropagation();\n      var tweenTime = self.tweenTime;\n      var event_x = event.x !== undefined ? event.x : event.clientX;\n      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n      dx = dx.getTime();\n      dx = Math.max(0, dx);\n\n      var timeMatch = false;\n      if (event.shiftKey) {\n        var time = dx / 1000;\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant', false, false, 0.3);\n        if (timeMatch !== false) {\n          timeMatch = timeMatch * 1000;\n        }\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n      self.timer.seek([timeMatch]);\n    };\n\n    var dragTime = d3.behavior.drag()\n      .origin(function(d) {\n        return d;\n      })\n      .on('drag', dragTimeMove);\n\n    var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\n    timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', function() {\n        var mouse = d3.mouse(this);\n        var dx = self.xDisplayed.invert(mouse[0]);\n        dx = dx.getTime();\n        dx = Math.max(0, dx);\n        self.timer.seek([dx]);\n      });\n\n    var timeGrp = timeSelection.enter().append('g')\n      .attr('class', 'time-indicator')\n      .attr('transform', 'translate(-0.5,' + 30 + ')')\n      .call(dragTime);\n\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\n    // Mask time indicator\n    // todo: remove the mask.\n    this.svgContainer.append('rect')\n      .attr('class', 'graph-mask')\n      .attr('x', -self.margin.left)\n      .attr('y', -self.margin.top)\n      .attr('width', self.margin.left - 5)\n      .attr('height', self.height);\n  }\n\n  resize(width) {\n    let width2 = width - this.margin.left - this.margin.right;\n    this.svg.attr('width', width2 + this.margin.left + this.margin.right);\n\n    this.x.range([0, width2]);\n    this.xDisplayed.range([0, width2]);\n    this.xAxisElement.call(this.xAxis);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 13\n ** module chunks = 1\n **/","export default class TimeIndicator {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n    this.timeGrp = this.timeSelection.enter().append('svg')\n      .attr('class', 'time-indicator timeline__right-mask')\n      .attr('width', window.innerWidth - this.timeline.label_position_x)\n      .attr('height', 442);\n\n    this.timeSelection = this.timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', 0)\n      .attr('y', -this.timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    this.timeSelection = this.container.selectAll('.time-indicator rect');\n  }\n\n  updateHeight(height) {\n    this.timeGrp.attr('height', height);\n    this.timeSelection.attr('height', height + this.timeline.margin.top + 5);\n  }\n\n  render() {\n    this.timeSelection.attr('transform', 'translate(' + (this.timeline.x(this.timeline.currentTime[0]) - 0.5) + ',0)');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class Items {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.dy = 10 + this.timeline.margin.top;\n    this.onUpdate = new Signals.Signal();\n  }\n\n  render() {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var selectBar = function() {\n      var data = d3.select(this).datum();\n      self.timeline.selectionManager.select(data);\n    };\n\n    var dragmove = function(d) {\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var diff = dx - d.start;\n      d.start += diff;\n      d.end += diff;\n      if (d.properties) {\n        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n          var prop = d.properties[prop_key];\n          for (var i = 0; i < prop.keys.length; i++) {\n            var key = prop.keys[i];\n            key.time += diff;\n          }\n        }\n      }\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveLeft = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.start;\n        timeMatch = d.start + diff;\n      }\n      d.start = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragmoveRight = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.end;\n        timeMatch = d.end + diff;\n      }\n      d.end = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    };\n\n    var dragLeft = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmoveLeft);\n\n    var dragRight = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmoveRight);\n\n    var drag = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this);\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on('drag', dragmove);\n\n    var bar_border = 1;\n    var bar = this.container.selectAll('.line-grp')\n      .data(this.timeline.tweenTime.data, (d) => {return d.id;});\n\n    var barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp');\n\n    var barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar')\n      // Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', () => {return Utils.guid();})\n      .attr('y', 3)\n      .attr('height', 14);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar-anchor bar-anchor--left')\n      .attr('y', 2)\n      .attr('height', 16)\n      .attr('width', 6)\n      .call(dragLeft);\n\n    barContainerRight.append('rect')\n      .attr('class', 'bar-anchor bar-anchor--right')\n      .attr('y', 2)\n      .attr('height', 16)\n      .attr('width', 6)\n      .call(dragRight);\n\n    self.dy = 10 + this.timeline.margin.top;\n    bar.attr('transform', function(d) {\n      var y = self.dy;\n      self.dy += self.timeline.lineHeight;\n      if (!d.collapsed) {\n        var numProperties = 0;\n        if (d.properties) {\n          var visibleProperties = _.filter(d.properties, function(prop) {\n            return prop.keys.length;\n          });\n          numProperties = visibleProperties.length;\n        }\n        self.dy += numProperties * self.timeline.lineHeight;\n      }\n      return 'translate(0,' + y + ')';\n    });\n\n    var barWithStartAndEnd = function(d) {\n      if (d.start !== undefined && d.end !== undefined) {\n        return true;\n      }\n      return false;\n    };\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.start * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.end * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr('x', (d) => {return self.timeline.x(d.start * 1000) + bar_border;})\n      .attr('width', function(d) {\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n      })\n      .call(drag)\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append('text')\n      .attr('class', 'line-label')\n      .attr('x', self.timeline.label_position_x + 10)\n      .attr('y', 16)\n      .text((d) => {return d.label;})\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    barEnter.append('text')\n      .attr('class', 'line__toggle')\n      .attr('x', self.timeline.label_position_x - 10)\n      .attr('y', 16)\n      .on('click', function(d) {\n        d.collapsed = !d.collapsed;\n        self.onUpdate.dispatch();\n      });\n\n    bar.selectAll('.line__toggle').text(function(d) {\n      if (d.collapsed) {\n        return '';\n      }\n      return '';\n    });\n\n    barEnter.append('line')\n      .attr('class', 'line-separator')\n      .attr('x1', -self.timeline.margin.left)\n      .attr('x2', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('y1', self.timeline.lineHeight)\n      .attr('y2', self.timeline.lineHeight);\n\n    bar.exit().remove();\n\n    return bar;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.js\n **/","let d3 = require('d3');\n\nexport default class KeysPreview {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      }\n\n      return [];\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\n    properties.enter()\n      .append('svg')\n      .attr('class', 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var setItemStyle = function() {\n      var item = d3.select(this.parentNode.parentNode);\n      var bar_data = item.datum();\n      if (bar_data.collapsed === true) {\n        return '';\n      }\n      // Show only when item is collapsed\n      return 'display: none;';\n    };\n\n    properties.selectAll('.key--preview')\n      .attr('style', setItemStyle);\n\n    var keyValue = function(d) {\n      return d.keys;\n    };\n    var keyKey = function(d) {\n      return d.time;\n    };\n    var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\n    keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr('style', setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\n    keys.attr('transform', function(d) {\n      let dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      let dy = 11;\n      return 'translate(' + dx + ',' + dy + ')';\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Properties {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyAdded = new Signals.Signal();\n    this.subGrp = false;\n  }\n\n  render(bar) {\n    var self = this;\n    var editor = this.timeline.editor;\n    var core = editor.tweenTime;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        if (editor.options.showEmptyProperties) {\n          return d.properties;\n        }\n        else {\n          return d.properties.filter((prop) => {return prop.keys.length;});\n        }\n      }\n      return [];\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.line-item').data(propVal, propKey);\n    var subGrp = properties.enter()\n      .append('g')\n      .attr('class', 'line-item');\n\n    // Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp;\n\n    properties.attr('transform', function(d, i) {\n      let sub_height = (i + 1) * self.timeline.lineHeight;\n      return 'translate(0,' + sub_height + ')';\n    });\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on('dblclick', function(d) {\n        var lineObject = this.parentNode.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        var def = d.default ? d.default : 0;\n        var mouse = d3.mouse(this);\n        var dx = self.timeline.x.invert(mouse[0]);\n        dx = dx.getTime() / 1000;\n        var prevKey = Utils.getPreviousKey(d.keys, dx);\n        // set the value to match the previous key if we found one\n        if (prevKey) {\n          def = prevKey.val;\n        }\n        d._line = lineValue;\n        var newKey = {\n          time: dx,\n          val: def,\n          _property: d\n        };\n        if (core.options.defaultEase) {\n          newKey.ease = core.options.defaultEase;\n        }\n\n        d.keys.push(newKey);\n        // Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys);\n        lineValue._isDirty = true;\n\n        lineValue._isDirty = true;\n        var keyContainer = this.parentNode;\n        self.onKeyAdded.dispatch(newKey, keyContainer);\n      });\n\n    // Mask\n    subGrp.append('svg')\n      .attr('class', 'line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00');\n\n    subGrp.append('text')\n      .attr('class', 'line-label line-label--small')\n      .attr('x', self.timeline.label_position_x + 10)\n      .attr('y', 15)\n      .text(function(d) {\n        return d.name;\n      });\n\n    subGrp.append('line')\n      .attr('class', 'line-separator--secondary')\n      .attr('x1', -self.timeline.margin.left)\n      .attr('x2', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('y1', self.timeline.lineHeight)\n      .attr('y2', self.timeline.lineHeight);\n\n    bar.selectAll('.line-item').attr('display', function() {\n      var lineObject = this.parentNode;\n      var lineValue = d3.select(lineObject).datum();\n      if (!lineValue.collapsed) {\n        return 'block';\n      }\n      return 'none';\n    });\n\n    properties.exit().remove();\n\n    return properties;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\nlet _ = require('lodash');\n\nexport default class Keys {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyUpdated = new Signals.Signal();\n  }\n\n  selectNewKey(data, container) {\n    var self = this;\n    var key = d3.select(container).selectAll('.key').filter(function(item) {\n      return item.time === data.time;\n    });\n    if (key.length) {\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      key.classed('key--selected', true);\n      key = key[0][0];\n      data._dom = key;\n      self.timeline.selectionManager.select(data);\n    }\n  }\n\n  render(properties) {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var dragmove = function(d) {\n      var sourceEvent = d3.event.sourceEvent;\n      var propertyObject = this.parentNode;\n      var lineObject = propertyObject.parentNode.parentNode;\n      var propertyData = d3.select(propertyObject).datum();\n      var lineData = d3.select(lineObject).datum();\n      var key_data = d;\n\n      var currentDomainStart = self.timeline.x.domain()[0];\n      var mouse = d3.mouse(this);\n      var old_time = d.time;\n      var dx = self.timeline.x.invert(mouse[0]);\n      dx = dx.getTime();\n      dx = dx / 1000 - currentDomainStart / 1000;\n      dx = d.time + dx;\n\n      var selection = self.timeline.selectionManager.getSelection();\n      var selection_first_time = false;\n      var selection_last_time = false;\n      if (selection.length) {\n        selection_first_time = selection[0].time;\n        selection_last_time = selection[selection.length - 1].time;\n      }\n\n      selection = _.filter(selection, (item) => {return _.isEqual(item, key_data) === false;});\n\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n\n      d.time = timeMatch;\n      // Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys);\n      var time_offset = d.time - old_time;\n\n      var updateKeyItem = function(item) {\n        var property = item._property;\n        property._line._isDirty = true;\n        property.keys = Utils.sortKeys(property.keys);\n      };\n\n      var key_scale = false;\n      var is_first = false;\n      if (selection.length) {\n        if (sourceEvent.altKey && selection_first_time !== false && selection_last_time !== false) {\n          is_first = selection_first_time === old_time;\n          if (is_first) {\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n          }\n          else {\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n          }\n        }\n\n        for (var i = 0; i < selection.length; i++) {\n          var data = selection[i];\n          if (key_scale === false) {\n            data.time += time_offset;\n          }\n          else {\n            if (is_first) {\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n            }\n            else {\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n            }\n          }\n          updateKeyItem(data);\n        }\n      }\n\n      lineData._isDirty = true;\n      self.onKeyUpdated.dispatch();\n    };\n\n    var propValue = function(d) {\n      return d.keys;\n    };\n    var propKey = function(d) {\n      if (!d._id) {\n        d._id = Utils.guid();\n      }\n      return d._id;\n    };\n    var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\n    // selectKey is triggered by dragstart event\n    var selectKey = function() {\n      var event = d3.event;\n      // with dragstart event the mousevent is is inside the event.sourcEvent\n      if (event.sourceEvent) {\n        event = event.sourceEvent;\n      }\n\n      var addToSelection = event.shiftKey;\n      // if element is already selectionned and we are on\n      // the dragstart event, we stop there since it is already selected.\n      if (d3.event.type && d3.event.type === 'dragstart') {\n        if (d3.select(this).classed('key--selected')) {\n          return;\n        }\n      }\n      var key_data = d3.select(this).datum();\n\n      // Also keep a reference to the key dom element.\n      key_data._dom = this;\n\n      self.timeline.selectionManager.select(key_data, addToSelection);\n    };\n\n    var dragend = function() {\n      self.timeline.editor.undoManager.addState();\n    };\n\n    var drag = d3.behavior.drag()\n      .origin((d) => {return d;})\n      .on('drag', dragmove)\n      .on('dragstart', selectKey)\n      .on('dragend', dragend);\n\n    var key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      // Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) => {return d._id;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n      .call(drag);\n\n    properties.selectAll('.key')\n      .attr('class', function(d) {\n        var cls = 'key';\n        // keep selected class\n        if (d3.select(this).classed('key--selected')) {\n          cls += ' key--selected';\n        }\n        if (d.ease) {\n          var ease = d.ease.split('.');\n          if (ease.length === 2) {\n            cls += ' ' + ease[1];\n          }\n        }\n        else {\n          // If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut';\n        }\n        return cls;\n      });\n\n    var grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_in = key_grp.append('g')\n      .attr('class', 'ease-in');\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_out = key_grp.append('g')\n      .attr('class', 'ease-out');\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n\n    var grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout');\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5);\n\n    keys.attr('transform', function(d) {\n      var dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      var dy = 10;\n      return 'translate(' + dx + ',' + dy + ')';\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.js\n **/","export default class Errors {\n  constructor(timeline) {\n    this.timeline = timeline;\n  }\n\n  render(properties) {\n    var self = this;\n    var subGrp = self.timeline.properties.subGrp;\n    var propertiesWithError = function(d) {\n      return d.errors !== undefined;\n    };\n    // use insert with :first-child to prepend.\n    subGrp.insert('svg', ':first-child')\n      .attr('class', 'line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var errorsValue = function(d) {\n      return d.errors;\n    };\n    var errorTime = function(d) {\n      return d.time;\n    };\n\n    var errors = properties.filter(propertiesWithError)\n      .select('.line-item__errors').selectAll('.error')\n      .data(errorsValue, errorTime);\n\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1');\n\n    properties.selectAll('.error').attr('x', function(d) {\n      var dx;\n      dx = self.timeline.x(d.time * 1000);\n      return dx;\n    });\n\n    errors.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.js\n **/","let d3 = require('d3');\n\nexport default class Selection {\n  constructor(timeline, svg, margin) {\n    this.timeline = timeline;\n    this.svg = svg;\n    this.margin = margin;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n\n  onMouseUp() {\n    this.svg.selectAll('.selection').remove();\n    // Enable again the default browser text selection.\n    $('body').css({\n      'user-select': 'all'\n    });\n  }\n\n  init() {\n    var self = this;\n    this.svg.on('mousedown', function() {\n      var p = d3.mouse(this);\n      // Only init selection if we click on the timeline and not on the labels.\n      if (p[0] < self.timeline.margin.left) {\n        return;\n      }\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        });\n      // Unselect items.\n      self.timeline.selectionManager.reset();\n      // Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      });\n    }).on('mousemove', function() {\n      var s = self.svg.select('.selection');\n      if (s.empty()) {\n        return;\n      }\n      var p = d3.mouse(this);\n      var d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      };\n      // Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0]);\n\n      var move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      };\n      if (move.x < 1 || move.x * 2 < d.width) {\n        d.x = p[0];\n        d.width -= move.x;\n      }\n      else {\n        d.width = move.x;\n      }\n\n      if (move.y < 1 || move.y * 2 < d.height) {\n        d.y = p[1];\n        d.height -= move.y;\n      }\n      else {\n        d.height = move.y;\n      }\n\n      s.attr(d);\n\n      // remove margins from selection\n      d.x -= self.margin.left;\n      var key_width = 6;\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\n      // deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      self.timeline.selectionManager.reset();\n      var selection = [];\n      d3.selectAll('.key').each( function(state_data) {\n        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n        var key_data = d3.select(this).datum();\n\n        // Also keep a reference to the key dom element.\n        key_data._dom = this;\n\n        if (item_data.collapsed !== true) {\n          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n          var y = itemBounding.top - containerBounding.top;\n          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n            // use or condition for top and bottom\n            if (y >= d.y && y <= d.y + d.height || y + 10 >= d.y && y + 10 <= d.y + d.height) {\n              d3.select(this).classed('key--selected', true);\n\n              selection.push(key_data);\n            }\n          }\n        }\n      });\n      self.timeline.selectionManager.select(selection);\n    });\n    // Attach the mouseup event to window so that it catch it event if\n    // mouseup happen outside of the browser window.\n    $(window).on('mouseup', this.onMouseUp);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.js\n **/","import 'jquery';\nlet Signals = require('js-signals');\nimport Property from '../editor/Property';\n\nlet tpl_propertiesEditor = require('./../templates/propertiesEditor.tpl.html');\n\nexport default class PropertiesEditor {\n  constructor(editor) {\n    this.editor = editor;\n\n    this.render = this.render.bind(this);\n    this.addProperty = this.addProperty.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = this.editor.timeline;\n    this.timer = this.editor.timer;\n    this.selectionManager = editor.selectionManager;\n\n    this.$el = $(tpl_propertiesEditor());\n    this.$container = this.$el.find('.properties-editor__main');\n    // todo: rename keyAdded to updated\n    this.keyAdded = new Signals.Signal();\n    this.keyRemoved = new Signals.Signal();\n    this.items = [];\n\n    this.parentElement = editor.el;\n    // Close properties by default.\n    this.parentElement.addClass('properties-is-closed');\n    // Add the properties editor to the document.\n    this.parentElement.append(this.$el);\n\n    this.selectionManager.onSelect.add(this.onSelect);\n\n    // Stop event propagation to no play by accident.\n    this.$el.keypress(function(e) {\n      return e.stopPropagation();\n    });\n  }\n\n  onKeyAdded() {\n    this.keyAdded.dispatch();\n  }\n\n  onSelect(data = false) {\n    this.items.forEach((item) => {item.remove();});\n    this.items = [];\n    this.$container.empty();\n    if (data instanceof Array) {\n      for (var i = 0; i < data.length; i++) {\n        this.addProperty(data[i]);\n      }\n    }\n    else {\n      this.addProperty(data);\n    }\n\n    // When selecting anything, automatically display the properties editor.\n    if (this.items.length) {\n      this.parentElement.removeClass('properties-is-closed');\n    }\n  }\n\n  addProperty(data) {\n    var prop = new Property(this.editor, this.$container, data);\n    prop.keyAdded.add(this.onKeyAdded);\n    this.items.push(prop);\n  }\n\n  render(time, time_changed) {\n    if (!time_changed) {\n      return;\n    }\n    this.items.forEach((prop) => {prop.update();});\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 22\n ** module chunks = 1\n **/","let Signals = require('js-signals');\nimport PropertyNumber from './PropertyNumber';\nimport PropertyColor from './PropertyColor';\nimport PropertyTween from './PropertyTween';\nimport PropertyEvent from './PropertyEvent';\nimport PropertyFooter from './PropertyFooter';\n\nexport default class Property {\n  constructor(editor, $el, data) {\n    this.editor = editor;\n    this.$el = $el;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = editor.timeline;\n    this.timer = editor.timer;\n    this.selectionManager = editor.selectionManager;\n    this.keyAdded = new Signals.Signal();\n    this.items = [];\n    this.numberProp = false;\n    this.tweenProp = false;\n\n    var key_val = false;\n    // var propertyObject = false;\n    var propertyData = false;\n    // var lineObject = false;\n    var lineData = false;\n\n    // For keys the _property data should be defined.\n    if (data._property) {\n      propertyData = data._property;\n      lineData = propertyData._line;\n      key_val = data;\n    }\n\n    // Check if we selected a main item.\n    if (data.id) {\n      lineData = data;\n    }\n\n    // data and propertyData are defined on key select.\n    var property_name = false;\n    if (propertyData) {\n      property_name = propertyData.name;\n    }\n\n    // Get the property container.\n    var $container = this.getContainer(lineData);\n\n    var $tween_container = $container;\n\n    // Basic data, loop through properties.\n    for (var key in lineData.properties) {\n      if (lineData.properties.hasOwnProperty(key)) {\n        var instance_prop = lineData.properties[key];\n        // show all properties or only 1 if we selected a key.\n        if (!property_name || instance_prop.name === property_name) {\n          var $grp_container = this.getGroupContainer(instance_prop, $container);\n          var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n          this.items.push(numberProp);\n          if (instance_prop.name === property_name) {\n            $tween_container = $grp_container;\n          }\n\n          if (property_name) {\n            if (instance_prop.type !== 'event') {\n              // Add tween select if we are editing a key, so only if there is property_name.\n              var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container);\n              this.items.push(tweenProp);\n            }\n            let footerProp = this.addFooter(instance_prop, lineData, key_val, $tween_container, propertyData);\n            this.items.push(footerProp);\n          }\n        }\n      }\n    }\n  }\n\n  onKeyAdded() {\n    // propagate the event.\n    this.keyAdded.dispatch();\n  }\n\n  getGroupContainer(instance_prop, $container) {\n    var $existing;\n    var $grp;\n    var grp_class;\n    if (!instance_prop.group) {\n      grp_class = 'property-grp--general';\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      }\n\n      $grp = this.createGroupContainer(grp_class);\n      $container.append($grp);\n      return $grp;\n    }\n    // Replace all spaces to dash and make class lowercase\n    var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n    grp_class = 'property-grp--' + group_name;\n    $existing = $container.find('.' + grp_class);\n    if ($existing.length) {\n      return $existing;\n    }\n    $grp = this.createGroupContainer(grp_class, instance_prop.group);\n    $container.append($grp);\n    return $grp;\n  }\n\n  createGroupContainer(grp_class, label = false) {\n    var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n    if (label) {\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n    }\n    return $grp;\n  }\n\n  getContainer(lineData) {\n    var $container = false;\n    if (lineData.id) {\n      $container = $('#property--' + lineData.id);\n      if (!$container.length) {\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n        this.$el.append($container);\n        if (lineData.label) {\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n        }\n      }\n    }\n    if ($container === false) {\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n      this.$el.append($container);\n    }\n    return $container;\n  }\n\n  remove() {\n    this.items.forEach((item) => {item.remove();});\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n\n    delete this.editor;\n    delete this.$el;\n\n    delete this.timeline;\n    delete this.timer;\n    delete this.selectionManager;\n    delete this.keyAdded;\n    delete this.items;\n    delete this.numberProp;\n    delete this.tweenProp;\n  }\n\n  addNumberProperty(instance_prop, lineData, key_val, $container) {\n    var PropClass = PropertyNumber;\n    if (instance_prop.type === 'color') {\n      PropClass = PropertyColor;\n    }\n    else if (instance_prop.type === 'event') {\n      PropClass = PropertyEvent;\n    }\n    var prop = new PropClass(instance_prop, lineData, this.editor, key_val);\n    prop.keyAdded.add(this.onKeyAdded);\n    $container.append(prop.$el);\n    return prop;\n  }\n\n  addTweenProperty(instance_prop, lineData, key_val, $container) {\n    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(tween.$el);\n    return tween;\n  }\n\n  addFooter(instance_prop, lineData, key_val, $container, propertyData) {\n    let footer = new PropertyFooter(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(footer.$el);\n\n    // Add a remove key button\n    footer.$el.find('[data-action-remove]').click((e) => {\n      e.preventDefault();\n      var index = propertyData.keys.indexOf(key_val);\n      if (index > -1) {\n        propertyData.keys.splice(index, 1);\n        if (key_val._dom) {\n          this.editor.propertiesEditor.keyRemoved.dispatch(key_val);\n        }\n        lineData._isDirty = true;\n      }\n    });\n    return footer;\n  }\n\n  update() {\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.js\n **/","import 'jquery';\nimport PropertyBase from './PropertyBase';\nlet DraggableNumber = require('draggable-number.js');\n\nlet tpl_property = require('../templates/propertyNumber.tpl.html');\n\nexport default class PropertyNumber extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  getInputVal() {\n    return parseFloat(this.$el.find('input').val());\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    var onChangeEnd = () => {\n      this.editor.undoManager.addState();\n    };\n\n    var draggableOptions = {\n      changeCallback: () => this.onInputChange(),\n      endCallback: () => onChangeEnd()\n    };\n    // Set min & max if they are defined.\n    if ('min' in this.instance_property) {\n      draggableOptions.min = this.instance_property.min;\n    }\n    if ('max' in this.instance_property) {\n      draggableOptions.max = this.instance_property.max;\n    }\n\n    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n    $input.data('draggable', draggable);\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.render();\n    if (this.$input.data('draggable')) {\n      this.$input.data('draggable').destroy();\n    }\n\n    delete this.$input;\n    delete this.$el;\n  }\n\n  update() {\n    super.render();\n    var val = this.getCurrentVal();\n    var draggable = this.$input.data('draggable');\n\n    if (draggable) {\n      draggable.set(val.toFixed(3));\n    }\n    else {\n      this.$input.val(val.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.js\n **/","let Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class PropertyBase {\n  // @instance_property: The current property on the data object.\n  // @lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n\n    // this.update = this.update.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onKeyClick = this.onKeyClick.bind(this);\n\n    this.timer = editor.timer;\n    this.keyAdded = new Signals.Signal();\n    this.render();\n\n    this.$key = this.$el.find('.property__key');\n  }\n\n  onKeyClick(e) {\n    e.preventDefault();\n    var currentValue = this.getCurrentVal();\n    this.addKey(currentValue);\n  }\n\n  getInputVal() {\n    return this.$el.find('input').val();\n  }\n\n  getCurrentVal() {\n    var val = this.instance_property.val;\n    var prop_name = this.instance_property.name;\n\n    // if we selected a key simply return it's value\n    if (this.key_val) {\n      return this.key_val.val;\n    }\n    if (this.lineData.values !== undefined && this.lineData.values[prop_name]) {\n      return this.lineData.values[prop_name];\n    }\n    return val;\n  }\n\n  onInputChange() {\n    var current_value = this.getInputVal();\n    var currentTime = this.timer.getCurrentTime() / 1000;\n\n    // if we selected a key simply get the time from it.\n    if (this.key_val) {\n      currentTime = this.key_val.time;\n    }\n\n    if (this.instance_property.keys && this.instance_property.keys.length) {\n      // Add a new key if there is no other key at same time\n      var current_key = _.find(this.instance_property.keys, (key) => key.time === currentTime);\n\n      if (current_key) {\n        // if there is a key update it\n        current_key.val = current_value;\n      }\n      else {\n        // add a new key\n        this.addKey(current_value);\n      }\n    }\n    else {\n      // There is no keys, simply update the property value (for data saving)\n      this.instance_property.val = current_value;\n      // Also directly set the lineData value.\n      this.lineData.values[this.instance_property.name] = current_value;\n      // Simply update the custom object with new values.\n      if (this.lineData.object) {\n        currentTime = this.timer.getCurrentTime() / 1000;\n        // Set the property on the instance object.\n        this.lineData.object.update(currentTime - this.lineData.start);\n      }\n    }\n\n    // Something changed, make the lineData dirty to rebuild things. d\n    this.lineData._isDirty = true;\n  }\n\n  getCurrentKey() {\n    var time = this.timer.getCurrentTime() / 1000;\n    if (!this.instance_property || !this.instance_property.keys) {\n      return false;\n    }\n    if (this.instance_property.keys.length === 0) {\n      return false;\n    }\n    for (var i = 0; i < this.instance_property.keys.length; i++) {\n      var key = this.instance_property.keys[i];\n      if (key.time === time) {\n        return key;\n      }\n    }\n    return false;\n  }\n\n  addKey(val) {\n    var core = this.editor.tweenTime;\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    var key = {\n      time: currentTime,\n      val: val\n    };\n    if (core.options.defaultEase) {\n      key.ease = core.options.defaultEase;\n    }\n    this.instance_property.keys.push(key);\n    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n    this.lineData._isDirty = true;\n    this.keyAdded.dispatch();\n  }\n\n  render() {\n    // current values are defined in @lineData.values\n    this.values = this.lineData.values !== undefined ? this.lineData.values : {};\n  }\n\n  update() {\n    var key = this.getCurrentKey();\n    this.$key.toggleClass('property__key--active', key);\n  }\n\n  remove() {\n    if (this.keyAdded) {\n      this.keyAdded.dispose();\n    }\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n\n    delete this.timer;\n    delete this.keyAdded;\n    delete this.$key;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"draggable-number.js\",\"commonjs2\":\"draggable-number.js\",\"amd\":\"DraggableNumber\"}\n ** module id = 26\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyNumber.tpl.html\n ** module id = 27\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/hogan.js\n ** module id = 28\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/compiler.js\n ** module id = 29\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/poly/ws/TweenTime/~/hogan.js/lib/template.js\n ** module id = 30\n ** module chunks = 1\n **/","import 'jquery';\nrequire('spectrum');\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyColor.tpl.html');\n\nexport default class PropertyColor extends PropertyBase {\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super.render();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    var data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: 'rgb',\n      change: () => {\n        this.editor.undoManager.addState();\n      },\n      move: (color) => {\n        if (color._a === 1) {\n          $input.val(color.toHexString());\n        }\n        else {\n          $input.val(color.toRgbString());\n        }\n\n        this.onInputChange();\n      }\n    });\n\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.remove();\n    this.$el.find('input').spectrum('destroy');\n    delete this.$el;\n    delete this.$input;\n  }\n\n  update() {\n    super.update();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n    this.$input.spectrum('set', val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"spectrum\",\"commonjs\":\"spectrum-colorpicker\",\"commonjs2\":\"spectrum-colorpicker\",\"amd\":\"spectrum\"}\n ** module id = 32\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyColor.tpl.html\n ** module id = 33\n ** module chunks = 1\n **/","import 'jquery';\n\nlet tpl_property = require('../templates/propertyTween.tpl.html');\n\nexport default class PropertyTween {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.onChange = this.onChange.bind(this);\n\n    this.timer = this.editor.timer;\n    this.$el = false;\n    this.render();\n  }\n\n  remove() {\n    delete this.$el;\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n    delete this.timeline;\n\n    delete this.timer;\n  }\n\n  render() {\n    var self = this;\n    if (!this.key_val.ease) {\n      this.key_val.ease = 'Quad.easeOut';\n    }\n    var data = {\n      id: this.instance_property.name + '_tween',\n      val: this.key_val.ease,\n      options: ['Linear.easeNone'],\n      selected: function() {\n        if (this.toString() === self.key_val.ease) {\n          return 'selected';\n        }\n        return '';\n      }\n    };\n\n    var tweens = ['Quad', 'Cubic', 'Quart', 'Quint'];\n    for (var i = 0; i < tweens.length; i++) {\n      var tween = tweens[i];\n      data.options.push(tween + '.easeOut');\n      data.options.push(tween + '.easeIn');\n      data.options.push(tween + '.easeInOut');\n    }\n\n    this.$el = $(tpl_property(data));\n    this.$el.find('select').change(this.onChange);\n  }\n\n  onChange() {\n    var ease = this.$el.find('select').val();\n    this.key_val.ease = ease;\n    this.editor.undoManager.addState();\n    this.lineData._isDirty = true;\n    this.timeline._isDirty = true;\n  }\n\n  update() {\n    console.log('PropertyTween\\'s upload method is not yet implemented.');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyTween.tpl.html\n ** module id = 35\n ** module chunks = 1\n **/","import 'jquery';\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyEvent.tpl.html');\n\nexport default class PropertyEvent extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super.render();\n\n    let val = this.getCurrentVal();\n\n    let data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    let view = tpl_property(data);\n    this.$el = $(view);\n\n    var $input = this.$el.find('input');\n\n    $input.change(this.onInputChange);\n  }\n\n  remove() {\n    super.remove();\n  }\n\n  update() {\n    super.update();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyEvent.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"text\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"text\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyEvent.tpl.html\n ** module id = 37\n ** module chunks = 1\n **/","import 'jquery';\n\nlet tpl_property = require('../templates/propertyFooter.tpl.html');\n\nexport default class PropertyFooter {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.timer = this.editor.timer;\n    this.$time = false;\n    this.$el = false;\n    this.render();\n  }\n\n  remove() {\n    delete this.$el;\n    delete this.instance_property;\n    delete this.lineData;\n    delete this.editor;\n    delete this.key_val;\n    delete this.timeline;\n\n    delete this.timer;\n    delete this.$time;\n  }\n\n  render() {\n    var data = {\n      time: this.key_val.time.toFixed(3)\n    };\n\n    this.$el = $(tpl_property(data));\n    this.$time = this.$el.find('.property__key-time strong');\n    this.$time.keypress((e) => {\n      if (e.charCode === 13) {\n        // Enter\n        e.preventDefault();\n        this.$time.blur();\n        this.updateKeyTime(this.$time.text());\n      }\n    });\n\n    this.$time.on('click', () => document.execCommand('selectAll', false, null));\n  }\n\n  updateKeyTime(time) {\n    let time2 = parseFloat(time);\n    if (isNaN(time2)) {\n      time2 = this.key_val.time;\n    }\n    this.$time.text(time2);\n    this.key_val.time = time2;\n  }\n\n  update() {\n    // todo: use mustache instead...\n    this.$time.html(this.key_val.time.toFixed(3));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyFooter.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyFooter.tpl.html\n ** module id = 39\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertiesEditor.tpl.html\n ** module id = 40\n ** module chunks = 1\n **/","let saveAs = require('file-saver').saveAs || require('file-saver');\n\nexport default class EditorMenu {\n  constructor(tweenTime, $timeline, editor) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.editor = editor;\n    this.timer = this.tweenTime.timer;\n    this.initExport();\n    this.initToggle();\n  }\n\n  initToggle() {\n    var parentElement = this.editor.el;\n    var timelineClosed = false;\n    var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n    $toggleLink.click((e) => {\n      e.preventDefault();\n      timelineClosed = !timelineClosed;\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n      parentElement.toggleClass('timeline-is-closed', timelineClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n    var $toggleLinkSide = $('.properties-editor', parentElement).find('[data-action=\"toggle\"]');\n    $toggleLinkSide.click((e) => {\n      var propertiesClosed;\n      e.preventDefault();\n      propertiesClosed = !parentElement.hasClass('properties-is-closed');\n      parentElement.toggleClass('properties-is-closed', propertiesClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n  }\n\n  initExport() {\n    var exporter = this.editor.exporter;\n    this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n      e.preventDefault();\n      var data = exporter.getJSON();\n      var blob = new Blob([data], {\n        type: 'text/json;charset=utf-8'\n      });\n      saveAs(blob, 'data.json');\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_42__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"saveAs\",\"commonjs\":\"file-saver\",\"commonjs2\":\"file-saver\",\"amd\":\"file-saver\"}\n ** module id = 42\n ** module chunks = 1\n **/","export default class EditorControls {\n  constructor(tweenTime, $timeline) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.timer = this.tweenTime.timer;\n    this.$time = this.$timeline.find('.control--time');\n    this.$time_end = this.$timeline.find('.control--time-end');\n    this.initControls();\n    this.$time_end.val(this.tweenTime.timer.getDuration());\n\n    $(document).keypress((e) => {\n      if (e.charCode === 32) {\n        // Space\n        this.playPause();\n      }\n    });\n  }\n\n  playPause() {\n    var $play_pause;\n    this.timer.toggle();\n    $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n    $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n  }\n\n  initControls() {\n    var $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.click((e) => {\n      e.preventDefault();\n      this.playPause();\n    });\n    var $bt_first = this.$timeline.find('.control--first');\n    $bt_first.click((e) => {\n      e.preventDefault();\n      this.timer.seek([0]);\n    });\n    var $bt_last = this.$timeline.find('.control--last');\n    $bt_last.click((e) => {\n      e.preventDefault();\n      var total = this.tweenTime.getTotalDuration();\n      this.timer.seek([total * 1000]);\n    });\n    this.$time.change(() => {\n      var seconds = parseFloat(this.$time.val(), 10) * 1000;\n      this.timer.seek([seconds]);\n    });\n    this.$time_end.change(() => {\n      var seconds = parseFloat(this.$time_end.val(), 10);\n      this.timer.setDuration(seconds);\n    });\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var seconds = time / 1000;\n      this.$time.val(seconds.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\n\nexport default class SelectionManager {\n  constructor(tweenTime) {\n    this.tweenTime = tweenTime;\n    this.selection = [];\n    this.onSelect = new Signals.Signal();\n  }\n\n  select(item, addToSelection = false) {\n    this.addDataRelations();\n\n    if (!addToSelection) {\n      this.selection = [];\n    }\n    if (item instanceof Array) {\n      for (var i = 0; i < item.length; i++) {\n        var el = item[i];\n        this.selection.push(el);\n      }\n    }\n    else {\n      this.selection.push(item);\n    }\n\n    this.removeDuplicates();\n    this.highlightItems();\n    this.sortSelection();\n    this.onSelect.dispatch(this.selection, addToSelection);\n  }\n\n  getSelection() {\n    return this.selection;\n  }\n\n  removeDuplicates() {\n    var result = [];\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var found = false;\n      for (var j = 0; j < result.length; j++) {\n        var item2 = result[j];\n        if (_.isEqual(item, item2)) {\n          found = true;\n          break;\n        }\n      }\n      if (found === false) {\n        result.push(item);\n      }\n    }\n    this.selection = result;\n  }\n\n  removeItem(item) {\n    // If we pass an _id then search for the item and remove it.\n    if (typeof item === 'string') {\n      let itemObj = _.find(this.selection, function(el) {\n        return el._id === item;\n      });\n      if (itemObj) {\n        return this.removeItem(itemObj);\n      }\n    }\n\n    // Remove the object if it exists in the selection.\n    var index = this.selection.indexOf(item);\n    if (index > -1) {\n      this.selection.splice(index, 1);\n    }\n    this.triggerSelect();\n  }\n\n  sortSelection() {\n    var compare = function(a, b) {\n      if (!a.time || !b.time) {\n        return 0;\n      }\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    };\n    this.selection = this.selection.sort(compare);\n  }\n\n  reset() {\n    this.selection = [];\n    this.highlightItems();\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  triggerSelect() {\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  addDataRelations() {\n    // We need to add some parent references in main data object.\n    // Add a _property reference to each keys.\n    // Add a _line property for each references.\n    var data = this.tweenTime.data;\n    for (var lineIndex = 0; lineIndex < data.length; lineIndex++) {\n      var line = data[lineIndex];\n      for (var propIndex = 0; propIndex < line.properties.length; propIndex++) {\n        var property = line.properties[propIndex];\n        property._line = line;\n        for (var keyIndex = 0; keyIndex < property.keys.length; keyIndex++) {\n          var key = property.keys[keyIndex];\n          key._property = property;\n        }\n      }\n    }\n  }\n\n  highlightItems() {\n    d3.selectAll('.bar--selected').classed('bar--selected', false);\n    d3.selectAll('.key--selected').classed('key--selected', false);\n\n    for (var i = 0; i < this.selection.length; i++) {\n      var data = this.selection[i];\n      if (data._dom) {\n        var d3item = d3.select(data._dom);\n        if (d3item.classed('bar')) {\n          d3item.classed('bar--selected', true);\n        }\n        else if (d3item.classed('key')) {\n          d3item.classed('key--selected', true);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.js\n **/","export default class Exporter {\n  constructor(editor) {\n    this.editor = editor;\n  }\n\n  getData() {\n    var tweenTime = this.editor.tweenTime;\n    var domain = this.editor.timeline.x.domain();\n    var domain_start = domain[0];\n    var domain_end = domain[1];\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    };\n  }\n\n  getJSON() {\n    var options = this.editor.options;\n    var json_replacer = function(key, val) {\n      // Disable all private properies from TweenMax/TimelineMax\n      if (key.indexOf('_') === 0) {\n        return undefined;\n      }\n      if (options.json_replacer !== undefined) {\n        return options.json_replacer(key, val);\n      }\n      return val;\n    };\n\n    var data = this.getData();\n    return JSON.stringify(data, json_replacer, 2);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.js\n **/","import 'jquery';\n\nexport default class UndoManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.history_max = 100;\n    this.history = [];\n    this.current_index = 0;\n\n    // Add the initial state\n    this.addState();\n\n    $(document).keydown((e) => {\n      if (e.keyCode === 90) {\n        if (e.metaKey || e.ctrlKey) {\n          if (!e.shiftKey) {\n            // (command | ctrl) Z\n            this.undo();\n          }\n          else {\n            // (command | ctrl) shift Z\n            this.redo();\n          }\n        }\n      }\n    });\n  }\n\n  undo() {\n    // If there is no more history return\n    if (this.current_index <= 0) {\n      return false;\n    }\n    this.current_index -= 1;\n    this.setState(this.current_index);\n  }\n\n  redo() {\n    // Stop if there is no more things.\n    if (this.current_index >= this.history.length - 1) {\n      return false;\n    }\n    this.current_index += 1;\n    this.setState(this.current_index);\n  }\n\n  addState() {\n    var data = JSON.parse(this.editor.exporter.getJSON());\n\n    // if we did some undo before and then edit something,\n    // we want to remove all actions past the current index first.\n    if (this.current_index + 1 < this.history.length) {\n      this.history.splice(this.current_index + 1, this.history.length - 1);\n    }\n\n    this.history.push(data);\n\n    // Keep history to a max size by removing the first element if needed.\n    if (this.history.length > this.history_max) {\n      this.history.shift();\n    }\n\n    // Set the current index\n    this.current_index = this.history.length - 1;\n  }\n\n  setState(index) {\n    var state = this.history[index];\n    var data = state.data;\n    var tweenTime = this.editor.tweenTime;\n\n    // naively copy keys and values from previous state\n    for (var item_key = 0; item_key < data.length; item_key++) {\n      var item = data[item_key];\n      // if item is not defined copy it\n      if (!tweenTime.data[item_key]) {\n        tweenTime.data[item_key] = item;\n      }\n      else {\n        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n          var prop = item.properties[prop_key];\n          // if property is not defined copy it\n          if (!tweenTime.data[item_key].properties[prop_key]) {\n            tweenTime.data[item_key].properties[prop_key] = prop;\n          }\n          else {\n            // set property keys\n            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n              var key = prop.keys[key_key];\n              if (!keys[key_key]) {\n                keys[key_key] = key;\n              }\n              else {\n                keys[key_key].time = key.time;\n                keys[key_key].val = key.val;\n                keys[key_key].ease = key.ease;\n              }\n            }\n          }\n        }\n      }\n\n      tweenTime.data[item_key]._isDirty = true;\n    }\n    this.editor.render(false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/timeline.tpl.html\n ** module id = 47\n ** module chunks = 1\n **/"],"sourceRoot":""}
>>>>>>> master
